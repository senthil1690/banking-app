"use strict";(self.webpackChunkmybankingaccount=self.webpackChunkmybankingaccount||[]).push([[179],{2011:(ht,Ce,k)=>{k.d(Ce,{Dh:()=>ce,GT:()=>oe,cc:()=>Te,hO:()=>je,on:()=>B,pX:()=>J,xv:()=>le});var p=k(4650),Y=k(9260),O=k(2122);ht=k.hmd(ht);const ee=["ngOnDestroy"],J=(ae,Je,lt,De={})=>new Proxy(ae,{get:(ye,we)=>lt.runOutsideAngular(()=>{var Ve;if(ae[we])return!(null===(Ve=De?.spy)||void 0===Ve)&&Ve.get&&De.spy.get(we,ae[we]),ae[we];if(ee.indexOf(we)>-1)return()=>{};const Ue=Je.toPromise().then(U=>{const fe=U&&U[we];return"function"==typeof fe?fe.bind(U):fe&&fe.then?fe.then(Fe=>lt.run(()=>Fe)):lt.run(()=>fe)});return new Proxy(()=>{},{get:(U,fe)=>Ue[fe],apply:(U,fe,Fe)=>Ue.then(Ye=>{var ct;const qe=Ye&&Ye(...Fe);return!(null===(ct=De?.spy)||void 0===ct)&&ct.apply&&De.spy.apply(we,Fe,qe),qe})})})}),oe=(ae,Je)=>{Je.forEach(lt=>{Object.getOwnPropertyNames(lt.prototype||lt).forEach(De=>{Object.defineProperty(ae.prototype,De,Object.getOwnPropertyDescriptor(lt.prototype||lt,De))})})};class ie{constructor(Je){return Je}}const ce=new p.OlP("angularfire2.app.options"),le=new p.OlP("angularfire2.app.name");function B(ae,Je,lt){const ye="object"==typeof lt&&lt||{};ye.name=ye.name||"string"==typeof lt&&lt||"[DEFAULT]";const Ve=Y.Z.apps.filter(Ue=>Ue&&Ue.name===ye.name)[0]||Je.runOutsideAngular(()=>Y.Z.initializeApp(ae,ye));try{JSON.stringify(ae)!==JSON.stringify(Ve.options)&&$("error",`${Ve.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ie(Ve)}const $=(ae,...Je)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ae](...Je)},q={provide:ie,useFactory:B,deps:[ce,p.R0b,[new p.FiY,le]]};let je=(()=>{class ae{constructor(lt){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",p.q4F.full,lt.toString())}static initializeApp(lt,De){return{ngModule:ae,providers:[{provide:ce,useValue:lt},{provide:le,useValue:De}]}}}return ae.\u0275fac=function(lt){return new(lt||ae)(p.LFG(p.Lbi))},ae.\u0275mod=p.oAB({type:ae}),ae.\u0275inj=p.cJS({providers:[q]}),ae})();function Te(ae,Je,lt,De,ye){const[,we,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===ae)||[];if(we)return function _e(ae,Je){try{return ae.toString()===Je.toString()}catch{return ae===Je}}(ye,Ve)||(ge("error",`${Je} was already initialized on the ${lt} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ye,was:Ve})),we;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([ae,Ue,ye]),Ue}}const et=!!ht.hot,ge=(ae,...Je)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ae](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ht,Ce,k)=>{k.d(Ce,{q4:()=>Zr,iC:()=>Dn,HU:()=>Iu,vb:()=>nn,JM:()=>Mr});var p=k(4650),Y=k(259),O=k(5861),ee=k(9681),J=k(2090),oe=k(4859),ie=k(1877),ce=k(8766);const le="@firebase/installations",B="0.6.4",q=`w:${B}`,je="FIS_v2",Je=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function De({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ye(D){return{token:D.token,requestStatus:2,expiresIn:Ye(D.expiresIn),creationTime:Date.now()}}function we(D,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return Je.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ue({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const M=Ue(D);return M.append("Authorization",function ct(D){return`${je} ${D}`}(C)),M}function fe(D){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function Ye(D){return Number(D.replace("s","000"))}function qe(D,C){return ne.apply(this,arguments)}function ne(){return(ne=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:M}){const F=De(D),W=Ue(D),X=C.getImmediate({optional:!0});if(X){const ot=yield X.getHeartbeatsHeader();ot&&W.append("x-firebase-client",ot)}const We={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:je,appId:D.appId,sdkVersion:q})},st=yield fe(()=>fetch(F,We));if(st.ok){const ot=yield st.json();return{fid:ot.fid||M,registrationStatus:2,refreshToken:ot.refreshToken,authToken:ye(ot.authToken)}}throw yield we("Create Installation",st)})).apply(this,arguments)}function he(D){return new Promise(C=>{setTimeout(C,D)})}const Me=/^[cdef][\w-]{21}$/;function Ee(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function it(D){return function ve(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Me.test(M)?M:""}catch{return""}}function Ot(D){return`${D.appName}!${D.appId}`}const Jt=new Map;function Ke(D,C){const M=Ot(D);bt(M,C),function dr(D,C){const M=function _n(){return!mn&&"BroadcastChannel"in self&&(mn=new BroadcastChannel("[Firebase] FID Change"),mn.onmessage=D=>{bt(D.data.key,D.data.fid)}),mn}();M&&M.postMessage({key:D,fid:C}),function Sn(){0===Jt.size&&mn&&(mn.close(),mn=null)}()}(M,C)}function bt(D,C){const M=Jt.get(D);if(M)for(const F of M)F(C)}let mn=null;const zr="firebase-installations-store";let vi=null;function Eo(){return vi||(vi=(0,ce.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(zr)}})),vi}function Ze(D,C){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,O.Z)(function*(D,C){const M=Ot(D),W=(yield Eo()).transaction(zr,"readwrite"),X=W.objectStore(zr),Ae=yield X.get(M);return yield X.put(C,M),yield W.done,(!Ae||Ae.fid!==C.fid)&&Ke(D,C.fid),C})).apply(this,arguments)}function Ri(D){return ir.apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*(D){const C=Ot(D),F=(yield Eo()).transaction(zr,"readwrite");yield F.objectStore(zr).delete(C),yield F.done})).apply(this,arguments)}function ii(D,C){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(D,C){const M=Ot(D),W=(yield Eo()).transaction(zr,"readwrite"),X=W.objectStore(zr),Ae=yield X.get(M),We=C(Ae);return void 0===We?yield X.delete(M):yield X.put(We,M),yield W.done,We&&(!Ae||Ae.fid!==We.fid)&&Ke(D,We.fid),We})).apply(this,arguments)}function Mn(D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(D){let C;const M=yield ii(D.appConfig,F=>{const W=pn(F),X=vt(D,W);return C=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}})).apply(this,arguments)}function pn(D){return xt(D||{fid:Ee(),registrationStatus:0})}function vt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Je.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function dt(D,C){return ln.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:$n(D)}:{installationEntry:C}}function ln(){return(ln=(0,O.Z)(function*(D,C){try{const M=yield qe(D,C);return Ze(D.appConfig,M)}catch(M){throw lt(M)&&409===M.customData.serverCode?yield Ri(D.appConfig):yield Ze(D.appConfig,{fid:C.fid,registrationStatus:0}),M}})).apply(this,arguments)}function $n(D){return hr.apply(this,arguments)}function hr(){return(hr=(0,O.Z)(function*(D){let C=yield fr(D.appConfig);for(;1===C.registrationStatus;)yield he(100),C=yield fr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Mn(D);return F||M}return C})).apply(this,arguments)}function fr(D){return ii(D,C=>{if(!C)throw Je.create("installation-not-found");return xt(C)})}function xt(D){return function _s(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function en(D,C){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},M){const F=tn(D,M),W=U(D,M),X=C.getImmediate({optional:!0});if(X){const ot=yield X.getHeartbeatsHeader();ot&&W.append("x-firebase-client",ot)}const We={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:q,appId:D.appId}})},st=yield fe(()=>fetch(F,We));if(st.ok)return ye(yield st.json());throw yield we("Generate Auth Token",st)})).apply(this,arguments)}function tn(D,{fid:C}){return`${De(D)}/${C}/authTokens:generate`}function sr(D){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(D,C=!1){let M;const F=yield ii(D.appConfig,X=>{if(!Ut(X))throw Je.create("not-registered");const Ae=X.authToken;if(!C&&br(Ae))return X;if(1===Ae.requestStatus)return M=nt(D,C),X;{if(!navigator.onLine)throw Je.create("app-offline");const We=L(X);return M=At(D,We),We}});return M?yield M:F.authToken})).apply(this,arguments)}function nt(D,C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(D,C){let M=yield tt(D.appConfig);for(;1===M.authToken.requestStatus;)yield he(100),M=yield tt(D.appConfig);const F=M.authToken;return 0===F.requestStatus?sr(D,C):F})).apply(this,arguments)}function tt(D){return ii(D,C=>{if(!Ut(C))throw Je.create("not-registered");return function z(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function At(D,C){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(D,C){try{const M=yield en(D,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield Ze(D.appConfig,F),M}catch(M){if(!lt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ze(D.appConfig,F)}else yield Ri(D.appConfig);throw M}})).apply(this,arguments)}function Ut(D){return void 0!==D&&2===D.registrationStatus}function br(D){return 2===D.requestStatus&&!function V(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function L(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Q(){return(Q=(0,O.Z)(function*(D){const C=D,{installationEntry:M,registrationPromise:F}=yield Mn(C);return F?F.catch(console.error):sr(C).catch(console.error),M.fid})).apply(this,arguments)}function Ct(){return(Ct=(0,O.Z)(function*(D,C=!1){const M=D;return yield Gt(M),(yield sr(M,C)).token})).apply(this,arguments)}function Gt(D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(D){const{registrationPromise:C}=yield Mn(D);C&&(yield C)})).apply(this,arguments)}function ws(D){return Je.create("missing-app-config-values",{valueName:D})}const Io="installations",wn=D=>{const C=D.getProvider("app").getImmediate(),M=function yn(D){if(!D||!D.options)throw ws("App Configuration");if(!D.name)throw ws("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!D.options[M])throw ws(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,ee._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},zs=D=>{const C=D.getProvider("app").getImmediate(),M=(0,ee._getProvider)(C,Io).getImmediate();return{getId:()=>function re(D){return Q.apply(this,arguments)}(M),getToken:W=>function He(D){return Ct.apply(this,arguments)}(M,W)}};(function Za(){(0,ee._registerComponent)(new oe.wA(Io,wn,"PUBLIC")),(0,ee._registerComponent)(new oe.wA("installations-internal",zs,"PRIVATE"))})(),(0,ee.registerVersion)(le,B),(0,ee.registerVersion)(le,B,"esm2017");const Pi="@firebase/remote-config",Gn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Th{constructor(C,M,F,W){this.client=C,this.storage=M,this.storageCache=F,this.logger=W}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,W=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return W;C.eTag=W&&W.eTag;const X=yield M.client.fetch(C),Ae=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Ae.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Ae),X})()}}function il(D=navigator){return D.languages&&D.languages[0]||D.language}class sl{constructor(C,M,F,W,X,Ae){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=W,this.apiKey=X,this.appId=Ae}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},st={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:M.appId,language_code:il()},ot={method:"POST",headers:We,body:JSON.stringify(st)},jt=fetch(Ae,ot),wt=new Promise((vr,ci)=>{C.signal.addEventListener(()=>{const Ea=new Error("The operation was aborted.");Ea.name="AbortError",ci(Ea)})});let tr;try{yield Promise.race([jt,wt]),tr=yield jt}catch(vr){let ci="fetch-client-network";throw"AbortError"===vr?.name&&(ci="fetch-timeout"),Gn.create(ci,{originalErrorMessage:vr?.message})}let hn=tr.status;const io=tr.headers.get("ETag")||void 0;let qn,Qr;if(200===tr.status){let vr;try{vr=yield tr.json()}catch(ci){throw Gn.create("fetch-client-parse",{originalErrorMessage:ci?.message})}qn=vr.entries,Qr=vr.state}if("INSTANCE_STATE_UNSPECIFIED"===Qr?hn=500:"NO_CHANGE"===Qr?hn=304:("NO_TEMPLATE"===Qr||"EMPTY_CONFIG"===Qr)&&(qn={}),304!==hn&&200!==hn)throw Gn.create("fetch-status",{httpStatus:hn});return{status:hn,eTag:io,config:qn}})()}}class $p{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function er(D,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),X=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(X),F(Gn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const X=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function Sc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(X))throw X;const Ae={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Ae),W.attemptFetch(C,Ae)}})()}}class Mc{constructor(C,M,F,W,X){this.app=C,this._client=M,this._storageCache=F,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ol(D,C){const M=D.target.error||void 0;return Gn.create(C,{originalErrorMessage:M&&M?.message})}const bs="app_namespace_store";class qp{constructor(C,M,F,W=function zp(){return new Promise((D,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{C(ol(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(bs,{keyPath:"compositeKey"})}}catch(M){C(Gn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,X)=>{const We=F.transaction([bs],"readonly").objectStore(bs),st=M.createCompositeKey(C);try{const ot=We.get(st);ot.onerror=jt=>{X(ol(jt,"storage-get"))},ot.onsuccess=jt=>{const wt=jt.target.result;W(wt?wt.value:void 0)}}catch(ot){X(Gn.create("storage-get",{originalErrorMessage:ot?.message}))}})})()}set(C,M){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((X,Ae)=>{const st=W.transaction([bs],"readwrite").objectStore(bs),ot=F.createCompositeKey(C);try{const jt=st.put({compositeKey:ot,value:M});jt.onerror=wt=>{Ae(ol(wt,"storage-set"))},jt.onsuccess=()=>{X()}}catch(jt){Ae(Gn.create("storage-set",{originalErrorMessage:jt?.message}))}})})()}delete(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,X)=>{const We=F.transaction([bs],"readwrite").objectStore(bs),st=M.createCompositeKey(C);try{const ot=We.delete(st);ot.onerror=jt=>{X(ol(jt,"storage-delete"))},ot.onsuccess=()=>{W()}}catch(ot){X(Gn.create("storage-delete",{originalErrorMessage:ot?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Rc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),X=yield M;X&&(C.lastFetchStatus=X);const Ae=yield F;Ae&&(C.lastSuccessfulFetchTimestampMillis=Ae);const We=yield W;We&&(C.activeConfig=We)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Xa(){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch{return!1}})).apply(this,arguments)}!function Cs(){(0,ee._registerComponent)(new oe.wA("remote-config",function D(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Gn.create("registration-window");if(!(0,J.hl)())throw Gn.create("indexed-db-unavailable");const{projectId:X,apiKey:Ae,appId:We}=F.options;if(!X)throw Gn.create("registration-project-id");if(!Ae)throw Gn.create("registration-api-key");if(!We)throw Gn.create("registration-app-id");const st=new qp(We,F.name,M=M||"firebase"),ot=new Rc(st),jt=new ie.Yd(Pi);jt.logLevel=ie.in.ERROR;const wt=new sl(W,ee.SDK_VERSION,M,X,Ae,We),tr=new $p(wt,st),hn=new Th(tr,st,ot,jt),io=new Mc(F,hn,ot,st,jt);return function zn(D){const C=(0,J.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(io),io},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(Pi,"0.4.4"),(0,ee.registerVersion)(Pi,"0.4.4","esm2017")}();const ki="/firebase-messaging-sw.js",Qi="/firebase-cloud-messaging-push-scope",Xi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ra="google.c.a.c_id",Ja="google.c.a.c_l",al="google.c.a.ts",Sh="google.c.a.e";var Ji=(()=>{return(D=Ji||(Ji={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ji;var D})();function si(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qr(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),W=new Uint8Array(F.length);for(let X=0;X<F.length;++X)W[X]=F.charCodeAt(X);return W}const bo="fcm_token_details_db",mr="fcm_token_object_Store";function Mh(D){return xh.apply(this,arguments)}function xh(){return xh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(bo))return null;let C=null;return(yield(0,ce.X3)(bo,5,{upgrade:(F=(0,O.Z)(function*(W,X,Ae,We){var st;if(X<2||!W.objectStoreNames.contains(mr))return;const ot=We.objectStore(mr),jt=yield ot.index("fcmSenderId").get(D);if(yield ot.clear(),jt)if(2===X){const wt=jt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;C={token:wt.fcmToken,createTime:null!==(st=wt.createTime)&&void 0!==st?st:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:si(wt.vapidKey)}}}else if(3===X){const wt=jt;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:si(wt.auth),p256dh:si(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:si(wt.vapidKey)}}}else if(4===X){const wt=jt;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:si(wt.auth),p256dh:si(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:si(wt.vapidKey)}}}}),function(X,Ae,We,st){return F.apply(this,arguments)})})).close(),yield(0,ce.Lj)(bo),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),xn(C)?C:null;var F}),xh.apply(this,arguments)}function xn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const oi="firebase-messaging-store";let Tr=null;function tu(){return Tr||(Tr=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(oi)}})),Tr}function Co(D){return es.apply(this,arguments)}function es(){return(es=(0,O.Z)(function*(D){const C=wi(D),F=yield(yield tu()).transaction(oi).objectStore(oi).get(C);if(F)return F;{const W=yield Mh(D.appConfig.senderId);if(W)return yield kn(D,W),W}})).apply(this,arguments)}function kn(D,C){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(D,C){const M=wi(D),W=(yield tu()).transaction(oi,"readwrite");return yield W.objectStore(oi).put(C,M),yield W.done,C})).apply(this,arguments)}function sa(D){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(D){const C=wi(D),F=(yield tu()).transaction(oi,"readwrite");yield F.objectStore(oi).delete(C),yield F.done})).apply(this,arguments)}function wi({appConfig:D}){return D.appId}const An=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Dt(D,C){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(D,C){const M=yield cl(D),F=be(C),W={method:"POST",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(To(D.appConfig),W)).json()}catch(Ae){throw An.create("token-subscribe-failed",{errorInfo:Ae?.toString()})}if(X.error)throw An.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw An.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function kc(D,C){return ul.apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(D,C){const M=yield cl(D),F=be(C.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${To(D.appConfig)}/${C.token}`,W)).json()}catch(Ae){throw An.create("token-update-failed",{errorInfo:Ae?.toString()})}if(X.error)throw An.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw An.create("token-update-no-token");return X.token})).apply(this,arguments)}function ru(D,C){return ll.apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield cl(D)};try{const X=yield(yield fetch(`${To(D.appConfig)}/${C}`,F)).json();if(X.error)throw An.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw An.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function To({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function cl(D){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*({appConfig:D,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function be({p256dh:D,auth:C,endpoint:M,vapidKey:F}){const W={web:{endpoint:M,auth:C,p256dh:D}};return F!==Xi&&(W.web.applicationPubKey=F),W}const zt=6048e5;function su(D){return dl.apply(this,arguments)}function dl(){return(dl=(0,O.Z)(function*(D){const C=yield Fc(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:si(C.getKey("auth")),p256dh:si(C.getKey("p256dh"))},F=yield Co(D.firebaseDependencies);if(F){if(Nh(F.subscriptionOptions,M))return Date.now()>=F.createTime+zt?Zs(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield ru(D.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Ao(D.firebaseDependencies,M)}return Ao(D.firebaseDependencies,M)})).apply(this,arguments)}function Rn(D){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(D){const C=yield Co(D.firebaseDependencies);C&&(yield ru(D.firebaseDependencies,C.token),yield sa(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Zs(D,C){return ai.apply(this,arguments)}function ai(){return(ai=(0,O.Z)(function*(D,C){try{const M=yield kc(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield kn(D.firebaseDependencies,F),M}catch(M){throw yield Rn(D),M}})).apply(this,arguments)}function Ao(D,C){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,C){const F={token:yield Dt(D,C),createTime:Date.now(),subscriptionOptions:C};return yield kn(D,F),F.token})).apply(this,arguments)}function Fc(D,C){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qr(C)})})).apply(this,arguments)}function Nh(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Lc(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function yr(D,C){if(!C.notification)return;D.notification={};const M=C.notification.title;M&&(D.notification.title=M);const F=C.notification.body;F&&(D.notification.body=F);const W=C.notification.image;W&&(D.notification.image=W);const X=C.notification.icon;X&&(D.notification.icon=X)}(C,D),function Ts(D,C){!C.data||(D.data=C.data)}(C,D),function Oh(D,C){var M,F,W,X,Ae;if(!(C.fcmOptions||null!==(M=C.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const We=null!==(W=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==W?W:null===(X=C.notification)||void 0===X?void 0:X.click_action;We&&(D.fcmOptions.link=We);const st=null===(Ae=C.fcmOptions)||void 0===Ae?void 0:Ae.analytics_label;st&&(D.fcmOptions.analyticsLabel=st)}(C,D),C}function Ys(D){return"object"==typeof D&&!!D&&ra in D}function Fi(D,C){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function la(D){return An.create("missing-app-config-values",{valueName:D})}Fi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Kp{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Wp(D){if(!D||!D.options)throw la("App Configuration Object");if(!D.name)throw la("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of C)if(!M[F])throw la(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ca(D){return da.apply(this,arguments)}function da(){return(da=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(ki,{scope:Qi}),D.swRegistration.update().catch(()=>{})}catch(C){throw An.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function ha(D,C){return So.apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield ca(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function ts(D,C){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Xi)})).apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(D,C){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield ts(D,C?.vapidKey),yield ha(D,C?.serviceWorkerRegistration),su(D)})).apply(this,arguments)}function fa(D,C,M){return hl.apply(this,arguments)}function hl(){return(hl=(0,O.Z)(function*(D,C,M){const F=fl(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[ra],message_name:M[Ja],message_time:M[al],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fl(D){switch(D){case Ji.NOTIFICATION_CLICKED:return"notification_open";case Ji.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xo(){return(xo=(0,O.Z)(function*(D,C){const M=C.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Ji.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Lc(M)):D.onMessageHandler.next(Lc(M)));const F=M.data;Ys(F)&&"1"===F[Sh]&&(yield fa(D,M.messageType,F))})).apply(this,arguments)}const Bc="@firebase/messaging",Lr=D=>{const C=new Kp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Uc(D,C){return xo.apply(this,arguments)}(C,M)),C},ui=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function au(D,C){return Mo.apply(this,arguments)}(C,F)}};function Ph(){return jc.apply(this,arguments)}function jc(){return(jc=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch{return!1}return typeof window<"u"&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function In(){(0,ee._registerComponent)(new oe.wA("messaging",Lr,"PUBLIC")),(0,ee._registerComponent)(new oe.wA("messaging-internal",ui,"PRIVATE")),(0,ee.registerVersion)(Bc,"0.12.4"),(0,ee.registerVersion)(Bc,"0.12.4","esm2017")}();const gl="analytics",Ay="firebase_id",Po="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ml="https://www.googletagmanager.com/gtag/js",Fn=new ie.Yd("@firebase/analytics");function yl(D){return Promise.all(D.map(C=>C.catch(M=>M)))}function Xp(D,C){const M=document.createElement("script");M.src=`${ml}?l=${D}&id=${C}`,M.async=!0,document.head.appendChild(M)}function uu(D,C,M,F,W,X){return As.apply(this,arguments)}function As(){return(As=(0,O.Z)(function*(D,C,M,F,W,X){const Ae=F[W];try{if(Ae)yield C[Ae];else{const st=(yield yl(M)).find(ot=>ot.measurementId===W);st&&(yield C[st.appId])}}catch(We){Fn.error(We)}D("config",W,X)})).apply(this,arguments)}function lu(D,C,M,F,W){return Li.apply(this,arguments)}function Li(){return(Li=(0,O.Z)(function*(D,C,M,F,W){try{let X=[];if(W&&W.send_to){let Ae=W.send_to;Array.isArray(Ae)||(Ae=[Ae]);const We=yield yl(M);for(const st of Ae){const ot=We.find(wt=>wt.measurementId===st),jt=ot&&C[ot.appId];if(!jt){X=[];break}X.push(jt)}}0===X.length&&(X=Object.values(C)),yield Promise.all(X),D("event",F,W||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function zc(D){const C=window.document.getElementsByTagName("script");for(const M of Object.values(C))if(M.src&&M.src.includes(ml)&&M.src.includes(D))return M;return null}const ar=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ko=new class Wr{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Fh(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Vi(D){return ga.apply(this,arguments)}function ga(){return(ga=(0,O.Z)(function*(D){var C;const{appId:M,apiKey:F}=D,W={method:"GET",headers:Fh(F)},X=Po.replace("{app-id}",M),Ae=yield fetch(X,W);if(200!==Ae.status&&304!==Ae.status){let We="";try{const st=yield Ae.json();null!==(C=st.error)&&void 0!==C&&C.message&&(We=st.error.message)}catch{}throw ar.create("config-fetch-failed",{httpStatus:Ae.status,responseMessage:We})}return Ae.json()})).apply(this,arguments)}function Nn(D){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,O.Z)(function*(D,C=ko,M){const{appId:F,apiKey:W,measurementId:X}=D.options;if(!F)throw ar.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:F};throw ar.create("no-api-key")}const Ae=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new du;return setTimeout((0,O.Z)(function*(){We.abort()}),void 0!==M?M:6e4),ma({appId:F,apiKey:W,measurementId:X},Ae,We,C)})).apply(this,arguments)}function ma(D,C,M){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:M},F,W=ko){var X;const{appId:Ae,measurementId:We}=D;try{yield ya(F,C)}catch(st){if(We)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:Ae,measurementId:We};throw st}try{const st=yield Vi(D);return W.deleteThrottleMetadata(Ae),st}catch(st){const ot=st;if(!_l(ot)){if(W.deleteThrottleMetadata(Ae),We)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:Ae,measurementId:We};throw st}const jt=503===Number(null===(X=ot?.customData)||void 0===X?void 0:X.httpStatus)?(0,J.$s)(M,W.intervalMillis,30):(0,J.$s)(M,W.intervalMillis),wt={throttleEndTimeMillis:Date.now()+jt,backoffCount:M+1};return W.setThrottleMetadata(Ae,wt),Fn.debug(`Calling attemptFetch again in ${jt} millis`),ma(D,wt,F,W)}})).apply(this,arguments)}function ya(D,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),X=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(X),F(ar.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function _l(D){if(!(D instanceof J.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class du{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Qs,Fo;function xs(){return(xs=(0,O.Z)(function*(D,C,M,F,W){if(W&&W.global)D("event",M,F);else{const X=yield C;D("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function rs(D){Fo=D}function Kc(D){Qs=D}function Zc(){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(){if(!(0,J.hl)())return Fn.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return Fn.warn(ar.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Il(){return(Il=(0,O.Z)(function*(D,C,M,F,W,X,Ae){var We;const st=Nn(D);st.then(hn=>{M[hn.measurementId]=hn.appId,D.options.measurementId&&hn.measurementId!==D.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hn=>Fn.error(hn)),C.push(st);const ot=Zc().then(hn=>{if(hn)return F.getId()}),[jt,wt]=yield Promise.all([st,ot]);zc(X)||Xp(X,jt.measurementId),Fo&&(W("consent","default",Fo),rs(void 0)),W("js",new Date);const tr=null!==(We=Ae?.config)&&void 0!==We?We:{};return tr.origin="firebase",tr.update=!0,null!=wt&&(tr[Ay]=wt),W("config",jt.measurementId,tr),Qs&&(W("set",Qs),Kc(void 0)),jt.measurementId})).apply(this,arguments)}class Yc{constructor(C){this.app=C}_delete(){return delete Ar[this.app.options.appId],Promise.resolve()}}let Ar={},Ns=[];const eo={};let Os,Ps,Lo="dataLayer",to=!1;function Jp(D,C,M){!function Lh(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,W)=>`(${W+1}) ${F}`).join(" "),M=ar.create("invalid-analytics-context",{errorInfo:C});Fn.warn(M.message)}}();const F=D.options.appId;if(!F)throw ar.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ar.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ar[F])throw ar.create("already-exists",{id:F});if(!to){!function kh(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Lo);const{wrappedGtag:X,gtagCore:Ae}=function pa(D,C,M,F,W){let X=function(...Ae){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function vl(D,C,M,F){function X(){return(X=(0,O.Z)(function*(Ae,We,st){try{"event"===Ae?yield lu(D,C,M,We,st):"config"===Ae?yield uu(D,C,M,F,We,st):"consent"===Ae?D("consent","update",st):D("set",We)}catch(ot){Fn.error(ot)}})).apply(this,arguments)}return function W(Ae,We,st){return X.apply(this,arguments)}}(X,D,C,M),{gtagCore:X,wrappedGtag:window[W]}}(Ar,Ns,eo,Lo,"gtag");Ps=X,Os=Ae,to=!0}return Ar[F]=function Rs(D,C,M,F,W,X,Ae){return Il.apply(this,arguments)}(D,Ns,eo,C,Os,Lo,M),new Yc(D)}function Sy(){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch{return!1}})).apply(this,arguments)}const Vh="@firebase/analytics";!function Sr(){(0,ee._registerComponent)(new oe.wA(gl,(C,{options:M})=>Jp(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ee._registerComponent)(new oe.wA("analytics-internal",function D(C){try{const M=C.getProvider(gl).getImmediate();return{logEvent:(F,W,X)=>function mu(D,C,M,F){D=(0,J.m9)(D),function hu(D,C,M,F,W){return xs.apply(this,arguments)}(Ps,Ar[D.app.options.appId],C,M,F).catch(W=>Fn.error(W))}(M,F,W,X)}}catch(M){throw ar.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ee.registerVersion)(Vh,"0.9.4"),(0,ee.registerVersion)(Vh,"0.9.4","esm2017")}();var li=k(4408),_a=k(7565);const vu=new class no extends _a.v{}(class Uh extends li.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):(C.flush(this),0)}});var Xc=k(4986),Dl=k(8505),wa=k(9468),bl=k(5363);const Zr=new p.GfV("7.5.0"),_u="__angularfire_symbol__analyticsIsSupportedValue",ro="__angularfire_symbol__analyticsIsSupported",Cl="__angularfire_symbol__remoteConfigIsSupportedValue",wu="__angularfire_symbol__remoteConfigIsSupported",Jc="__angularfire_symbol__messagingIsSupportedValue",ed="__angularfire_symbol__messagingIsSupported";function Mr(D,C,M){if(C){if(1===C.length)return C[0];const X=C.filter(Ae=>Ae.app===M);if(1===X.length)return X[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[ro]||(globalThis[ro]=Sy().then(D=>globalThis[_u]=D).catch(()=>globalThis[_u]=!1)),globalThis[ed]||(globalThis[ed]=Ph().then(D=>globalThis[Jc]=D).catch(()=>globalThis[Jc]=!1)),globalThis[wu]||(globalThis[wu]=Xa().then(D=>globalThis[Cl]=D).catch(()=>globalThis[Cl]=!1));const nn=(D,C)=>{const M=C?[C]:(0,Y.C6)(),F=[];return M.forEach(W=>{W.container.getProvider(D).instances.forEach(Ae=>{F.includes(Ae)||F.push(Ae)})}),F};function Yr(){}class Bi{constructor(C,M=vu){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const W=this.zone;return this.delegate.schedule(function(Ae){W.runGuarded(()=>{C.apply(this,[Ae])})},M,F)}}class Tl{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yr,{},Yr,Yr)),M.pipe((0,Dl.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Iu=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Bi(Zone.current)),this.insideAngular=M.run(()=>new Bi(Zone.current,Xc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function is(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Dn(D){return is(),function St(D){return function(M){return(M=M.lift(new Tl(D.ngZone))).pipe((0,wa.R)(D.outsideAngular),(0,bl.Q)(D.insideAngular))}}(is())(D)}},2090:(ht,Ce,k)=>{k.d(Ce,{$s:()=>At,BH:()=>we,G6:()=>Me,L:()=>le,LL:()=>Ke,Pz:()=>ye,Sg:()=>Ve,UG:()=>fe,US:()=>oe,ZB:()=>q,ZR:()=>Jt,aH:()=>De,b$:()=>ct,eu:()=>Ee,hl:()=>Re,jU:()=>Fe,m9:()=>br,ne:()=>pn,pd:()=>Mn,r3:()=>zr,ru:()=>Ye,tV:()=>B,uI:()=>U,vZ:()=>Dr,w1:()=>ne,xO:()=>ii,xb:()=>Eo,z$:()=>Ue,zI:()=>it,zd:()=>Ni});const ee=function(V){const L=[];let z=0;for(let re=0;re<V.length;re++){let Q=V.charCodeAt(re);Q<128?L[z++]=Q:Q<2048?(L[z++]=Q>>6|192,L[z++]=63&Q|128):55296==(64512&Q)&&re+1<V.length&&56320==(64512&V.charCodeAt(re+1))?(Q=65536+((1023&Q)<<10)+(1023&V.charCodeAt(++re)),L[z++]=Q>>18|240,L[z++]=Q>>12&63|128,L[z++]=Q>>6&63|128,L[z++]=63&Q|128):(L[z++]=Q>>12|224,L[z++]=Q>>6&63|128,L[z++]=63&Q|128)}return L},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,L){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let Q=0;Q<V.length;Q+=3){const He=V[Q],Ct=Q+1<V.length,Gt=Ct?V[Q+1]:0,Qt=Q+2<V.length,Pe=Qt?V[Q+2]:0;let Tn=(15&Gt)<<2|Pe>>6,pr=63&Pe;Qt||(pr=64,Ct||(Tn=64)),re.push(z[He>>2],z[(3&He)<<4|Gt>>4],z[Tn],z[pr])}return re.join("")},encodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(V):this.encodeByteArray(ee(V),L)},decodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(V):function(V){const L=[];let z=0,re=0;for(;z<V.length;){const Q=V[z++];if(Q<128)L[re++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const He=V[z++];L[re++]=String.fromCharCode((31&Q)<<6|63&He)}else if(Q>239&&Q<365){const Qt=((7&Q)<<18|(63&V[z++])<<12|(63&V[z++])<<6|63&V[z++])-65536;L[re++]=String.fromCharCode(55296+(Qt>>10)),L[re++]=String.fromCharCode(56320+(1023&Qt))}else{const He=V[z++],Ct=V[z++];L[re++]=String.fromCharCode((15&Q)<<12|(63&He)<<6|63&Ct)}}return L.join("")}(this.decodeStringToByteArray(V,L))},decodeStringToByteArray(V,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let Q=0;Q<V.length;){const He=z[V.charAt(Q++)],Gt=Q<V.length?z[V.charAt(Q)]:0;++Q;const Pe=Q<V.length?z[V.charAt(Q)]:64;++Q;const ut=Q<V.length?z[V.charAt(Q)]:64;if(++Q,null==He||null==Gt||null==Pe||null==ut)throw new ie;re.push(He<<2|Gt>>4),64!==Pe&&(re.push(Gt<<4&240|Pe>>2),64!==ut&&re.push(Pe<<6&192|ut))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const le=function(V){return function(V){const L=ee(V);return oe.encodeByteArray(L,!0)}(V).replace(/\./g,"")},B=function(V){try{return oe.decodeString(V,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(V,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!je(z)||(V[z]=q(V[z],L[z]));return V}function je(V){return"__proto__"!==V}const ae=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=V&&B(V[1]);return L&&JSON.parse(L)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},De=()=>{var V;return null===(V=ae())||void 0===V?void 0:V.config},ye=V=>{var L;return null===(L=ae())||void 0===L?void 0:L[`_${V}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,re)=>{z?this.reject(z):this.resolve(re),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,re))}}}function Ve(V,L){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=L||"demo-project",Q=V.iat||0,He=V.sub||V.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:Q,exp:Q+3600,auth_time:Q,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},V);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Ct)),""].join(".")}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function U(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function fe(){var V;const L=null===(V=ae())||void 0===V?void 0:V.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Fe(){return"object"==typeof self&&self.self===self}function Ye(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ne(){const V=Ue();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Me(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function Ee(){return new Promise((V,L)=>{try{let z=!0;const re="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(re);Q.onsuccess=()=>{Q.result.close(),z||self.indexedDB.deleteDatabase(re),V(!0)},Q.onupgradeneeded=()=>{z=!1},Q.onerror=()=>{var He;L((null===(He=Q.error)||void 0===He?void 0:He.message)||"")}}catch(z){L(z)}})}function it(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Jt extends Error{constructor(L,z,re){super(z),this.code=L,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,Jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(L,z,re){this.service=L,this.serviceName=z,this.errors=re}create(L,...z){const re=z[0]||{},Q=`${this.service}/${L}`,He=this.errors[L],Ct=He?function Yt(V,L){return V.replace(pt,(z,re)=>{const Q=L[re];return null!=Q?String(Q):`<${re}?>`})}(He,re):"Error";return new Jt(Q,`${this.serviceName}: ${Ct} (${Q}).`,re)}}const pt=/\{\$([^}]+)}/g;function zr(V,L){return Object.prototype.hasOwnProperty.call(V,L)}function Eo(V){for(const L in V)if(Object.prototype.hasOwnProperty.call(V,L))return!1;return!0}function Dr(V,L){if(V===L)return!0;const z=Object.keys(V),re=Object.keys(L);for(const Q of z){if(!re.includes(Q))return!1;const He=V[Q],Ct=L[Q];if(Ri(He)&&Ri(Ct)){if(!Dr(He,Ct))return!1}else if(He!==Ct)return!1}for(const Q of re)if(!z.includes(Q))return!1;return!0}function Ri(V){return null!==V&&"object"==typeof V}function ii(V){const L=[];for(const[z,re]of Object.entries(V))Array.isArray(re)?re.forEach(Q=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(re));return L.length?"&"+L.join("&"):""}function Ni(V){const L={};return V.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[Q,He]=re.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(He)}}),L}function Mn(V){const L=V.indexOf("?");if(!L)return"";const z=V.indexOf("#",L);return V.substring(L,z>0?z:void 0)}function pn(V,L){const z=new vt(V,L);return z.subscribe.bind(z)}class vt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(re=>{this.error(re)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,re){let Q;if(void 0===L&&void 0===z&&void 0===re)throw new Error("Missing Observer.");Q=function ln(V,L){if("object"!=typeof V||null===V)return!1;for(const z of L)if(z in V&&"function"==typeof V[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:re},void 0===Q.next&&(Q.next=$n),void 0===Q.error&&(Q.error=$n),void 0===Q.complete&&(Q.complete=$n);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),He}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $n(){}function At(V,L=1e3,z=2){const re=L*Math.pow(z,V),Q=Math.round(.5*re*(Math.random()-.5)*2);return Math.min(144e5,re+Q)}function br(V){return V&&V._delegate?V._delegate:V}},5103:(ht,Ce,k)=>{var p=k(4650);let Y=null;function O(){return Y}const ie=new p.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function le(){return(0,p.LFG)($)}()},providedIn:"platform"}),n})();const B=new p.OlP("Location Initialized");let $=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function je(){return new $((0,p.LFG)(ie))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function _e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Je)},providedIn:"root"}),n})();const ae=new p.OlP("appBaseHref");let Je=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+et(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+et(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce),p.LFG(ae,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce),p.LFG(ae,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=_e(Ve(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=et,n.joinWithSlash=Te,n.stripTrailingSlash=_e,n.\u0275fac=function(t){return new(t||n)(p.LFG(ge))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ye(){return new De((0,p.LFG)(ge))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}let zn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new nl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){or("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){or("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class nl{constructor(){this.$implicit=null,this.ngIf=null}}function or(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let ia=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function mr(n){return"server"===n}let eu=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Rh((0,p.LFG)(ie),window)}),n})();class Rh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Tr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=oi(this.window.history)||oi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function oi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class uu extends class kh extends class oe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){Y||(Y=n)}(new uu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function lu(){return As=As||document.querySelector("base"),As?As.getAttribute("href"):null}();return null==t?null:function vl(n){Li=Li||document.createElement("a"),Li.setAttribute("href",n);const e=Li.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){As=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ya(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Li,As=null;const pa=new p.OlP("TRANSITION_ID"),qc=[{provide:p.ip1,useFactory:function zc(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[pa,ie,p.zs3],multi:!0}];let cu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ss=new p.OlP("EventManagerPlugins");let Wr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ss),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class ko{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Fh=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Vi=(()=>{class n extends Fh{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ga),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ga))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function ga(n){O().remove(n)}const Nn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vr=/%COMP%/g;function hu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?hu(n,o,t):(o=o.replace(Vr,n),t.push(o))}return t}function xs(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ui=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Xs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new El(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new fu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=hu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Wr),p.LFG(Vi),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Xs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Nn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ns(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ns(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Nn[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Nn[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xs(r)):this.eventManager.addEventListener(e,t,xs(r))}}function ns(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class El extends Xs{constructor(e,t,r,o){super(e),this.component=r;const u=hu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function du(n){return"_ngcontent-%COMP%".replace(Vr,n)}(o+"-"+r.id),this.hostAttr=function Qs(n){return"_nghost-%COMP%".replace(Vr,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class fu extends Xs{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=hu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fo=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const rs=["alt","control","meta","shift"],Kc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pu=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),rs.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),d+=b+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=Kc[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),rs.forEach(d=>{d!==o&&(0,Zc[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ps=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function eo(){uu.makeCurrent()},multi:!0},{provide:ie,useFactory:function va(){return(0,p.RDi)(document),document},deps:[]}]),to=new p.OlP(""),dn=[{provide:p.rWj,useClass:class ar{addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Lh=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Lo(){return new p.qLn},deps:[]},{provide:Ss,useClass:Fo,multi:!0,deps:[ie,p.R0b,p.Lbi]},{provide:Ss,useClass:pu,multi:!0,deps:[ie]},{provide:Ui,useClass:Ui,deps:[Wr,Vi,p.AFp]},{provide:p.FYo,useExisting:Ui},{provide:Fh,useExisting:Vi},{provide:Vi,useClass:Vi,deps:[ie]},{provide:Wr,useClass:Wr,deps:[Ss,p.R0b]},{provide:class Co{},useClass:cu,deps:[]},[]];let Jp=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:pa,useExisting:p.AFp},qc]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(to,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...Lh,...dn],imports:[ia,p.hGG]}),n})(),ng=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Qc(){return new ng((0,p.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Mr=k(2011),nn=k(8996),Yr=k(9751);const{isArray:Bi}=Array,{getPrototypeOf:Tl,prototype:Iu,keys:is}=Object;function Du(n){if(1===n.length){const e=n[0];if(Bi(e))return{args:e,keys:null};if(function ss(n){return n&&"object"==typeof n&&Tl(n)===Iu}(e)){const t=is(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var bu=k(8421),Ei=k(7669),Dn=k(5403),St=k(4004);const{isArray:Ln}=Array;function D(n){return(0,St.U)(e=>function Bh(n,e){return Ln(e)?n(...e):n(e)}(n,e))}function C(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let F=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),W=(()=>{class n extends F{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const X=new p.OlP("NgValueAccessor"),st={provide:X,useExisting:(0,p.Gpc)(()=>wt),multi:!0},jt=new p.OlP("CompositionEventMode");let wt=(()=>{class n extends F{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ot(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(jt,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([st]),p.qOj]}),n})();const qn=new p.OlP("NgValidators"),Qr=new p.OlP("NgAsyncValidators");function Cu(n){return null!=n}function ag(n){return(0,p.QGY)(n)?(0,nn.D)(n):n}function Gh(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Oy(n,e){return e.map(t=>t(n))}function Py(n){return n.map(e=>function ug(n){return!n.validate}(e)?e:t=>e.validate(t))}function zh(n){return null!=n?function lg(n){if(!n)return null;const e=n.filter(Cu);return 0==e.length?null:function(t){return Gh(Oy(t,e))}}(Py(n)):null}function rd(n){return null!=n?function nd(n){if(!n)return null;const e=n.filter(Cu);return 0==e.length?null:function(t){return function M(...n){const e=(0,Ei.jO)(n),{args:t,keys:r}=Du(n),o=new Yr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,b=d;for(let S=0;S<d;S++){let N=!1;(0,bu.Xf)(t[S]).subscribe((0,Dn.x)(u,j=>{N||(N=!0,b--),m[S]=j},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?C(r,m):m),u.complete())}))}});return e?o.pipe(D(e)):o}(Oy(t,e).map(ag)).pipe((0,St.U)(Gh))}}(Py(n)):null}function ky(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cg(n){return n?Array.isArray(n)?n:[n]:[]}function qh(n,e){return Array.isArray(n)?n.includes(e):n===e}function dg(n,e){const t=cg(e);return cg(n).forEach(o=>{qh(t,o)||t.push(o)}),t}function Ly(n,e){return cg(e).filter(t=>!qh(n,t))}class hg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ur extends hg{get formDirective(){return null}get path(){return null}}class ks extends hg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Al{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ji=(()=>{class n extends Al{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ks,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),sd=(()=>{class n extends Al{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ur,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();const Da="VALID",Ml="INVALID",Su="PENDING",Vo="DISABLED";function Yh(n){return(Mu(n)?n.validators:n)||null}function Qh(n){return Array.isArray(n)?zh(n):n||null}function xl(n,e){return(Mu(e)?e.asyncValidators:n)||null}function mg(n){return Array.isArray(n)?rd(n):n||null}function Mu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Xh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Qh(this._rawValidators),this._composedAsyncValidatorFn=mg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Da}get invalid(){return this.status===Ml}get pending(){return this.status==Su}get disabled(){return this.status===Vo}get enabled(){return this.status!==Vo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Qh(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=mg(e)}addValidators(e){this.setValidators(dg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ly(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ly(e,this._rawAsyncValidators))}hasValidator(e){return qh(this._rawValidators,e)}hasAsyncValidator(e){return qh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Su,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vo,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Da,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Da||this.status===Su)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vo:Da}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Su,this._hasOwnPendingAsyncValidator=!0;const t=ag(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Vo:this.errors?Ml:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Su)?Su:this._anyControlsHaveStatus(Ml)?Ml:Da}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class ud extends Xh{constructor(e,t,r){super(Yh(t),xl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function yg(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new p.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function ad(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Ru(n,e){cd(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function hd(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&vg(n,e)})}(n,e),function Hy(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $y(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&vg(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ef(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $i(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function cd(n,e){const t=function id(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ky(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Fy(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ky(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();$i(e._rawValidators,o),$i(e._rawAsyncValidators,o)}function vg(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const wg={provide:Ur,useExisting:(0,p.Gpc)(()=>Ol)},Bo=(()=>Promise.resolve())();let Ol=(()=>{class n extends Ur{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new ud({},zh(t),rd(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bo.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ru(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bo.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Bo.then(()=>{const r=this._findContainer(t.path),o=new ud({});(function _g(n,e){cd(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bo.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Bo.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function nf(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(qn,10),p.Y36(Qr,10))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([wg]),p.qOj]}),n})();function Ii(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function so(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rf=class extends Xh{constructor(e=null,t,r){super(Yh(t),xl(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=so(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ii(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ii(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){so(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},uf={provide:ks,useExisting:(0,p.Gpc)(()=>oo)},yd=(()=>Promise.resolve())();let oo=(()=>{class n extends ks{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new rf,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Nu(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===wt?t=u:function zy(n){return Object.getPrototypeOf(n.constructor)===W}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Nl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ru(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){yd.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,p.D6c)(r);yd.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Uo(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ur,9),p.Y36(qn,10),p.Y36(Qr,10),p.Y36(X,10),p.Y36(p.sBO,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([uf]),p.qOj,p.TTD]}),n})(),jr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const lf=new p.OlP("NgModelWithFormControlWarning");let hw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jo]}),n})(),JD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[hw]}),n})(),eb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[hw]}),n})();const Ag_firebase={apiKey:"AIzaSyCRQZa0FzVGw7iWSEOMFFsj-7ODQi3u6ic",authDomain:"bankingapp-2b8d1.firebaseapp.com",projectId:"bankingapp-2b8d1",storageBucket:"bankingapp-2b8d1.appspot.com",messagingSenderId:"687129174377",appId:"1:687129174377:web:bc6e24c14359ec8e9b5df8",measurementId:"G-WBECFP6VF8"};function mt(...n){const e=(0,Ei.yG)(n);return(0,nn.D)(n,e)}var Aa=k(7579);class co extends Aa.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Sg=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var mf=k(4671),jS=k(9672);function nb(...n){const e=(0,Ei.yG)(n),t=(0,Ei.jO)(n),{args:r,keys:o}=Du(n);if(0===r.length)return(0,nn.D)([],e);const u=new Yr.y(function yf(n,e,t=mf.y){return r=>{Mg(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Mg(e,()=>{const b=(0,nn.D)(n[w],e);let S=!1;b.subscribe((0,Dn.x)(r,N=>{u[w]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>C(o,d):mf.y));return t?u.pipe(D(t)):u}function Mg(n,e,t){n?(0,jS.f)(t,n,e):e()}var Id=k(8189);function xg(...n){return function gw(){return(0,Id.J)(1)}()((0,nn.D)(n,(0,Ei.yG)(n)))}function mw(n){return new Yr.y(e=>{(0,bu.Xf)(n()).subscribe(e)})}var yw=k(9635),Rg=k(576);function Vl(n,e){const t=(0,Rg.m)(n)?n:()=>n,r=o=>o.error(t());return new Yr.y(e?o=>e.schedule(r,0,o):r)}var Dd=k(515),vw=k(727),Jr=k(4482);function Ng(){return(0,Jr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Dn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tv extends Yr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Jr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vw.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Dn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vw.w0.EMPTY)}return e}refCount(){return Ng()(this)}}function Vn(n,e){return(0,Jr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Dn.x)(r,w=>{o?.unsubscribe();let b=0;const S=u++;(0,bu.Xf)(n(w,S)).subscribe(o=(0,Dn.x)(r,N=>r.next(e?e(w,N,S,b++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function vf(n){return n<=0?()=>Dd.E:(0,Jr.e)((e,t)=>{let r=0;e.subscribe((0,Dn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function bd(...n){const e=(0,Ei.yG)(n);return(0,Jr.e)((t,r)=>{(e?xg(n,t,e):xg(n,t)).subscribe(r)})}function Hi(n,e){return(0,Jr.e)((t,r)=>{let o=0;t.subscribe((0,Dn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Di=k(5577);function Cd(n){return(0,Jr.e)((e,t)=>{let r=!1;e.subscribe((0,Dn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function _f(n=Ul){return(0,Jr.e)((e,t)=>{let r=!1;e.subscribe((0,Dn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Ul(){return new Sg}function $o(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hi((o,u)=>n(o,u,r)):mf.y,vf(1),t?Cd(e):_f(()=>new Sg))}function Sa(n,e){return(0,Rg.m)(e)?(0,Di.z)(n,e,1):(0,Di.z)(n,1)}var di=k(8505);function Ou(n){return(0,Jr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Dn.x)(t,void 0,void 0,d=>{u=(0,bu.Xf)(n(d,Ou(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function _w(n,e,t,r,o){return(u,d)=>{let m=t,w=e,b=0;u.subscribe((0,Dn.x)(d,S=>{const N=b++;w=m?n(w,S,N):(m=!0,S),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Ho(n,e){return(0,Jr.e)(_w(n,e,arguments.length>=2,!0))}function nv(n){return n<=0?()=>Dd.E:(0,Jr.e)((e,t)=>{let r=[];e.subscribe((0,Dn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ww(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hi((o,u)=>n(o,u,r)):mf.y,nv(1),t?Cd(e):_f(()=>new Sg))}function wf(n){return(0,Jr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",Td=Symbol("RouteTitle");class sb{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bl(n){return new sb(n)}function $S(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Gi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Ew(n[o],e[o]))return!1;return!0}function Ew(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function jl(n){return Array.prototype.concat.apply([],n)}function Ad(n){return n.length>0?n[n.length-1]:null}function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ma(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,nn.D)(Promise.resolve(n)):mt(n)}const ub={exact:function Og(n,e,t){if(!Hl(n.segments,e.segments)||!kg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Og(n.children[r],e.children[r],t))return!1;return!0},subset:Pg},iv={exact:function ov(n,e){return Gi(n,e)},subset:function lb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ew(n[t],e[t]))},ignored:()=>!0};function sv(n,e,t){return ub[t.paths](n.root,e.root,t.matrixParams)&&iv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Pg(n,e,t){return Sd(n,e,e.segments,t)}function Sd(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Hl(o,t)||e.hasChildren()||!kg(o,t,r))}if(n.segments.length===t.length){if(!Hl(n.segments,t)||!kg(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Pg(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Hl(n.segments,o)&&kg(n.segments,o,r)&&n.children[qt])&&Sd(n.children[qt],e,u,r)}}function kg(n,e,t){return e.every((r,o)=>iv[t](n[o].parameters,r.parameters))}class $l{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bl(this.queryParams)),this._queryParamMap}toString(){return hb.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fg(this)}}class Ef{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bl(this.parameters)),this._parameterMap}toString(){return Iw(this)}}function Hl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Gl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new ho},providedIn:"root"}),n})();class ho{parse(e){const t=new _b(e);return new $l(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Lg(e.root,!0)}`,r=function pb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${If(t)}=${If(o)}`).join("&"):`${If(t)}=${If(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function GS(n){return encodeURI(n)}(e.fragment)}`:""}`}}const hb=new ho;function Fg(n){return n.segments.map(e=>Iw(e)).join("/")}function Lg(n,e){if(!n.hasChildren())return Fg(n);if(e){const t=n.children[qt]?Lg(n.children[qt],!1):"",r=[];return hi(n.children,(o,u)=>{u!==qt&&r.push(`${u}:${Lg(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function db(n,e){let t=[];return hi(n.children,(r,o)=>{o===qt&&(t=t.concat(e(r,o)))}),hi(n.children,(r,o)=>{o!==qt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===qt?[Lg(n.children[qt],!1)]:[`${o}:${Lg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${Fg(n)}/${t[0]}`:`${Fg(n)}/(${t.join("//")})`}}function fb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function If(n){return fb(n).replace(/%3B/gi,";")}function Vg(n){return fb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function av(n){return decodeURIComponent(n)}function uv(n){return av(n.replace(/\+/g,"%20"))}function Iw(n){return`${Vg(n.path)}${function Dw(n){return Object.keys(n).map(e=>`;${Vg(e)}=${Vg(n[e])}`).join("")}(n.parameters)}`}const gb=/^[^\/()?;=#]+/;function zi(n){const e=n.match(gb);return e?e[0]:""}const mb=/^[^=?&#]+/,yb=/^[^&#]+/;class _b{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new Kt(e,t)),r}parseSegment(){const e=zi(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new Ef(av(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zi(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=zi(this.remaining);o&&(r=o,this.capture(r))}e[av(t)]=av(r)}parseQueryParam(e){const t=function bw(n){const e=n.match(mb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function vb(n){const e=n.match(yb);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=uv(t),u=uv(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zi(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new p.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=qt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[qt]:new Kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function lv(n){return n.segments.length>0?new Kt([],{[qt]:n}):n}function Df(n){const e={};for(const r of Object.keys(n.children)){const u=Df(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function wb(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}function zl(n){return n instanceof $l}function Aw(n,e,t,r,o){if(0===t.length)return ql(e.root,e.root,e.root,r,o);const u=function Mw(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dv(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return hi(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new dv(t,e,r)}(t);return u.toRoot()?ql(e.root,e.root,new Kt([],{}),r,o):function d(w){const b=function xw(n,e,t,r){if(n.isAbsolute)return new Md(e.root,!0,0);if(-1===r)return new Md(t,t===e.root,0);return function hv(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new p.vHH(4005,!1);o=r.segments.length}return new Md(r,!1,o-u)}(t,r+(bf(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=b.processChildren?Kl(b.segmentGroup,b.index,u.commands):fv(b.segmentGroup,b.index,u.commands);return ql(e.root,b.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}function bf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cf(n){return"object"==typeof n&&null!=n&&n.outlets}function ql(n,e,t,r,o){let d,u={};r&&hi(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),d=n===e?t:Sw(n,e,t);const m=lv(Df(d));return new $l(m,u,o)}function Sw(n,e,t){const r={};return hi(n.children,(o,u)=>{r[u]=o===e?t:Sw(o,e,t)}),new Kt(n.segments,r)}class dv{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bf(r[0]))throw new p.vHH(4003,!1);const o=r.find(Cf);if(o&&o!==Ad(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Md{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fv(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return Kl(n,e,t);const r=function pv(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Cf(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ib(w,b,d))return u;r+=2}else{if(!Ib(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[qt]=new Kt(n.segments.slice(r.pathIndex),n.children),Kl(u,0,o)}return r.match&&0===o.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?gv(n,e,t):r.match?Kl(n,0,o):gv(n,e,t)}function Kl(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function Wl(n){return Cf(n[0])?n[0].outlets:{[qt]:n}}(t),o={};return hi(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=fv(n.children[d],e,u))}),hi(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Kt(n.segments,o)}}function gv(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Cf(u)){const w=qS(u.outlets);return new Kt(r,w)}if(0===o&&bf(t[0])){r.push(new Ef(n.segments[e].path,Eb(t[0]))),o++;continue}const d=Cf(u)?u.outlets[qt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&bf(m)?(r.push(new Ef(d,Eb(m))),o+=2):(r.push(new Ef(d,{})),o++)}return new Kt(r,{})}function qS(n){const e={};return hi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=gv(new Kt([],{}),0,t))}),e}function Eb(n){const e={};return hi(n,(t,r)=>e[r]=`${t}`),e}function Ib(n,e,t){return n==t.path&&Gi(e,t.parameters)}class xa{constructor(e,t){this.id=e,this.url=t}}class Ug extends xa{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xd extends xa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bg extends xa{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zl extends xa{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Db extends xa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rw extends xa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jg extends xa{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bb extends xa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nw extends xa{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cb{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tb{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ab{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sb{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ow{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pw{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class mv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Tf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Fw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Fw(e,this._root).map(t=>t.value)}}function Tf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Tf(n,t);if(r)return r}return null}function Fw(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Fw(n,t);if(r.length)return r.unshift(e),r}return[]}class fo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Rd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xb extends mv{constructor(e,t){super(e),this.snapshot=t,Mf(this,e)}toString(){return this.snapshot.toString()}}function Yl(n,e){const t=function Lw(n,e){const d=new Sf([],{},{},"",{},qt,e,null,n.root,-1,{});return new Vw("",new fo(d,[]))}(n,e),r=new co([new Ef("",{})]),o=new co({}),u=new co({}),d=new co({}),m=new co(""),w=new Pu(r,o,d,m,u,qt,e,t.root);return w.snapshot=t.root,new xb(new fo(w,[]),t)}class Pu{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,St.U)(b=>b[Td]))??mt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>Bl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>Bl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Af(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function po(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Sf{constructor(e,t,r,o,u,d,m,w,b,S,N,j){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[Td],this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=S,this._correctedLastPathIndex=j??S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vw extends mv{constructor(e,t){super(t),this.url=e,Mf(this,t)}toString(){return Go(this._root)}}function Mf(n,e){e.value._routerState=n,e.children.forEach(t=>Mf(n,t))}function Go(n){const e=n.children.length>0?` { ${n.children.map(Go).join(", ")} } `:"";return`${n.value}${e}`}function xf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Gi(e.params,t.params)||n.params.next(t.params),function ob(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Gi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function $g(n,e){const t=Gi(n.params,e.params)&&function cb(n,e){return Hl(n,e)&&n.every((t,r)=>Gi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$g(n.parent,e.parent))}function Hg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Uw(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Hg(n,r,o);return Hg(n,r)})}(n,e,t);return new fo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Hg(n,m)),d}}const r=function WS(n){return new Pu(new co(n.url),new co(n.params),new co(n.queryParams),new co(n.fragment),new co(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Hg(n,u));return new fo(r,o)}}const Nd="ngNavigationCancelingError";function Rf(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=zl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Gg(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Gg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Nd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function zg(n){return qg(n)&&zl(n.url)}function qg(n){return n&&n[Nd]}class KS{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Nf,this.attachRef=null}}let Nf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new KS,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wg=!1;let vv=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=o||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Wg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Wg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Wg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,Wg);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new Rb(t,m,o.injector);if(r&&function Bw(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(d);this.activated=o.createComponent(b,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Nf),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Rb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pu?this.route:e===Nf?this.childContexts:this.parent.get(e,t)}}let jw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[vv],encapsulation:2}),n})();function $w(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Hw(n){const e=n.children&&n.children.map(Hw),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=jw),t}function go(n){return n.outlet||qt}function Pb(n,e){const t=n.filter(r=>go(r)===e);return t.push(...n.filter(r=>go(r)!==e)),t}function Kg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class eM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Rd(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),hi(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Rd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Rd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Rd(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Ow(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Sb(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(xf(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),xf(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Kg(o.snapshot),w=m?.get(p._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class kb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class mo{constructor(e,t){this.component=e,this.route=t}}function _v(n,e,t){const r=n._root;return Xl(r,e?e._root:null,t,[r.value])}function Ql(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function Xl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Rd(e);return n.children.forEach(d=>{(function Gw(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function wv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Hl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Hl(n.url,e.url)||!Gi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$g(n,e)||!Gi(n.queryParams,e.queryParams);default:return!$g(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new kb(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Xl(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new mo(m.outlet.component,d))}else d&&Pf(e,m,o),o.canActivateChecks.push(new kb(r)),Xl(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),hi(u,(d,m)=>Pf(d,t.getContext(m),o)),o}function Pf(n,e,t){const r=Rd(n),o=n.value;hi(r,(u,d)=>{Pf(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new mo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Vs(n){return"function"==typeof n}function kf(n){return n instanceof Sg||"EmptyError"===n?.name}const Ra=Symbol("INITIAL_VALUE");function ku(){return Vn(n=>nb(n.map(e=>e.pipe(vf(1),bd(Ra)))).pipe((0,St.U)(e=>{for(const t of e)if(!0!==t){if(t===Ra)return Ra;if(!1===t||t instanceof $l)return t}return!0}),Hi(e=>e!==Ra),vf(1)))}function Yw(n){return(0,yw.z)((0,di.b)(e=>{if(zl(e))throw Rf(0,e)}),(0,St.U)(e=>!0===e))}const Cv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tv(n,e,t,r,o){const u=Yg(n,e,t);return u.matched?function Qw(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?mt(o.map(d=>{const m=Ql(d,n);return Ma(function Bb(n){return n&&Vs(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(ku(),Yw()):mt(!0)}(r=$w(e,r),e,t).pipe((0,St.U)(d=>!0===d?u:{...Cv})):mt(u)}function Yg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Cv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||$S)(t,n,e);if(!o)return{...Cv};const u={};hi(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function Qg(n,e,t,r,o="corrected"){if(t.length>0&&function $b(n,e,t){return t.some(r=>Xg(n,e,r)&&go(r)!==qt)}(n,t,r)){const d=new Kt(e,function Xw(n,e,t,r){const o={};o[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&go(u)!==qt){const d=new Kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[go(u)]=d}return o}(n,e,r,new Kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function nM(n,e,t){return t.some(r=>Xg(n,e,r))}(n,t,r)){const d=new Kt(n.segments,function os(n,e,t,r,o,u){const d={};for(const m of r)if(Xg(n,t,m)&&!o[go(m)]){const w=new Kt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[go(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Xg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Jg(n,e,t,r){return!!(go(n)===r||r!==qt&&Xg(e,t,n))&&("**"===n.path||Yg(e,n,t).matched)}function Av(n,e,t){return 0===e.length&&!n.children[t]}const em=!1;class tm{constructor(e){this.segmentGroup=e||null}}class Jw{constructor(e){this.urlTree=e}}function Pd(n){return Vl(new tm(n))}function eE(n){return Vl(new Jw(n))}class nE{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Qg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,St.U)(u=>this.createUrlTree(Df(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ou(u=>{if(u instanceof Jw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof tm?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,St.U)(o=>this.createUrlTree(Df(o),e.queryParams,e.fragment))).pipe(Ou(o=>{throw o instanceof tm?this.noMatchError(o):o}))}noMatchError(e){return new p.vHH(4002,em)}createUrlTree(e,t,r){const o=lv(e);return new $l(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,nn.D)(o).pipe(Sa(u=>{const d=r.children[u],m=Pb(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,St.U)(w=>({segment:w,outlet:u})))}),Ho((u,d)=>(u[d.outlet]=d.segment,u),{}),ww())}expandSegment(e,t,r,o,u,d){return(0,nn.D)(r).pipe(Sa(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Ou(b=>{if(b instanceof tm)return mt(null);throw b}))),$o(m=>!!m),Ou((m,w)=>{if(kf(m))return Av(t,o,u)?mt(new Kt([],{})):Pd(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Jg(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Pd(t):Pd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eE(u):this.lineralizeSegments(r,u).pipe((0,Di.z)(d=>{const m=new Kt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:S}=Yg(t,o,u);if(!m)return Pd(t);const N=this.applyRedirectCommands(w,o.redirectTo,S);return o.redirectTo.startsWith("/")?eE(N):this.lineralizeSegments(o,N).pipe((0,Di.z)(j=>this.expandSegment(e,t,r,j.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=$w(r,e),r.loadChildren?(r._loadedRoutes?mt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,St.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Kt(o,{})))):mt(new Kt(o,{}))):Tv(t,r,o,e).pipe(Vn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,Di.z)(S=>{const N=S.injector??e,j=S.routes,{segmentGroup:Z,slicedSegments:de}=Qg(t,m,w,j),Ne=new Kt(Z.segments,Z.children);if(0===de.length&&Ne.hasChildren())return this.expandChildren(N,j,Ne).pipe((0,St.U)(Nt=>new Kt(m,Nt)));if(0===j.length&&0===de.length)return mt(new Kt(m,{}));const Le=go(r)===u;return this.expandSegment(N,Ne,j,de,Le?qt:u,!0).pipe((0,St.U)(Zt=>new Kt(m.concat(Zt.segments),Zt.children)))})):Pd(t)))}getChildConfig(e,t,r){return t.children?mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function tM(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?mt(!0):mt(o.map(d=>{const m=Ql(d,n);return Ma(function Lb(n){return n&&Vs(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(ku(),Yw())}(e,t,r).pipe((0,Di.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,di.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Hb(n){return Vl(Gg(em,3))}())):mt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return mt(r);if(o.numberOfChildren>1||!o.children[qt])return Vl(new p.vHH(4e3,em));o=o.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new $l(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return hi(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return hi(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Kt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new p.vHH(4001,em);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class zo{}class qb{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=Qg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,St.U)(t=>{if(null===t)return null;const r=new Sf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new fo(r,t),u=new Vw(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Af(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,nn.D)(Object.keys(r.children)).pipe(Sa(o=>{const u=r.children[o],d=Pb(t,o);return this.processSegmentGroup(e,d,u,o)}),Ho((o,u)=>o&&u?(o.push(...u),o):null),function rb(n,e=!1){return(0,Jr.e)((t,r)=>{let o=0;t.subscribe((0,Dn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),Cd(null),ww(),(0,St.U)(o=>{if(null===o)return null;const u=sE(o);return function rM(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,nn.D)(t).pipe(Sa(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),$o(d=>!!d),Ou(d=>{if(kf(d))return Av(r,o,u)?mt([]):mt(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Jg(t,r,o,u))return mt(null);let d;if("**"===t.path){const m=o.length>0?Ad(o).parameters:{},w=oE(r)+o.length;d=mt({snapshot:new Sf(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ff(t),go(t),t.component??t._loadedComponent??null,t,rm(r),w,im(t),w),consumedSegments:[],remainingSegments:[]})}else d=Tv(r,t,o,e).pipe((0,St.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:S})=>{if(!m)return null;const N=oE(r)+w.length;return{snapshot:new Sf(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ff(t),go(t),t.component??t._loadedComponent??null,t,rm(r),N,im(t),N),consumedSegments:w,remainingSegments:b}}));return d.pipe(Vn(m=>{if(null===m)return mt(null);const{snapshot:w,consumedSegments:b,remainingSegments:S}=m;e=t._injector??e;const N=t._loadedInjector??e,j=function iE(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Z,slicedSegments:de}=Qg(r,b,S,j.filter(Le=>void 0===Le.redirectTo),this.relativeLinkResolution);if(0===de.length&&Z.hasChildren())return this.processChildren(N,j,Z).pipe((0,St.U)(Le=>null===Le?null:[new fo(w,Le)]));if(0===j.length&&0===de.length)return mt([new fo(w,[])]);const Ne=go(t)===u;return this.processSegment(N,j,Z,de,Ne?qt:u).pipe((0,St.U)(Le=>null===Le?null:[new fo(w,Le)]))}))}}function Wb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function sE(n){const e=[],t=new Set;for(const r of n){if(!Wb(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=sE(r.children);e.push(new fo(r.value,o))}return e.filter(r=>!t.has(r))}function rm(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function oE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ff(n){return n.data||{}}function im(n){return n.resolve||{}}function xv(n){return"string"==typeof n.title||null===n.title}function om(n){return Vn(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,St.U)(()=>e)):mt(e)})}let am=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[Td]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(qo)},providedIn:"root"}),n})(),qo=(()=>{class n extends am{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ng))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class um{}class Zb extends class Lf{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Vf=new p.OlP("",{providedIn:"root",factory:()=>({})}),Ov=new p.OlP("ROUTES");let Jl=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ma(t.loadComponent()).pipe((0,di.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),wf(()=>{this.componentLoaders.delete(t)})),o=new tv(r,()=>new Aa.x).pipe(Ng());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return mt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,St.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,S=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=jl(w.get(Ov,[],p.XFs.Self|p.XFs.Optional)));return{routes:b.map(Hw),injector:w}}),wf(()=>{this.childrenLoaders.delete(r)})),d=new tv(u,()=>new Aa.x).pipe(Ng());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Ma(t()).pipe((0,Di.z)(r=>r instanceof p.YKP||Array.isArray(r)?mt(r):(0,nn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yb{}class oM{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function aM(n){throw n}function Qb(n,e,t){return e.parse("/")}const Xb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function cm(){const n=(0,p.f3M)(Gl),e=(0,p.f3M)(Nf),t=(0,p.f3M)(De),r=(0,p.f3M)(p.zs3),o=(0,p.f3M)(p.Sil),u=(0,p.f3M)(Ov,{optional:!0})??[],d=(0,p.f3M)(Vf,{optional:!0})??{},m=(0,p.f3M)(qo),w=(0,p.f3M)(am,{optional:!0}),b=(0,p.f3M)(Yb,{optional:!0}),S=(0,p.f3M)(um,{optional:!0}),N=new Rr(null,n,e,t,r,o,jl(u));return b&&(N.urlHandlingStrategy=b),S&&(N.routeReuseStrategy=S),N.titleStrategy=w??m,function dE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let Rr=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Aa.x,this.errorHandler=aM,this.malformedUriErrorHandler=Qb,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>mt(void 0),this.urlHandlingStrategy=new oM,this.routeReuseStrategy=new Zb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Jl),this.configLoader.onLoadEndListener=j=>this.triggerEvent(new Tb(j)),this.configLoader.onLoadStartListener=j=>this.triggerEvent(new Cb(j)),this.ngModule=d.get(p.h0i),this.console=d.get(p.c2e);const N=d.get(p.R0b);this.isNgZoneEnabled=N instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function ab(){return new $l(new Kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Yl(this.currentUrlTree,this.rootComponentType),this.transitions=new co({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Hi(o=>0!==o.id),(0,St.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vn(o=>{let u=!1,d=!1;return mt(o).pipe((0,di.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Vn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return hE(m.source)&&(this.browserUrlTree=m.extractedUrl),mt(m).pipe(Vn(N=>{const j=this.transitions.getValue();return r.next(new Ug(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),j!==this.transitions.getValue()?Dd.E:Promise.resolve(N)}),function rE(n,e,t,r){return Vn(o=>function Gb(n,e,t,r,o){return new nE(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,St.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,di.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function sm(n,e,t,r,o,u){return(0,Di.z)(d=>function zb(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new qb(n,e,t,r,o,d,m,u).recognize().pipe(Vn(w=>null===w?function Sv(n){return new Yr.y(e=>e.error(n))}(new zo):mt(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,St.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,di.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Z,N)}this.browserUrlTree=N.urlAfterRedirects}const j=new Db(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(j)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:Z,source:de,restoredState:Ne,extras:Le}=m,Vt=new Ug(j,this.serializeUrl(Z),de,Ne);r.next(Vt);const Zt=Yl(Z,this.rootComponentType).snapshot;return mt(o={...m,targetSnapshot:Zt,urlAfterRedirects:Z,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Dd.E}),(0,di.b)(m=>{const w=new Rw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,St.U)(m=>o={...m,guards:_v(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function Zg(n,e){return(0,Di.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?mt({...t,guardsResult:!0}):function Ww(n,e,t,r){return(0,nn.D)(n).pipe((0,Di.z)(o=>function jb(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?mt(u.map(m=>{const w=Kg(e)??o,b=Ql(m,w);return Ma(function Ub(n){return n&&Vs(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe($o())})).pipe(ku()):mt(!0)}(o.component,o.route,t,e,r)),$o(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Di.z)(m=>m&&function zw(n){return"boolean"==typeof n}(m)?function Kw(n,e,t,r){return(0,nn.D)(e).pipe(Sa(o=>xg(function Dv(n,e){return null!==n&&e&&e(new Ab(n)),mt(!0)}(o.route.parent,r),function Iv(n,e){return null!==n&&e&&e(new Mb(n)),mt(!0)}(o.route,r),function bv(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Fb(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>mw(()=>mt(d.guards.map(w=>{const b=Kg(d.node)??t,S=Ql(w,b);return Ma(function qw(n){return n&&Vs(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe($o())})).pipe(ku())));return mt(u).pipe(ku())}(n,o.path,t),function Zw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const o=r.map(u=>mw(()=>{const d=Kg(e)??t,m=Ql(u,d);return Ma(function Vb(n){return n&&Vs(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe($o())}));return mt(o).pipe(ku())}(n,o.route,t))),$o(o=>!0!==o,!0))}(r,u,n,e):mt(m)),(0,St.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,di.b)(m=>{if(o.guardsResult=m.guardsResult,zl(m.guardsResult))throw Rf(0,m.guardsResult);const w=new jg(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Hi(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),om(m=>{if(m.guards.canActivateChecks.length)return mt(m).pipe((0,di.b)(w=>{const b=new bb(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Vn(w=>{let b=!1;return mt(w).pipe(function iM(n,e){return(0,Di.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return mt(t);let u=0;return(0,nn.D)(o).pipe(Sa(d=>function Mv(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!xv(o)&&(u[Td]=o.title),function sM(n,e,t,r){const o=function uE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return mt({});const u={};return(0,nn.D)(o).pipe((0,Di.z)(d=>function lE(n,e,t,r){const o=Kg(e)??r,u=Ql(n,o);return Ma(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe($o(),(0,di.b)(m=>{u[d]=m}))),nv(1),function ib(n){return(0,St.U)(()=>n)}(u),Ou(d=>kf(d)?Dd.E:Vl(d)))}(u,n,e,r).pipe((0,St.U)(d=>(n._resolvedData=d,n.data=Af(n,t).resolve,o&&xv(o)&&(n.data[Td]=o.title),null)))}(d.route,r,n,e)),(0,di.b)(()=>u++),nv(1),(0,Di.z)(d=>u===o.length?mt(t):Dd.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,di.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,di.b)(w=>{const b=new Nw(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),om(m=>{const w=b=>{const S=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,di.b)(N=>{b.component=N}),(0,St.U)(()=>{})));for(const N of b.children)S.push(...w(N));return S};return nb(w(m.targetSnapshot.root)).pipe(Cd(),vf(1))}),om(()=>this.afterPreactivation()),(0,St.U)(m=>{const w=function yv(n,e,t){const r=Hg(n,e._root,t?t._root:void 0);return new xb(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,di.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new eM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,di.b)({next(){u=!0},complete(){u=!0}}),wf(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ou(m=>{if(d=!0,qg(m)){zg(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new Bg(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),zg(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hE(o.source)};this.scheduleNavigation(b,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Zl(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return Dd.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Hw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,b=o||this.routerState.root,S=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),Aw(b,this.currentUrlTree,t,N,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=zl(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Pv(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...Xb}:!1===r?{...Jb}:r,zl(t))return sv(this.currentUrlTree,t,o);const u=this.parseUrl(t);return sv(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,b;d?(m=d.resolve,w=d.reject,b=d.promise):b=new Promise((j,Z)=>{m=j,w=Z});const S=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:S,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Bg(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return cm()},providedIn:"root"}),n})();function hE(n){return"imperative"!==n}let Uf=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Aa.x,this.subscription=t.events.subscribe(u=>{u instanceof xd&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Rr),p.Y36(Pu),p.Y36(ge))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})();class fE{}let uM=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Hi(t=>t instanceof xd),Sa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,nn.D)(o).pipe((0,Id.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):mt(null);const u=o.pipe((0,Di.z)(d=>null===d?mt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,nn.D)([u,d]).pipe((0,Id.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Rr),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(fE),p.LFG(Jl))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ec=new p.OlP("");let pE=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ug?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Pw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function bi(n,e){return{\u0275kind:n,\u0275providers:e}}function tc(n){return[{provide:Ov,multi:!0,useValue:n}]}function Fu(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Rr),o=n.get(Bf);1===n.get(qi)&&r.initialNavigation(),n.get(nc,null,p.XFs.Optional)?.setUpPreloading(),n.get(ec,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const Bf=new p.OlP("",{factory:()=>new Aa.x}),qi=new p.OlP("",{providedIn:"root",factory:()=>1});const nc=new p.OlP("");function Vd(n){return bi(0,[{provide:nc,useExisting:uM},{provide:fE,useExisting:n}])}const rc=new p.OlP("ROUTER_FORROOT_GUARD"),Ud=[De,{provide:Gl,useClass:ho},{provide:Rr,useFactory:cm},Nf,{provide:Pu,useFactory:function mE(n){return n.routerState.root},deps:[Rr]},Jl];function yE(){return new p.PXZ("Router",Rr)}let Vv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Ud,[],tc(t),{provide:rc,useFactory:EE,deps:[[Rr,new p.FiY,new p.tp0]]},{provide:Vf,useValue:r||{}},r?.useHash?{provide:ge,useClass:lt}:{provide:ge,useClass:Je},{provide:ec,useFactory:()=>{const n=(0,p.f3M)(Rr),e=(0,p.f3M)(eu),t=(0,p.f3M)(Vf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new pE(n,e,t)}},r?.preloadingStrategy?Vd(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:yE},r?.initialNavigation?IE(r):[],[{provide:Uv,useFactory:Fu},{provide:p.tb,multi:!0,useExisting:Uv}]]}}static forChild(t){return{ngModule:n,providers:[tc(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(rc,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[jw]}),n})();function EE(n){return"guarded"}function IE(n){return["disabled"===n.initialNavigation?bi(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Rr);return()=>{e.setUpLocationChangeListener()}}},{provide:qi,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?bi(2,[{provide:qi,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(Rr),m=e.get(Bf);(function o(u){e.get(Rr).events.pipe(Hi(m=>m instanceof xd||m instanceof Bg||m instanceof Zl),(0,St.U)(m=>m instanceof xd||m instanceof Bg&&(0===m.code||1===m.code)&&null),Hi(m=>null!==m),vf(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?mt(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const Uv=new p.OlP("");var nC=k(4986),ei=k(2122);function Bv(){return(0,Jr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Dn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function jv(n,e){return n===e}k(8971);var ft,iC=k(3942),pe=k(5861),Wo=k(9681),Bd=k(4859),Lu=k(1877),rn=k(2090),$v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ko={},Hf=Hf||{},Pt=$v||self;function Gf(){}function jd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $d(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hm="closure_uid_"+(1e9*Math.random()>>>0),CE=0;function TE(n,e,t){return n.call.apply(n.bind,arguments)}function oC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function fi(n,e,t){return(fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?TE:oC).apply(null,arguments)}function fm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ti(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Oa(){this.s=this.s,this.o=this.o}Oa.prototype.s=!1,Oa.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function sC(n){Object.prototype.hasOwnProperty.call(n,hm)&&n[hm]||(n[hm]=++CE)}(this)},Oa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Gv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function pm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(jd(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function ni(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ni.prototype.h=function(){this.defaultPrevented=!0};var AE=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",Gf,e),Pt.removeEventListener("test",Gf,e)}catch{}return n}();function zf(n){return/^[\s\xa0]*$/.test(n)}var qv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gm(n,e){return n<e?-1:n>e?1:0}function Wv(){var n=Pt.navigator;return n&&(n=n.userAgent)?n:""}function Zo(n){return-1!=Wv().indexOf(n)}function Kv(n){return Kv[" "](n),n}Kv[" "]=Gf;var qf,n,aC=Zo("Opera"),Un=Zo("Trident")||Zo("MSIE"),Zv=Zo("Edge"),Yv=Zv||Un,ME=Zo("Gecko")&&!(-1!=Wv().toLowerCase().indexOf("webkit")&&!Zo("Edge"))&&!(Zo("Trident")||Zo("MSIE"))&&!Zo("Edge"),xE=-1!=Wv().toLowerCase().indexOf("webkit")&&!Zo("Edge");function RE(){var n=Pt.document;return n?n.documentMode:void 0}e:{var mm="",Vu=(n=Wv(),ME?/rv:([^\);]+)(\)|;)/.exec(n):Zv?/Edge\/([\d\.]+)/.exec(n):Un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):xE?/WebKit\/(\S+)/.exec(n):aC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Vu&&(mm=Vu?Vu[1]:""),Un){var Qv=RE();if(null!=Qv&&Qv>parseFloat(mm)){qf=String(Qv);break e}}qf=mm}var uC={};var cM=Pt.document&&Un&&(RE()||parseInt(qf,10))||void 0;function Hd(n,e){if(ni.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ME){e:{try{Kv(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:e_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hd.X.h.call(this)}}ti(Hd,ni);var e_={2:"touch",3:"pen",4:"mouse"};Hd.prototype.h=function(){Hd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wi="closure_listenable_"+(1e6*Math.random()|0),lC=0;function cC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++lC,this.ba=this.ea=!1}function as(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function us(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Us(n){const e={};for(const t in n)e[t]=n[t];return e}const t_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function n_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<t_.length;u++)t=t_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ym(n){this.src=n,this.g={},this.h=0}function r_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Gv(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(as(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function i_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}ym.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=i_(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new cC(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var s_="closure_lm_"+(1e6*Math.random()|0),Wf={};function Gd(n,e,t,r,o){if(r&&r.once)return kE(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Gd(n,e[u],t,r,o);return null}return t=Zf(t),n&&n[Wi]?n.N(e,t,$d(r)?!!r.capture:!!r,o):OE(n,e,t,!1,r,o)}function OE(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=$d(o)?!!o.capture:!!o,m=_m(n);if(m||(n[s_]=m=new ym(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function PE(){const e=dC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)AE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Kf(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kE(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)kE(n,e[u],t,r,o);return null}return t=Zf(t),n&&n[Wi]?n.O(e,t,$d(r)?!!r.capture:!!r,o):OE(n,e,t,!0,r,o)}function o_(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)o_(n,e[u],t,r,o);else r=$d(r)?!!r.capture:!!r,t=Zf(t),n&&n[Wi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=i_(u=n.g[e],t,r,o))&&(as(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=_m(n))&&(e=n.g[e.toString()],n=-1,e&&(n=i_(e,t,r,o)),(t=-1<n?e[n]:null)&&vm(t))}function vm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Wi])r_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Kf(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_m(e))?(r_(t,n),0==t.h&&(t.src=null,e[s_]=null)):as(n)}}}function Kf(n){return n in Wf?Wf[n]:Wf[n]="on"+n}function dC(n,e){if(n.ba)n=!0;else{e=new Hd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&vm(n),n=t.call(r,e)}return n}function _m(n){return(n=n[s_])instanceof ym?n:null}var wm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zf(n){return"function"==typeof n?n:(n[wm]||(n[wm]=function(e){return n.handleEvent(e)}),n[wm])}function wr(){Oa.call(this),this.i=new ym(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ni(e,n);else if(e instanceof ni)e.target=e.target||n;else{var o=e;n_(e=new ni(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Yf(d,r,!0,e)&&o}if(o=Yf(d=e.g=n,r,!0,e)&&o,o=Yf(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Yf(d=e.g=t[u],r,!1,e)&&o}function Yf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&r_(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}ti(wr,Oa),wr.prototype[Wi]=!0,wr.prototype.removeEventListener=function(n,e,t,r){o_(this,n,e,t,r)},wr.prototype.M=function(){if(wr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)as(t[r]);delete n.g[e],n.h--}}this.I=null},wr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},wr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Em=Pt.JSON.stringify;function FE(){var n=jE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var u_,a_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new VE,n=>n.reset());class VE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function UE(n){Pt.setTimeout(()=>{throw n},0)}function BE(n,e){u_||function hC(){var n=Pt.Promise.resolve(void 0);u_=function(){n.then(fC)}}(),l_||(u_(),l_=!0),jE.add(n,e)}var l_=!1,jE=new class LE{constructor(){this.h=this.g=null}add(e,t){const r=a_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fC(){for(var n;n=FE();){try{n.h.call(n.g)}catch(t){UE(t)}var e=a_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}l_=!1}function Im(n,e){wr.call(this),this.h=n||1,this.g=e||Pt,this.j=fi(this.lb,this),this.l=Date.now()}function c_(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function d_(n,e,t){if("function"==typeof n)t&&(n=fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function $E(n){n.g=d_(()=>{n.g=null,n.i&&(n.i=!1,$E(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ti(Im,wr),(ft=Im.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$r(this,"tick"),this.ca&&(c_(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){Im.X.M.call(this),c_(this),delete this.g};class pC extends Oa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$E(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qf(n){Oa.call(this),this.h=n,this.g={}}ti(Qf,Oa);var HE=[];function GE(n,e,t,r){Array.isArray(t)||(t&&(HE[0]=t.toString()),t=HE);for(var o=0;o<t.length;o++){var u=Gd(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function zE(n){us(n.g,function(e,t){this.g.hasOwnProperty(t)&&vm(e)},n),n.g={}}function Dm(){this.g=!0}function ic(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function WE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Em(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Qf.prototype.M=function(){Qf.X.M.call(this),zE(this)},Qf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dm.prototype.Aa=function(){this.g=!1},Dm.prototype.info=function(){};var Uu={},h_=null;function Xf(){return h_=h_||new wr}function f_(n){ni.call(this,Uu.Pa,n)}function zd(n){const e=Xf();$r(e,new f_(e))}function p_(n,e){ni.call(this,Uu.STAT_EVENT,n),this.stat=e}function pi(n){const e=Xf();$r(e,new p_(e,n))}function g_(n,e){ni.call(this,Uu.Qa,n),this.size=e}function yo(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}Uu.Pa="serverreachability",ti(f_,ni),Uu.STAT_EVENT="statevent",ti(p_,ni),Uu.Qa="timingevent",ti(g_,ni);var bm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},KE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Bu(){}function Cm(){}Bu.prototype.h=null;var ZE,Tm={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Am(){ni.call(this,"d")}function Sm(){ni.call(this,"c")}function Et(){}function Jf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Qf(this),this.O=vC,this.T=new Im(n=Yv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new YE}function YE(){this.i=null,this.g="",this.h=!1}ti(Am,ni),ti(Sm,ni),ti(Et,Bu),Et.prototype.g=function(){return new XMLHttpRequest},Et.prototype.i=function(){return{}},ZE=new Et;var vC=45e3,ju={},Mm={};function qd(n,e,t){n.K=1,n.v=Rm(Pa(e)),n.s=t,n.P=!0,ep(n,null)}function ep(n,e){n.F=Date.now(),Wd(n),n.A=Pa(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),CC(t.i,"t",r),n.C=0,t=n.l.H,n.h=new YE,n.g=Bm(n.l,t?e:null,!n.s),0<n.N&&(n.L=new pC(fi(n.La,n,n.g),n.N)),GE(n.S,n.g,"readystatechange",n.ib),e=n.H?Us(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),zd(),function gC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+b+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Wn(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function _C(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=QE(n,t),o==Mm){4==e&&(n.o=4,pi(14),r=!1),ic(n.j,n.m,null,"[Incomplete Response]");break}if(o==ju){n.o=4,pi(15),ic(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ic(n.j,n.m,o,null),xm(n,o)}Wn(n)&&o!=Mm&&o!=ju&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),M_(e),e.K=!0,pi(11))):(ic(n.j,n.m,t,"[Invalid Chunked Response]"),$u(n),Kd(n))}function QE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Mm:(t=Number(e.substring(t,r)),isNaN(t)?ju:(r+=1)+t>e.length?Mm:(e=e.substr(r,t),n.C=r+t,e))}function Wd(n){n.V=Date.now()+n.O,XE(n,n.O)}function XE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=yo(fi(n.gb,n),e)}function tp(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Kd(n){0==n.l.G||n.I||Um(n.l,n)}function $u(n){tp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,c_(n.T),zE(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Om(t.h,n)))if(!n.J&&Om(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Qd(t),Lm(t)}S_(t),pi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=yo(fi(t.cb,t),6e3));if(1>=aI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ua(t,11)}else if((n.J||t.g==n)&&Qd(t),!zf(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const j=b[5];null!=j&&"number"==typeof j&&0<j&&(t.J=r=1.5*j,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const de=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(de){var u=r.h;u.g||-1==de.indexOf("spdy")&&-1==de.indexOf("quic")&&-1==de.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(ac(u,u.h),u.h=null))}if(r.D){const Ne=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.za=Ne,On(r.F,r.D,Ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=II(r,r.H?r.ka:null,r.V),d.J){uI(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(tp(m),Wd(m)),r.g=d}else A_(r);0<t.i.length&&Vm(t)}else"stop"!=b[0]&&"close"!=b[0]||Ua(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Ua(t,7):C_(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}zd()}catch{}}function JE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jd(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function EC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(jd(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function wC(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=Jf.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==Va(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const S=Va(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||Yv||this.g&&(this.h.h||this.g.fa()||D_(this.g)))){this.I||4!=S||7==e||zd(),tp(this);var t=this.g.aa();this.Y=t;t:if(Wn(this)){var r=D_(this.g);n="";var o=r.length,u=4==Va(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){$u(this),Kd(this);var d="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function mC(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zf(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,pi(12),$u(this),Kd(this);break e}ic(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xm(this,t)}this.P?(_C(this,S,d),Yv&&this.i&&3==S&&(GE(this.S,this.T,"tick",this.hb),this.T.start())):(ic(this.j,this.m,d,null),xm(this,d)),4==S&&$u(this),this.i&&!this.I&&(4==S?Um(this.l,this):(this.i=!1,Wd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),$u(this),Kd(this)}}}catch{}},ft.hb=function(){if(this.g){var n=Va(this.g),e=this.g.fa();this.C<e.length&&(tp(this),_C(this,n,e),this.i&&4!=n&&Wd(this))}},ft.cancel=function(){this.I=!0,$u(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function qE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zd(),pi(17)),$u(this),this.o=2,Kd(this)):XE(this,this.V-n)};var Zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof sc){this.h=void 0!==e?e:n.h,oc(this,n.j),this.s=n.s,this.g=n.g,np(this,n.m),this.l=n.l,e=n.i;var t=new rp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),m_(this,t),this.o=n.o}else n&&(t=String(n).match(Zd))?(this.h=!!e,oc(this,t[1]||"",!0),this.s=ka(t[2]||""),this.g=ka(t[3]||"",!0),np(this,t[4]),this.l=ka(t[5]||"",!0),m_(this,t[6]||"",!0),this.o=ka(t[7]||"")):(this.h=!!e,this.i=new rp(null,this.h))}function Pa(n){return new sc(n)}function oc(n,e,t){n.j=t?ka(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function np(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function m_(n,e,t){e instanceof rp?(n.i=e,function dM(n,e){e&&!n.j&&(La(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(iI(this,r),CC(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fa(e,nI)),n.i=new rp(e,n.h))}function On(n,e,t){n.i.set(e,t)}function Rm(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ka(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fa(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,DC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function DC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}sc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fa(e,eI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fa(e,eI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fa(t,"/"==t.charAt(0)?tI:bC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fa(t,rI)),n.join("")};var eI=/[#\/\?@]/g,bC=/[#\?:]/g,tI=/[#\?]/g,nI=/[#\?@]/g,rI=/#/g;function rp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function La(n){n.g||(n.g=new Map,n.h=0,n.i&&function IC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function iI(n,e){La(n),e=ip(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function sI(n,e){return La(n),e=ip(n,e),n.g.has(e)}function CC(n,e,t){iI(n,e),0<t.length&&(n.i=null,n.g.set(ip(n,e),pm(t)),n.h+=t.length)}function ip(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function y_(n){this.l=n||Nm,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ga&&Pt.g.Ga()&&Pt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=rp.prototype).add=function(n,e){La(this),this.i=null,n=ip(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){La(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ft.oa=function(){La(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ft.W=function(n){La(this);let e=[];if("string"==typeof n)sI(this,n)&&(e=e.concat(this.g.get(ip(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return La(this),this.i=null,sI(this,n=ip(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var Nm=10;function oI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function aI(n){return n.h?1:n.g?n.g.size:0}function Om(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ac(n,e){n.g?n.g.add(e):n.h=e}function uI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function lI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return pm(n.i)}function v_(){}function TC(){this.g=new v_}function AC(n,e,t){const r=t||"";try{JE(n,function(o,u){let d=o;$d(o)&&(d=Em(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Pm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function sp(n){this.l=n.ac||null,this.j=n.jb||!1}function Hu(n,e){wr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=__,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}y_.prototype.cancel=function(){if(this.i=lI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},v_.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},v_.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},ti(sp,Bu),sp.prototype.g=function(){return new Hu(this.l,this.j)},sp.prototype.i=function(n){return function(){return n}}({}),ti(Hu,wr);var __=0;function w_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function op(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Yd(n)}function Yd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=Hu.prototype).open=function(n,e){if(this.readyState!=__)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Yd(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,op(this)),this.readyState=__},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Yd(this)),this.g&&(this.readyState=3,Yd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;w_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?op(this):Yd(this),3==this.readyState&&w_(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,op(this))},ft.Ua=function(n){this.g&&(this.response=n,op(this))},ft.ga=function(){this.g&&op(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Hu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var SC=Pt.JSON.parse;function Kn(n){wr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=dI,this.K=this.L=!1}ti(Kn,wr);var dI="",E_=/^https?$/i,MC=["POST","PUT"];function I_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fI(n),km(n)}function fI(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function pI(n){if(n.h&&typeof Hf<"u"&&(!n.C[1]||4!=Va(n)||2!=n.aa()))if(n.v&&4==Va(n))d_(n.Ha,0,n);else if($r(n,"readystatechange"),4==Va(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Zd)[1]||null;if(!o&&Pt.self&&Pt.self.location){var u=Pt.self.location.protocol;o=u.substr(0,u.length-1)}r=!E_.test(o?o.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var d=2<Va(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",fI(n)}}finally{km(n)}}}function km(n,e){if(n.g){Fm(n);const t=n.g,r=n.C[0]?Gf:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch{}}}function Fm(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function Va(n){return n.g?n.g.readyState:0}function D_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case dI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function gI(n){let e="";return us(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function b_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=gI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):On(n,e,t))}function ap(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mI(n){this.Ca=0,this.i=[],this.j=new Dm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ap("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ap("baseRetryDelayMs",5e3,n),this.bb=ap("retryDelaySeedMs",1e4,n),this.$a=ap("forwardChannelMaxRetries",2,n),this.ta=ap("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new y_(n&&n.concurrentRequestLimit),this.Fa=new TC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function C_(n){if(yI(n),3==n.G){var e=n.U++,t=Pa(n.F);On(t,"SID",n.I),On(t,"RID",e),On(t,"TYPE","terminate"),up(n,t),(e=new Jf(n,n.j,e,void 0)).K=2,e.v=Rm(Pa(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Bm(e.l,null),e.g.da(e.v)),e.F=Date.now(),Wd(e)}EI(n)}function Lm(n){n.g&&(M_(n),n.g.cancel(),n.g=null)}function yI(n){Lm(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),Qd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function Vm(n){oI(n.h)||n.m||(n.m=!0,BE(n.Ja,n),n.C=0)}function T_(n,e){var t;t=e?e.m:n.U++;const r=Pa(n.F);On(r,"SID",n.I),On(r,"RID",t),On(r,"AID",n.T),up(n,r),n.o&&n.s&&b_(r,n.o,n.s),t=new Jf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=_I(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ac(n.h,t),qd(t,r,e)}function up(n,e){n.ia&&us(n.ia,function(t,r){On(e,r,t)}),n.l&&JE({},function(t,r){On(e,r,t)})}function _I(n,e,t){t=Math.min(n.i.length,t);var r=n.l?fi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const S=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{AC(S,d,"req"+b+"_")}catch{r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function A_(n){n.g||n.u||(n.Z=1,BE(n.Ia,n),n.A=0)}function S_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=yo(fi(n.Ia,n),x_(n,n.A)),n.A++,0))}function M_(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function wI(n){n.g=new Jf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Pa(n.sa);On(e,"RID","rpc"),On(e,"SID",n.I),On(e,"CI",n.L?"0":"1"),On(e,"AID",n.T),On(e,"TYPE","xmlhttp"),up(n,e),n.o&&n.s&&b_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Rm(Pa(e)),t.s=null,t.P=!0,ep(t,n)}function Qd(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function Um(n,e){var t=null;if(n.g==e){Qd(n),M_(n),n.g=null;var r=2}else{if(!Om(n.h,e))return;t=e.D,uI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;$r(r=Xf(),new g_(r,t)),Vm(n)}else A_(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function vI(n,e){return!(aI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=yo(fi(n.Ja,n,e),x_(n,n.C)),n.C++,0)))}(n,e)||2==r&&S_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Ua(n,5);break;case 4:Ua(n,10);break;case 3:Ua(n,6);break;default:Ua(n,2)}}function x_(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ua(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=fi(n.kb,n);t||(t=new sc("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||oc(t,"https"),Rm(t)),function cI(n,e){const t=new Dm;if(Pt.Image){const r=new Image;r.onload=fm(Pm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=fm(Pm,t,r,"TestLoadImage: error",!1,e),r.onabort=fm(Pm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=fm(Pm,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.l&&n.l.va(e),EI(n),yI(n)}function EI(n){if(n.G=0,n.la=[],n.l){const e=lI(n.h);(0!=e.length||0!=n.i.length)&&(zv(n.la,e),zv(n.la,n.i),n.h.i.length=0,pm(n.i),n.i.length=0),n.l.ua()}}function II(n,e,t){var r=t instanceof sc?Pa(t):new sc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),np(r,r.m);else{var o=Pt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new sc(null,void 0);r&&oc(u,r),e&&(u.g=e),o&&np(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&On(r,t,e),On(r,"VER",n.ma),up(n,r),r}function Bm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Da&&!n.ra?new sp({jb:!0}):n.ra)).Ka(n.H),e}function DI(){}function lp(){if(Un&&!(10<=Number(cM)))throw Error("Environmental error: no available transport.")}function Hr(n,e){wr.call(this),this.g=new mI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!zf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new cp(this)}function R_(n){Am.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bI(){Sm.call(this),this.status=1}function cp(n){this.g=n}(ft=Kn.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ZE.g(),this.C=function yC(n){return n.h||(n.h=n.i())}(this.u?this.u:ZE),this.g.onreadystatechange=fi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void I_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Pt.FormData&&n instanceof Pt.FormData,!(0<=Gv(MC,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fm(this),0<this.B&&((this.K=function hI(n){return Un&&function NE(){return function SE(n){var e=uC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=qv(String(qf)).split("."),t=qv("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=gm(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||gm(0==o[2].length,0==u[2].length)||gm(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fi(this.qa,this)):this.A=d_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){I_(this,u)}},ft.qa=function(){typeof Hf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),km(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),km(this,!0)),Kn.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?pI(this):this.fb())},ft.fb=function(){pI(this)},ft.aa=function(){try{return 2<Va(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),SC(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=mI.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Jf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Us(u),n_(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_I(this,o,e),On(t=Pa(this.F),"RID",n),On(t,"CVER",22),this.D&&On(t,"X-HTTP-Session-Id",this.D),up(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(gI(u)))+"&"+e:this.o&&b_(t,this.o,u)),ac(this.h,o),this.Ya&&On(t,"TYPE","init"),this.O?(On(t,"$req",e),On(t,"SID","null"),o.Z=!0,qd(o,t,null)):qd(o,t,e),this.G=2}}else 3==this.G&&(n?T_(this,n):0==this.i.length||oI(this.h)||T_(this))},ft.Ia=function(){if(this.u=null,wI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=yo(fi(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pi(10),Lm(this),wI(this))},ft.cb=function(){null!=this.v&&(this.v=null,Lm(this),S_(this),pi(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},(ft=DI.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},lp.prototype.g=function(n,e){return new Hr(n,e)},ti(Hr,wr),Hr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;pi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=II(n,null,n.V),Vm(n)},Hr.prototype.close=function(){C_(this.g)},Hr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Em(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Vm(e)},Hr.prototype.M=function(){this.g.l=null,delete this.j,C_(this.g),delete this.g,Hr.X.M.call(this)},ti(R_,Am),ti(bI,Sm),ti(cp,DI),cp.prototype.xa=function(){$r(this.g,"a")},cp.prototype.wa=function(n){$r(this.g,new R_(n))},cp.prototype.va=function(n){$r(this.g,new bI)},cp.prototype.ua=function(){$r(this.g,"b")},lp.prototype.createWebChannel=lp.prototype.g,Hr.prototype.send=Hr.prototype.u,Hr.prototype.open=Hr.prototype.m,Hr.prototype.close=Hr.prototype.close,bm.NO_ERROR=0,bm.TIMEOUT=8,bm.HTTP_ERROR=6,KE.COMPLETE="complete",Cm.EventType=Tm,Tm.OPEN="a",Tm.CLOSE="b",Tm.ERROR="c",Tm.MESSAGE="d",wr.prototype.listen=wr.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.Oa,Kn.prototype.getLastErrorCode=Kn.prototype.Ea,Kn.prototype.getStatus=Kn.prototype.aa,Kn.prototype.getResponseJson=Kn.prototype.Sa,Kn.prototype.getResponseText=Kn.prototype.fa,Kn.prototype.send=Kn.prototype.da,Kn.prototype.setWithCredentials=Kn.prototype.Ka;var CI=Ko.createWebChannelTransport=function(){return new lp},N_=Ko.getStatEventTarget=function(){return Xf()},O_=Ko.ErrorCode=bm,P_=Ko.EventType=KE,xC=Ko.Event=Uu,k_=Ko.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},F_=Ko.FetchXmlHttpFactory=sp,dp=Ko.WebChannel=Cm,TI=Ko.XhrIo=Kn;const L_="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Xd="9.18.0";const Gu=new Lu.Yd("@firebase/firestore");function V_(){return Gu.logLevel}function Oe(n,...e){if(Gu.logLevel<=Lu.in.DEBUG){const t=e.map(U_);Gu.debug(`Firestore (${Xd}): ${n}`,...t)}}function Er(n,...e){if(Gu.logLevel<=Lu.in.ERROR){const t=e.map(U_);Gu.error(`Firestore (${Xd}): ${n}`,...t)}}function zu(n,...e){if(Gu.logLevel<=Lu.in.WARN){const t=e.map(U_);Gu.warn(`Firestore (${Xd}): ${n}`,...t)}}function U_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Xd}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function yt(n,e){n||rt()}function ze(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class AI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class OC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PC{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,pe.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new AI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Nr(e)}}class kC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(yt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class FC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new kC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.A=t.token,new SI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function MI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class B_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=MI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function uc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function j_(n){return n+"\0"}class Bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Bn(0,0))}static max(){return new _t(new Bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $m{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===$m.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $m?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends $m{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const VC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends $m{construct(e,t,r){return new nr(e,t,r)}static isValidIdentifier(e){return VC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(t)}static emptyPath(){return new nr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(sn.fromString(e))}static fromName(e){return new Ge(sn.fromString(e).popFirst(5))}static empty(){return new Ge(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new sn(e.slice()))}}class Hm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function lc(n){return n.fields.find(e=>2===e.kind)}function cc(n){return n.fields.filter(e=>2!==e.kind)}Hm.UNKNOWN_ID=-1;class ls{constructor(e,t){this.fieldPath=e,this.kind=t}}class dc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dc(0,cs.min())}}function Jd(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new Bn(t+1,0):new Bn(t,r));return new cs(o,Ge.empty(),e)}function xI(n){return new cs(n.readTime,n.key,-1)}class cs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cs(_t.min(),Ge.empty(),-1)}static max(){return new cs(_t.max(),Ge.empty(),-1)}}function H_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}const hp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qu(n){return G_.apply(this,arguments)}function G_(){return G_=(0,pe.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==hp)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),G_.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(o=>o?te.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new te((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(S=>{d[b]=S,++m,m===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new te((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class pp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new gp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=zm(r.target.error);this.P.reject(new gp(e,o))}}static open(e,t,r,o){try{return new pp(t,e.transaction(o,r))}catch(u){throw new gp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pM(t)}}class ds{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ds.D((0,rn.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Ba(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,rn.hl)())return!1;if(ds.N())return!0;const e=(0,rn.z$)(),t=ds.D(e),r=0<t&&t<10,o=ds.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,pe.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new gp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new gp(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.F(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,pe.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.O(e);const w=pp.open(u.db,e,d?"readonly":"readwrite",r),b=o(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),te.reject(S))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,S="FirebaseError"!==b.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class RI{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Ba(this.q.delete())}}class gp extends xe{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wu(n){return"IndexedDbTransactionError"===n.name}class pM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ba(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Ba(this.store.add(e))}get(e){return Ba(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Ba(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Ba(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new te((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new te((r,o)=>{t.onerror=u=>{const d=zm(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new te((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new RI(m),b=t(m.primaryKey,m.value,w);if(b instanceof te){const S=b.catch(N=>(w.done(),te.reject(N)));r.push(S)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ba(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=zm(r.target.error);t(o)}})}let Gm=!1;function zm(n){const e=ds.D((0,rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gm||(Gm=!0,setTimeout(()=>{throw r},0)),r}}return n}class z_{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Wu(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qu(r)}yield t.nt(6e4)}))}}class q_{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return te.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Oe("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=xI(u);H_(d,r)>0&&(r=d)}),new cs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let hs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class NI{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}function K_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function eh(n){return null==n}function mp(n){return 0===n&&1/n==-1/0}function Y_(n){return"number"==typeof n&&Number.isInteger(n)&&!mp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class OI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw o instanceof DOMException?new OI("Invalid base64 string: "+o):o}}(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const HC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(n){if(yt(!!n),"string"==typeof n){let e=0;const t=HC.exec(n);if(yt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bn(n.seconds),nanos:bn(n.nanos)}}function bn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fc(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Q_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function GC(n){const e=n.mapValue.fields.__previous_value__;return Q_(e)?GC(e):e}function qm(n){const e=rr(n.mapValue.fields.__local_write_time__.timestampValue);return new Bn(e.seconds,e.nanos)}const ja={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yp={nullValue:"NULL_VALUE"};function vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Q_(n)?4:t0(n)?9007199254740991:10:rt()}function Qo(n,e){if(n===e)return!0;const t=vo(n);if(t!==vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qm(n).isEqual(qm(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=rr(r.timestampValue),d=rr(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,fc(n.bytesValue).isEqual(fc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return bn(r.geoPointValue.latitude)===bn(o.geoPointValue.latitude)&&bn(r.geoPointValue.longitude)===bn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return bn(r.integerValue)===bn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=bn(r.doubleValue),d=bn(o.doubleValue);return u===d?mp(u)===mp(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return uc(n.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(K_(u)!==K_(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Qo(u[m],d[m])))return!1;return!0}(n,e);default:return rt()}var o}function pc(n,e){return void 0!==(n.values||[]).find(t=>Qo(t,e))}function Ku(n,e){if(n===e)return 0;const t=vo(n),r=vo(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=bn(o.integerValue||o.doubleValue),m=bn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return X_(n.timestampValue,e.timestampValue);case 4:return X_(qm(n),qm(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=fc(o),m=fc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const b=kt(d[w],m[w]);if(0!==b)return b}return kt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=kt(bn(o.latitude),bn(u.latitude));return 0!==d?d:kt(bn(o.longitude),bn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const b=Ku(d[w],m[w]);if(b)return b}return kt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ja.mapValue&&u===ja.mapValue)return 0;if(o===ja.mapValue)return 1;if(u===ja.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const N=kt(m[S],b[S]);if(0!==N)return N;const j=Ku(d[m[S]],w[b[S]]);if(0!==j)return j}return kt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function X_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=rr(n),r=rr(e),o=kt(t.seconds,r.seconds);return 0!==o?o:kt(t.nanos,r.nanos)}function th(n){return J_(n)}function J_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=rr(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=J_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${J_(r.fields[m])}`;return u+"}"}(n.mapValue):rt();var e}function gc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vp(n){return!!n&&"integerValue"in n}function nh(n){return!!n&&"arrayValue"in n}function e0(n){return!!n&&"nullValue"in n}function _p(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rh(n){return!!n&&"mapValue"in n}function Wm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function t0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zC(n){return"nullValue"in n?yp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?gc(Yo.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function PI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?gc(Yo.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ja:rt()}function mc(n,e){const t=Ku(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kI(n,e){const t=Ku(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $a{constructor(e,t){this.position=e,this.inclusive=t}}function Km(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):Ku(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function qC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qo(n.position[t],e.position[t]))return!1;return!0}class FI{}class Xt extends FI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new WC(e,t,r):"array-contains"===t?new UI(e,r):"in"===t?new l0(e,r):"not-in"===t?new BI(e,r):"array-contains-any"===t?new ZC(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new VI(e,r):new KC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ku(t,this.value)):null!==t&&vo(this.value)===vo(t)&&this.matchesComparison(Ku(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gn extends FI{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new gn(e,t)}matches(e){return ih(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ih(n){return"and"===n.op}function n0(n){return"or"===n.op}function Zm(n){return r0(n)&&ih(n)}function r0(n){for(const e of n.filters)if(e instanceof gn)return!1;return!0}function s0(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+th(n.value);if(Zm(n))return n.filters.map(e=>s0(e)).join(",");{const e=n.filters.map(t=>s0(t)).join(",");return`${n.op}(${e})`}}function o0(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&Qo(t.value,r.value)):n instanceof gn?function(t,r){return r instanceof gn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,d)=>o&&o0(u,r.filters[d]),!0)}(n,e):void rt();var t,r}function a0(n,e){const t=n.filters.concat(e);return gn.create(t,n.op)}function LI(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${th(e.value)}`:n instanceof gn?function(e){return e.op.toString()+" {"+e.getFilters().map(LI).join(" ,")+"}"}(n):"Filter";var e}class WC extends Xt{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class VI extends Xt{constructor(e,t){super(e,"in",t),this.keys=u0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class KC extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=u0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function u0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class UI extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nh(t)&&pc(t.arrayValue,this.value)}}class l0 extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pc(this.value.arrayValue,t)}}class BI extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pc(this.value.arrayValue,t)}}class ZC extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pc(this.value.arrayValue,r))}}class sh{constructor(e,t="asc"){this.field=e,this.dir=t}}function gM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Zn{constructor(e,t){this.comparator=e,this.root=t||gi.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new c0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new c0(this.root,e,this.comparator,!1)}getReverseIterator(){return new c0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new c0(this.root,e,this.comparator,!0)}}class c0{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??gi.RED,this.left=o??gi.EMPTY,this.right=u??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new gi(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return gi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1,gi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new YC(this.data.getIterator())}getIteratorFrom(e){return new YC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class YC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wp(n){return n.hasNext()?n.getNext():void 0}class fs{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new fs([])}unionWith(e){let t=new Cn(nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new fs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wm(t)}setAll(e){let t=nr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Wm(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];rh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){hc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new ri(Wm(this.value))}}function QC(n){const e=[];return hc(n.fields,(t,r)=>{const o=new nr([t]);if(rh(r)){const u=QC(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new fs(e)}class vn{constructor(e,t,r,o,u,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new vn(e,0,_t.min(),_t.min(),_t.min(),ri.empty(),0)}static newFoundDocument(e,t,r,o){return new vn(e,1,t,_t.min(),r,o,0)}static newNoDocument(e,t){return new vn(e,2,t,_t.min(),_t.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,_t.min(),_t.min(),ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mM{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this._t=null}}function Ym(n,e=null,t=[],r=[],o=null,u=null,d=null){return new mM(n,e,t,r,o,u,d)}function Xo(n){const e=ze(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>s0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>th(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>th(r)).join(",")),e._t=t}return e._t}function oh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!o0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qC(n.startAt,e.startAt)&&qC(n.endAt,e.endAt)}function Ep(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function d0(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function Qm(n,e,t){let r=yp,o=!0;for(const u of d0(n,e)){let d=yp,m=!0;switch(u.op){case"<":case"<=":d=zC(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=yp}mc({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];mc({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function h0(n,e,t){let r=ja,o=!0;for(const u of d0(n,e)){let d=ja,m=!0;switch(u.op){case">=":case">":d=PI(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=ja}kI({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];kI({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Ha{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.wt=null,this.gt=null}}function f0(n,e,t,r,o,u,d,m){return new Ha(n,e,t,r,o,u,d,m)}function Ip(n){return new Ha(n)}function XC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function p0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Xm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ah(n){return null!==n.collectionGroup}function yc(n){const e=ze(n);if(null===e.wt){e.wt=[];const t=Xm(e),r=p0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new sh(t)),e.wt.push(new sh(nr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new sh(nr.keyField(),u))}}}return e.wt}function Ki(n){const e=ze(n);if(!e.gt)if("F"===e.limitType)e.gt=Ym(e.path,e.collectionGroup,yc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of yc(e))t.push(new sh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new $a(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new $a(e.startAt.position,e.startAt.inclusive):null;e.gt=Ym(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.gt}function jI(n,e){e.getFirstInequalityField(),Xm(n);const t=n.filters.concat([e]);return new Ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function g0(n,e,t){return new Ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dp(n,e){return oh(Ki(n),Ki(e))&&n.limitType===e.limitType}function $I(n){return`${Xo(Ki(n))}|lt:${n.limitType}`}function m0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>LI(r)).join(", ")}]`),eh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>th(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>th(r)).join(",")),`Target(${t})`}(Ki(n))}; limitType=${n.limitType})`}function Jm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ge.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of yc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Km(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,yc(t),r)||t.endAt&&!function(o,u,d){const m=Km(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,yc(t),r)));var t,r}function HI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y0(n){return(e,t)=>{let r=!1;for(const o of yc(n)){const u=GI(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function GI(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Ku(m,w):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function JC(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(e)?"-0":e}}function Bs(n){return{integerValue:""+n}}function zI(n,e){return Y_(e)?Bs(e):JC(n,e)}class uh{constructor(){this._=void 0}}function eT(n,e,t){return n instanceof Zu?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof vc?WI(n,e):n instanceof Ga?v0(n,e):function(r,o){const u=qI(r,o),d=KI(u)+KI(r.It);return vp(u)&&vp(r.It)?Bs(d):JC(r.Tt,d)}(n,e)}function js(n,e,t){return n instanceof vc?WI(n,e):n instanceof Ga?v0(n,e):t}function qI(n,e){return n instanceof _c?vp(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Zu extends uh{}class vc extends uh{constructor(e){super(),this.elements=e}}function WI(n,e){const t=_0(e);for(const r of n.elements)t.some(o=>Qo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ga extends uh{constructor(e){super(),this.elements=e}}function v0(n,e){let t=_0(e);for(const r of n.elements)t=t.filter(o=>!Qo(o,r));return{arrayValue:{values:t}}}class _c extends uh{constructor(e,t){super(),this.Tt=e,this.It=t}}function KI(n){return bn(n.integerValue||n.doubleValue)}function _0(n){return nh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class lh{constructor(e,t){this.field=e,this.transform=t}}class ZI{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ch(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _o{}function w0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new bp(n.key,jn.none()):new dh(n.key,n.data,jn.none());{const t=n.data,r=ri.empty();let o=new Cn(nr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new za(n.key,r,new fs(o.toArray()),jn.none())}}function E0(n,e,t){n instanceof dh?function(r,o,u){const d=r.value.clone(),m=QI(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof za?function(r,o,u){if(!ch(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=QI(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(YI(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ps(n,e,t,r){return n instanceof dh?function(o,u,d,m){if(!ch(o.precondition,u))return d;const w=o.value.clone(),b=I0(o.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof za?function(o,u,d,m){if(!ch(o.precondition,u))return d;const w=I0(o.fieldTransforms,m,u),b=u.data;return b.setAll(YI(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,ch(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function nT(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=qI(r.transform,o||null);null!=u&&(null===t&&(t=ri.empty()),t.set(r.field,u))}return t||null}function rT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&uc(t,r,(o,u)=>function tT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vc&&r instanceof vc||t instanceof Ga&&r instanceof Ga?uc(t.elements,r.elements,Qo):t instanceof _c&&r instanceof _c?Qo(t.It,r.It):t instanceof Zu&&r instanceof Zu);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class dh extends _o{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class za extends _o{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function YI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function QI(n,e,t){const r=new Map;yt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,js(d,m,t[o]))}return r}function I0(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,eT(u,d,e))}return r}class bp extends _o{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ey extends _o{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iT{constructor(e){this.count=e}}var cr,un;function ty(n){switch(n){default:return rt();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function D0(n){if(void 0===n)return Er("GRPC error has no .code"),se.UNKNOWN;switch(n){case cr.OK:return se.OK;case cr.CANCELLED:return se.CANCELLED;case cr.UNKNOWN:return se.UNKNOWN;case cr.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case cr.INTERNAL:return se.INTERNAL;case cr.UNAVAILABLE:return se.UNAVAILABLE;case cr.UNAUTHENTICATED:return se.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case cr.NOT_FOUND:return se.NOT_FOUND;case cr.ALREADY_EXISTS:return se.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return se.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case cr.ABORTED:return se.ABORTED;case cr.OUT_OF_RANGE:return se.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return se.UNIMPLEMENTED;case cr.DATA_LOSS:return se.DATA_LOSS;default:return rt()}}(un=cr||(cr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Z_(this.inner)}size(){return this.innerSize}}const XI=new Zn(Ge.comparator);function Ti(){return XI}const b0=new Zn(Ge.comparator);function Yu(...n){let e=b0;for(const t of n)e=e.insert(t.key,t);return e}function Cp(n){let e=b0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wo(){return hh()}function JI(){return hh()}function hh(){return new qa(n=>n.toString(),(n,e)=>n.isEqual(e))}const eD=new Zn(Ge.comparator),sT=new Cn(Ge.comparator);function $t(...n){let e=sT;for(const t of n)e=e.add(t);return e}const yM=new Cn(kt);function C0(){return yM}class fh{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Tp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fh(_t.min(),o,C0(),Ti(),$t())}}class Tp{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tp(r,t,$t(),$t(),$t())}}class ny{constructor(e,t,r,o){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=o}}class tD{constructor(e,t){this.targetId=e,this.Rt=t}}class oT{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class aT{constructor(){this.Pt=0,this.vt=lT(),this.bt=Ir.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=$t(),t=$t(),r=$t();return this.vt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new Tp(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=lT()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class vM{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Ti(),this.Kt=uT(),this.Gt=new Cn(kt)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,o)=>{this.Jt(o)&&t(o)})}Zt(e){const t=e.targetId,r=e.Rt.count,o=this.Xt(t);if(o){const u=o.target;if(Ep(u))if(0===r){const d=new Ge(u.path);this.zt(t,d,vn.newNoDocument(d,_t.min()))}else yt(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&Ep(m.target)){const w=new Ge(m.target.path);null!==this.Ut.get(w)||this.ne(d,w)||this.zt(d,w,vn.newNoDocument(w,e))}u.Ct&&(t.set(d,u.Nt()),u.kt())}});let r=$t();this.Kt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const b=this.Xt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new fh(e,t,this.Gt,this.Ut,r);return this.Ut=Ti(),this.Kt=uT(),this.Gt=new Cn(kt),o}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const o=this.Ht(e);this.ne(e,t)?o.$t(t,1):o.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new aT,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Cn(kt),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new aT),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function uT(){return new Zn(Ge.comparator)}function lT(){return new Zn(Ge.comparator)}const cT={asc:"ASCENDING",desc:"DESCENDING"},ry={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dT={and:"AND",or:"OR"};class hT{constructor(e,t){this.databaseId=e,this.yt=t}}function wc(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qu(n,e){return n.yt?e.toBase64():e.toUint8Array()}function nD(n,e){return wc(n,e.toTimestamp())}function Yn(n){return yt(!!n),_t.fromTimestamp(function(e){const t=rr(e);return new Bn(t.seconds,t.nanos)}(n))}function Ap(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function rD(n){const e=sn.fromString(n);return yt(_T(e)),e}function Ec(n,e){return Ap(n.databaseId,e.path)}function $s(n,e){const t=rD(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(pT(t))}function ph(n,e){return Ap(n.databaseId,e)}function fT(n){const e=rD(n);return 4===e.length?sn.emptyPath():pT(e)}function iy(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pT(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function gT(n,e,t){return{name:Ec(n,e),fields:t.value.mapValue.fields}}function T0(n,e,t){const r=$s(n,e.name),o=Yn(e.updateTime),u=e.createTime?Yn(e.createTime):_t.min(),d=new ri({mapValue:{fields:e.fields}}),m=vn.newFoundDocument(r,o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Sp(n,e){let t;if(e instanceof dh)t={update:gT(n,e.key,e.value)};else if(e instanceof bp)t={delete:Ec(n,e.key)};else if(e instanceof za)t={update:gT(n,e.key,e.data),updateMask:wM(e.fieldMask)};else{if(!(e instanceof ey))return rt();t={verify:Ec(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Zu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof vc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ga)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof _c)return{fieldPath:u.field.canonicalString(),increment:d.It};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:nD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function A0(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?jn.updateTime(Yn(o.updateTime)):void 0!==o.exists?jn.exists(o.exists):jn.none():jn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(yt("REQUEST_TIME"===d.setToServerValue),m=new Zu):"appendMissingElements"in d?m=new vc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Ga(d.removeAllFromArray.values||[]):"increment"in d?m=new _c(u,d.increment):rt();const w=nr.fromServerFormat(d.fieldPath);return new lh(w,m)}(n,o)):[];var o;if(e.update){const o=$s(n,e.update.name),u=new ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new fs((e.updateMask.fieldPaths||[]).map(b=>nr.fromServerFormat(b)));return new za(o,u,d,t,r)}return new dh(o,u,t,r)}if(e.delete){const o=$s(n,e.delete);return new bp(o,t)}if(e.verify){const o=$s(n,e.verify);return new ey(o,t)}return rt()}function S0(n,e){return{documents:[ph(n,e.path)]}}function sy(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ph(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ph(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return aD(gn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Jo((S=b).field),direction:x0(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.yt||eh(b)?b:{value:b});var b,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function sD(n){let e=fT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){yt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const N=M0(S);return N instanceof gn&&Zm(N)?N.getFilters():[N]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new sh(gh((N=S).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,eh(N)?null:N}(t.limit));let w=null;var S;t.startAt&&(w=new $a((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new $a(S.values||[],!S.before)}(t.endAt)),f0(e,o,d,u,m,"F",w,b)}function M0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=gh(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=gh(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=gh(e.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=gh(e.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Xt.create(gh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return gn.create(e.compositeFilter.filters.map(t=>M0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function x0(n){return cT[n]}function _M(n){return ry[n]}function oD(n){return dT[n]}function Jo(n){return{fieldPath:n.canonicalString()}}function gh(n){return nr.fromServerFormat(n.fieldPath)}function aD(n){return n instanceof Xt?function(e){if("=="===e.op){if(_p(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NAN"}};if(e0(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_p(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NOT_NAN"}};if(e0(e.value))return{unaryFilter:{field:Jo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(e.field),op:_M(e.op),value:e.value}}}(n):n instanceof gn?function(e){const t=e.getFilters().map(r=>aD(r));return 1===t.length?t[0]:{compositeFilter:{op:oD(e.op),filters:t}}}(n):rt()}function wM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _T(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uD(e)),e=wT(n.get(t),e);return uD(e)}function wT(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function uD(n){return n+"\x01\x01"}function Wa(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&rt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:rt()}u=d+2}return new sn(r)}const ET=["userId","batchId"];function R0(n,e){return[n,Ai(e)]}function IT(n,e,t){return[n,Ai(e),t]}const EM={},DT=["prefixPath","collectionGroup","readTime","documentId"],IM=["prefixPath","collectionGroup","documentId"],DM=["collectionGroup","readTime","prefixPath","documentId"],bM=["canonicalId","targetId"],CM=["targetId","path"],TM=["path","targetId"],AM=["collectionId","parent"],i=["indexId","uid"],s=["uid","sequenceNumber"],a=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],l=["indexId","uid","orderedDocumentKey"],c=["userId","collectionPath","documentId"],f=["userId","collectionPath","largestBatchId"],v=["userId","collectionGroup","largestBatchId"],E=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],I=[...E,"documentOverlays"],T=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x=T,P=[...x,"indexConfiguration","indexState","indexEntries"];class H extends fp{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function K(n,e){const t=ze(n);return ds.M(t.re,e)}class me{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&E0(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ps(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ps(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=JI();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=w0(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(t,r)=>rT(t,r))&&uc(this.baseMutations,e.baseMutations,(t,r)=>rT(t,r))}}class ke{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){yt(e.mutations.length===r.length);let o=eD;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new ke(e,t,r,o)}}class $e{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Xe{constructor(e,t,r,o,u=_t.min(),d=_t.min(),m=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Xe(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xe(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class It{constructor(e){this.oe=e}}function Mt(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:on(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ec(o=n.oe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:wc(o,u.version.toTimestamp()),createTime:wc(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fn(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:fn(e.version)}}var o,u;return r}function on(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fn(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gs(n){const e=new Bn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Ka(n,e){const t=(e.baseMutations||[]).map(u=>A0(n.oe,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>A0(n.oe,u)),o=Bn.fromMillis(e.localWriteTimeMs);return new me(e.batchId,o,t,r)}function Ic(n){const e=gs(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gs(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(yt(1===(o=n.query).documents.length),r=Ki(Ip(fT(o.documents[0])))):r=Ki(sD(n.query)),new Xe(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function oy(n,e){const t=fn(e.snapshotVersion),r=fn(e.lastLimboFreeSnapshotVersion);let o;o=Ep(e.target)?S0(n.oe,e.target):sy(n.oe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xo(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Mp(n){const e=sD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?g0(e,e.limit,"L"):e}function xp(n,e){return new $e(e.largestBatchId,A0(n.oe,e.overlayMutation))}function ay(n,e){const t=e.path.lastSegment();return[n,Ai(e.path.popLast()),t]}function uy(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:fn(r.readTime),documentKey:Ai(r.documentKey.path),largestBatchId:r.largestBatchId}}class N0{getBundleMetadata(e,t){return ly(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:gs(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return ly(e).put({bundleId:(r=t).id,createTime:fn(Yn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return SM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Mp(o.bundledQuery),readTime:gs(o.readTime)};var o})}saveNamedQuery(e,t){return SM(e).put({name:(r=t).name,readTime:fn(Yn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ly(n){return K(n,"bundles")}function SM(n){return K(n,"namedQueries")}class lD{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new lD(e,t.uid||"")}getOverlay(e,t){return O0(e).get(ay(this.userId,t)).next(r=>r?xp(this.Tt,r):null)}getOverlays(e,t){const r=wo();return te.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new $e(t,d);o.push(this.ce(e,m))}),te.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ai(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(O0(e).Y("collectionPathOverlayIndex",m))}),te.waitFor(u)}getOverlaysForCollection(e,t,r){const o=wo(),u=Ai(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return O0(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const b=xp(this.Tt,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=wo();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return O0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,S)=>{const N=xp(this.Tt,b);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):S.done()}).next(()=>u)}ce(e,t){return O0(e).put(function(r,o,u){const[d,m,w]=ay(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Sp(r.oe,u.mutation)}}(this.Tt,this.userId,t))}}function O0(n){return K(n,"documentOverlays")}class Rp{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(bn(e.integerValue));else if("doubleValue"in e){const r=bn(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),mp(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(fc(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?t0(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):rt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const o of Object.keys(r))this.we(o,t),this.he(r[o],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const o of r)this.he(o,t)}ye(e,t){this.fe(t,37),Ge.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function aN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function MM(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=aN(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Rp.Ee=new Rp;class uN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const o=t.codePointAt(0);this.Re(240|o>>>18),this.Re(128|63&o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Ve()}Ce(e){const t=this.xe(e),r=MM(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}ke(e){const t=this.xe(e),r=MM(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class lN{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class cN{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class P0{constructor(){this.Le=new uN,this.qe=new lN(this.Le),this.Ue=new cN(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Np{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Np(this.indexId,this.documentKey,this.arrayValue,r)}}function mh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=xM(n.arrayValue,e.arrayValue),0!==t?t:(t=xM(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function xM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){yt(e.collectionGroup===this.collectionId);const t=lc(e);if(void 0!==t&&!this.He(t))return!1;const r=cc(e);let o=0,u=0;for(;o<r.length&&this.He(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.ze){const d=r[o];if(!this.Je(this.ze,d)||!this.Ye(this.Qe[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Qe.length||!this.Ye(this.Qe[u++],d))return!1}return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function RM(n){var e,t;if(yt(n instanceof Xt||n instanceof gn),n instanceof Xt){if(n instanceof l0){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Xt.create(n.field,"==",u)))||[];return gn.create(o,"or")}return n}const r=n.filters.map(o=>RM(o));return gn.create(r,n.op)}function hN(n){if(0===n.getFilters().length)return[];const e=TT(RM(n));return yt(NM(e)),bT(e)||CT(e)?[e]:e.getFilters()}function bT(n){return n instanceof Xt}function CT(n){return n instanceof gn&&Zm(n)}function NM(n){return bT(n)||CT(n)||function(e){if(e instanceof gn&&n0(e)){for(const t of e.getFilters())if(!bT(t)&&!CT(t))return!1;return!0}return!1}(n)}function TT(n){if(yt(n instanceof Xt||n instanceof gn),n instanceof Xt)return n;if(1===n.filters.length)return TT(n.filters[0]);const e=n.filters.map(r=>TT(r));let t=gn.create(e,n.op);return t=cD(t),NM(t)?t:(yt(t instanceof gn),yt(ih(t)),yt(t.filters.length>1),t.filters.reduce((r,o)=>AT(r,o)))}function AT(n,e){let t;return yt(n instanceof Xt||n instanceof gn),yt(e instanceof Xt||e instanceof gn),t=n instanceof Xt?e instanceof Xt?gn.create([n,e],"and"):OM(n,e):e instanceof Xt?OM(e,n):function(r,o){if(yt(r.filters.length>0&&o.filters.length>0),ih(r)&&ih(o))return a0(r,o.getFilters());const u=n0(r)?r:o,d=n0(r)?o:r,m=u.filters.map(w=>AT(w,d));return gn.create(m,"or")}(n,e),cD(t)}function OM(n,e){if(ih(e))return a0(e,n.getFilters());{const t=e.filters.map(r=>AT(n,r));return gn.create(t,"or")}}function cD(n){if(yt(n instanceof Xt||n instanceof gn),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return cD(e[0]);if(r0(n))return n;const t=e.map(o=>cD(o)),r=[];return t.forEach(o=>{o instanceof Xt?r.push(o):o instanceof gn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:gn.create(r,n.op)}class fN{constructor(){this.Ze=new ST}addToCollectionParentIndex(e,t){return this.Ze.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(cs.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class ST{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Cn(sn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Cn(sn.comparator)).toArray()}}const dD=new Uint8Array(0);class pN{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new ST,this.tn=new qa(r=>Xo(r),(r,o)=>oh(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ai(o)};return PM(e).put(u)}return te.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[j_(t),""],!1,!0);return PM(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Wa(d.parent))}return r})}addFieldIndex(e,t){const r=hD(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=F0(e);return u.next(m=>{d.put(uy(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=hD(e),o=F0(e),u=k0(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=k0(e);let o=!0;const u=new Map;return te.forEach(this.en(t),d=>this.nn(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=$t();const m=[];return te.forEach(u,(w,b)=>{var S;Oe("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Nt=>`${Nt.fieldPath}:${Nt.kind}`).join(",")}`} to execute ${Xo(t)}`);const N=function(Nt,Ht){const Lt=lc(Ht);if(void 0===Lt)return null;for(const Wt of d0(Nt,Lt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(b,w),j=function(Nt,Ht){const Lt=new Map;for(const Wt of cc(Ht))for(const yi of d0(Nt,Wt.fieldPath))switch(yi.op){case"==":case"in":Lt.set(Wt.fieldPath.canonicalString(),yi.value);break;case"not-in":case"!=":return Lt.set(Wt.fieldPath.canonicalString(),yi.value),Array.from(Lt.values())}return null}(b,w),Z=function(Nt,Ht){const Lt=[];let Wt=!0;for(const yi of cc(Ht)){const bh=0===yi.kind?Qm(Nt,yi.fieldPath,Nt.startAt):h0(Nt,yi.fieldPath,Nt.startAt);Lt.push(bh.value),Wt&&(Wt=bh.inclusive)}return new $a(Lt,Wt)}(b,w),de=function(Nt,Ht){const Lt=[];let Wt=!0;for(const yi of cc(Ht)){const bh=0===yi.kind?h0(Nt,yi.fieldPath,Nt.endAt):Qm(Nt,yi.fieldPath,Nt.endAt);Lt.push(bh.value),Wt&&(Wt=bh.inclusive)}return new $a(Lt,Wt)}(b,w),Ne=this.sn(w,b,Z),Le=this.sn(w,b,de),Vt=this.rn(w,b,j),Zt=this.on(w.indexId,N,Ne,Z.inclusive,Le,de.inclusive,Vt);return te.forEach(Zt,Nt=>r.J(Nt,t.limit).next(Ht=>{Ht.forEach(Lt=>{const Wt=Ge.fromSegments(Lt.documentKey);d.has(Wt)||(d=d.add(Wt),m.push(Wt))})}))}).next(()=>m)}return te.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:hN(gn.create(e.filters,"and")).map(r=>Ym(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),S=[];for(let N=0;N<w;++N){const j=t?this.un(t[N/b]):dD,Z=this.cn(e,j,r[N%b],o),de=this.an(e,j,u[N%b],d),Ne=m.map(Le=>this.cn(e,j,Le,!0));S.push(...this.createRange(Z,de,Ne))}return S}cn(e,t,r,o){const u=new Np(e,Ge.empty(),t,r);return o?u:u.Ge()}an(e,t,r,o){const u=new Np(e,Ge.empty(),t,r);return o?u.Ge():u}nn(e,t){const r=new dN(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;const o=this.en(t);return te.forEach(o,u=>this.nn(e,u).next(d=>{d?0!==r&&d.fields.length<function(m){let w=new Cn(nr.comparator),b=!1;for(const S of m.filters)for(const N of S.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const S of m.orderBy)S.field.isKeyField()||(w=w.add(S.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}hn(e,t){const r=new P0;for(const o of cc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ke(o.kind);Rp.Ee.ae(u,d)}return r.Be()}un(e){const t=new P0;return Rp.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new P0;return Rp.Ee.ae(gc(this.databaseId,t),r.Ke(function(o){const u=cc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let o=[];o.push(new P0);let u=0;for(const d of cc(e)){const m=r[u++];for(const w of o)if(this.fn(t,d.fieldPath)&&nh(m))o=this.dn(o,d,m);else{const b=w.Ke(d.kind);Rp.Ee.ae(m,b)}}return this._n(o)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new P0;w.seed(m.Be()),Rp.Ee.ae(d,w.Ke(t.kind)),u.push(w)}return u}fn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=hD(e),o=F0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return te.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(b,S){const N=S?new dc(S.sequenceNumber,new cs(gs(S.readTime),new Ge(Wa(S.documentKey)),S.largestBatchId)):dc.empty(),j=b.fields.map(([Z,de])=>new ls(nr.fromServerFormat(Z),de));return new Hm(b.indexId,b.collectionGroup,j,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:kt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=hD(e),u=F0(e);return this.wn(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>te.forEach(m,w=>u.put(uy(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?te.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),te.forEach(m,w=>this.mn(e,o,w).next(b=>{const S=this.gn(u,w);return b.isEqual(S)?te.resolve():this.yn(e,u,w,b,S)}))))})}pn(e,t,r,o){return k0(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,o){return k0(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const o=k0(e);let u=new Cn(mh);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(d,m)=>{u=u.add(new Np(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}gn(e,t){let r=new Cn(mh);const o=this.hn(t,e);if(null==o)return r;const u=lc(t);if(null!=u){const d=e.data.field(u.fieldPath);if(nh(d))for(const m of d.arrayValue.values||[])r=r.add(new Np(t.indexId,e.key,this.un(m),o))}else r=r.add(new Np(t.indexId,e.key,dD,o));return r}yn(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,b,S,N){const j=m.getIterator(),Z=w.getIterator();let de=wp(j),Ne=wp(Z);for(;de||Ne;){let Le=!1,Vt=!1;if(de&&Ne){const Zt=b(de,Ne);Zt<0?Vt=!0:Zt>0&&(Le=!0)}else null!=de?Vt=!0:Le=!0;Le?(S(Ne),Ne=wp(Z)):Vt?(N(de),de=wp(j)):(de=wp(j),Ne=wp(Z))}}(o,u,mh,m=>{d.push(this.pn(e,t,r,m))},m=>{d.push(this.In(e,t,r,m))}),te.waitFor(d)}wn(e){let t=1;return F0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>mh(d,m)).filter((d,m,w)=>!m||0!==mh(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=mh(d,e),w=mh(d,t);if(0===m)o[0]=e.Ge();else if(m>0&&w<0)o.push(d),o.push(d.Ge());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2){if(this.Tn(o[d],o[d+1]))return[];u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,dD,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,dD,[]]))}return u}Tn(e,t){return mh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kM)}getMinOffset(e,t){return te.mapArray(this.en(t),r=>this.nn(e,r).next(o=>o||rt())).next(kM)}}function PM(n){return K(n,"collectionParents")}function k0(n){return K(n,"indexEntries")}function hD(n){return K(n,"indexConfiguration")}function F0(n){return K(n,"indexState")}function kM(n){yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;H_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new cs(e.readTime,e.documentKey,t)}const FM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hs(e,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function LM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:d},(S,N,j)=>(m++,j.delete()));u.push(w.next(()=>{yt(1===m)}));const b=[];for(const S of t.mutations){const N=IT(e,S.key.path,t.batchId);u.push(o.delete(N)),b.push(S.key)}return te.waitFor(u).next(()=>b)}function fD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(41943040,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);class pD{constructor(e,t,r,o){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=o,this.En={}}static ue(e,t,r,o){yt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new pD(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).X({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=cy(e),d=yh(e);return d.add({}).next(m=>{yt("number"==typeof m);const w=new me(m,t,r,o),b=function(j,Z,de){const Ne=de.baseMutations.map(Vt=>Sp(j.oe,Vt)),Le=de.mutations.map(Vt=>Sp(j.oe,Vt));return{userId:Z,batchId:de.batchId,localWriteTimeMs:de.localWriteTime.toMillis(),baseMutations:Ne,mutations:Le}}(this.Tt,this.userId,w),S=[];let N=new Cn((j,Z)=>kt(j.canonicalString(),Z.canonicalString()));for(const j of o){const Z=IT(this.userId,j.key.path,m);N=N.add(j.key.path.popLast()),S.push(d.put(b)),S.push(u.put(Z,EM))}return N.forEach(j=>{S.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.En[m]=w.keys()}),te.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return yh(e).get(t).next(r=>r?(yt(r.userId===this.userId),Ka(this.Tt,r)):null)}An(e,t){return this.En[t]?te.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.En[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yh(e).X({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(yt(m.batchId>=r),u=Ka(this.Tt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).W("userMutationsIndex",t).next(r=>r.map(o=>Ka(this.Tt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=R0(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return cy(e).X({range:o},(d,m,w)=>{const[b,S,N]=d,j=Wa(S);if(b===this.userId&&t.path.isEqual(j))return yh(e).get(N).next(Z=>{if(!Z)throw rt();yt(Z.userId===this.userId),u.push(Ka(this.Tt,Z))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(kt);const o=[];return t.forEach(u=>{const d=R0(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=cy(e).X({range:m},(b,S,N)=>{const[j,Z,de]=b,Ne=Wa(Z);j===this.userId&&u.path.isEqual(Ne)?r=r.add(de):N.done()});o.push(w)}),te.waitFor(o).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=R0(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new Cn(kt);return cy(e).X({range:d},(w,b,S)=>{const[N,j,Z]=w,de=Wa(j);N===this.userId&&r.isPrefixOf(de)?de.length===o&&(m=m.add(Z)):S.done()}).next(()=>this.Rn(e,m))}Rn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(yh(e).get(u).next(d=>{if(null===d)throw rt();yt(d.userId===this.userId),r.push(Ka(this.Tt,d))}))}),te.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return LM(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),te.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return cy(e).X({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Wa(u[1]);o.push(w)}else m.done()}).next(()=>{yt(0===o.length)})})}containsKey(e,t){return VM(e,this.userId,t)}vn(e){return UM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VM(n,e,t){const r=R0(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return cy(n).X({range:u,Z:!0},(m,w,b)=>{const[S,N,j]=m;S===e&&N===o&&(d=!0),b.done()}).next(()=>d)}function yh(n){return K(n,"mutations")}function cy(n){return K(n,"documentMutations")}function UM(n){return K(n,"mutationQueues")}class Op{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new Op(0)}static Sn(){return new Op(-1)}}class gN{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new Op(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>_t.fromTimestamp(new Bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Cn(e,o)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dy(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return dy(e).X((d,m)=>{const w=Ic(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>te.waitFor(u)).next(()=>o)}forEachTarget(e,t){return dy(e).X((r,o)=>{const u=Ic(o);t(u)})}Dn(e){return BM(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}Cn(e,t){return BM(e).put("targetGlobalKey",t)}xn(e,t){return dy(e).put(oy(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xo(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return dy(e).X({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const b=Ic(m);oh(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=vh(e);return t.forEach(d=>{const m=Ai(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),te.waitFor(o)}removeMatchingKeys(e,t,r){const o=vh(e);return te.forEach(t,u=>{const d=Ai(u.path);return te.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=vh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=vh(e);let u=$t();return o.X({range:r,Z:!0},(d,m,w)=>{const b=Wa(d[1]),S=new Ge(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ai(t.path),o=IDBKeyRange.bound([r],[j_(r)],!1,!0);let u=0;return vh(e).X({index:"documentTargetsIndex",Z:!0,range:o},([d,m],w,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}ie(e,t){return dy(e).get(t).next(r=>r?Ic(r):null)}}function dy(n){return K(n,"targets")}function BM(n){return K(n,"targetGlobal")}function vh(n){return K(n,"targetDocuments")}function jM([n,e],[t,r]){const o=kt(n,t);return 0===o?kt(e,r):o}class mN{constructor(e){this.kn=e,this.buffer=new Cn(jM),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Wu(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qu(r)}yield t.Bn(3e5)}))}}class vN{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(hs.at);const r=new mN(t);return this.Ln.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.Ln.Un(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(FM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FM):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,o,u,d,m,w,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),V_()<=Lu.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-S}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class _N{constructor(e,t){this.db=e,this.garbageCollector=new vN(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,o)=>t(o))}addReference(e,t,r){return gD(e,r)}removeReference(e,t,r){return gD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gD(e,t)}jn(e,t){return function(r,o){let u=!1;return UM(r).tt(d=>VM(r,d,o).next(m=>(m&&(u=!0),te.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Qn(e,(d,m)=>{if(m<=t){const w=this.jn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),vh(e).delete([0,Ai(d.path)])))});o.push(w)}}).next(()=>te.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gD(e,t)}Qn(e,t){const r=vh(e);let o,u=hs.at;return r.X({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:b})=>{0===d?(u!==hs.at&&t(new Ge(Wa(o)),u),u=b,o=w):u=hs.at}).next(()=>{u!==hs.at&&t(new Ge(Wa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gD(n,e){return vh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ai(e.path),sequenceNumber:r}));var r}class $M{constructor(){this.changes=new qa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wN{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Pp(e).put(r)}removeEntry(e,t,r){return Pp(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],on(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=vn.newInvalidDocument(t);return Pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(L0(t))},(o,u)=>{r=this.Wn(t,u)}).next(()=>r)}Hn(e,t){let r={size:0,document:vn.newInvalidDocument(t)};return Pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(L0(t))},(o,u)=>{r={document:this.Wn(t,u),size:fD(u)}}).next(()=>r)}getEntries(e,t){let r=Ti();return this.Jn(e,t,(o,u)=>{const d=this.Wn(o,u);r=r.insert(o,d)}).next(()=>r)}Yn(e,t){let r=Ti(),o=new Zn(Ge.comparator);return this.Jn(e,t,(u,d)=>{const m=this.Wn(u,d);r=r.insert(u,m),o=o.insert(u,fD(d))}).next(()=>({documents:r,Zn:o}))}Jn(e,t,r){if(t.isEmpty())return te.resolve();let o=new Cn(qM);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(L0(o.first()),L0(o.last())),d=o.getIterator();let m=d.getNext();return Pp(e).X({index:"documentKeyIndex",range:u},(w,b,S)=>{const N=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&qM(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?S.j(L0(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),on(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pp(e).W(IDBKeyRange.bound(d,m,!0)).next(w=>{let b=Ti();for(const S of w){const N=this.Wn(Ge.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);N.isFoundDocument()&&(Jm(t,N)||o.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=Ti();const d=zM(t,r),m=zM(t,cs.max());return Pp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,b,S)=>{const N=this.Wn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new EN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return GM(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}zn(e,t){return GM(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function Se(n,e){let t;if(e.document)t=T0(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),o=gs(e.noDocument.readTime);t=vn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=Ge.fromSegments(e.unknownDocument.path),o=gs(e.unknownDocument.version);t=vn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Bn(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return vn.newInvalidDocument(e)}}function HM(n){return new wN(n)}class EN extends $M{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new qa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Cn((u,d)=>kt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.ts.get(u);if(t.push(this.Xn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=Mt(this.Xn.Tt,d);o=o.add(u.path.popLast()),r+=fD(w)-m.size,t.push(this.Xn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Mt(this.Xn.Tt,d.convertToNoDocument(_t.min()));t.push(this.Xn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Xn.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:o})=>(o.forEach((u,d)=>{this.ts.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function GM(n){return K(n,"remoteDocumentGlobal")}function Pp(n){return K(n,"remoteDocumentsV14")}function L0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zM(n,e){const t=e.documentKey.path.toArray();return[n,on(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=kt(t[u],r[u]),o)return o;return o=kt(t.length,r.length),o||(o=kt(t[t.length-2],r[r.length-2]),o||kt(t[t.length-1],r[r.length-1]))}class IN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WM{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&ps(r.mutation,o,fs.empty(),Bn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const o=wo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Yu();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=Ti();const d=hh(),m=hh();return t.forEach((w,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof za)?u=u.insert(b.key,b):void 0!==S?(d.set(b.key,S.mutation.getFieldMask()),ps(S.mutation,b,S.mutation.getFieldMask(),Bn.now())):d.set(b.key,fs.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,S)=>d.set(b,S)),t.forEach((b,S)=>{var N;return m.set(b,new IN(S,null!==(N=d.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=hh();let o=new Zn((d,m)=>d-m),u=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let S=r.get(w)||fs.empty();S=m.applyToLocalView(b,S),r.set(w,S);const N=(o.get(m.batchId)||$t()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,S=w.value,N=JI();S.forEach(j=>{if(!u.has(j)){const Z=w0(t.get(j),r.get(j));null!==Z&&N.set(j,Z),u=u.add(j)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,N))}return te.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ah(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):te.resolve(wo());let m=-1,w=u;return d.next(b=>te.forEach(b,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?te.resolve():this.remoteDocumentCache.getEntry(e,S).next(j=>{w=w.insert(S,j)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,$t())).next(S=>({batchId:m,changes:Cp(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let o=Yu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Yu();return this.indexManager.getCollectionParents(e,o).next(d=>te.forEach(d,m=>{const w=(b=t,S=m.child(o),new Ha(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,vn.newInvalidDocument(b)))});let d=Yu();return u.forEach((m,w)=>{const b=o.get(m);void 0!==b&&ps(b.mutation,w,fs.empty(),Bn.now()),Jm(t,w)&&(d=d.insert(m,w))}),d})}}class DN{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return te.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:Yn(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:Mp(r.bundledQuery),readTime:Yn(r.readTime)}),te.resolve();var r}}class bN{constructor(){this.overlays=new Zn(Ge.comparator),this.ss=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wo();return te.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ce(e,t,u)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ss.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ss.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const o=wo(),u=t.length+1,d=new Ge(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Zn((b,S)=>b-S);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=wo(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=wo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=o)););return te.resolve(m)}ce(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.ss.get(o.largestBatchId).delete(r.key);this.ss.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new $e(t,r));let u=this.ss.get(t);void 0===u&&(u=$t(),this.ss.set(t,u)),this.ss.set(t,u.add(r.key))}}class MT{constructor(){this.rs=new Cn(mi.os),this.us=new Cn(mi.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new mi(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new mi(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new Ge(new sn([])),r=new mi(t,e),o=new mi(t,e+1),u=[];return this.us.forEachInRange([r,o],d=>{this.ls(d),u.push(d.key)}),u}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new Ge(new sn([])),r=new mi(t,e),o=new mi(t,e+1);let u=$t();return this.us.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new mi(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return Ge.comparator(e.key,t.key)||kt(e.gs,t.gs)}static cs(e,t){return kt(e.gs,t.gs)||Ge.comparator(e.key,t.key)}}class CN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Cn(mi.os)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ys;this.ys++;const d=new me(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.ps=this.ps.add(new mi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(d)}lookupMutationBatch(e,t){return te.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ts(t+1),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),o=new mi(t,Number.POSITIVE_INFINITY),u=[];return this.ps.forEachInRange([r,o],d=>{const m=this.Is(d.gs);u.push(m)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(kt);return t.forEach(o=>{const u=new mi(o,0),d=new mi(o,Number.POSITIVE_INFINITY);this.ps.forEachInRange([u,d],m=>{r=r.add(m.gs)})}),te.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new mi(new Ge(u),0);let m=new Cn(kt);return this.ps.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w.gs)),!0)},d),te.resolve(this.Es(m))}Es(e){const t=[];return e.forEach(r=>{const o=this.Is(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){yt(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return te.forEach(t.mutations,o=>{const u=new mi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new mi(t,0),o=this.ps.firstAfterOrEqual(r);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return te.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TN{constructor(e){this.Rs=e,this.docs=new Zn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():vn.newInvalidDocument(o))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Ti();const d=t.path,m=new Ge(d.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:S}}=w.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||H_(xI(S),r)<=0||(o.has(S.key)||Jm(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,t,r,o){rt()}Ps(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AN(this)}getSize(e){return te.resolve(this.size)}}class AN extends $M{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Xn.addEntry(e,o)):this.Xn.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class SN{constructor(e){this.persistence=e,this.vs=new qa(t=>Xo(t),oh),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.bs=0,this.Vs=new MT,this.targetCount=0,this.Ss=Op.Vn()}forEachTarget(e,t){return this.vs.forEach((r,o)=>t(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),te.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Op(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.xn(t),te.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.vs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.vs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.Vs.containsKey(t))}}class KM{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new hs(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new SN(this),this.indexManager=new fN,this.remoteDocumentCache=new TN(r=>this.referenceDelegate.ks(r)),this.Tt=new It(t),this.$s=new DN(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new CN(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new MN(this.Cs.next());return this.referenceDelegate.Ms(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Fs(e,t){return te.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class MN extends fp{constructor(e){super(),this.currentSequenceNumber=e}}class mD{constructor(e){this.persistence=e,this.Bs=new MT,this.Ls=null}static qs(e){return new mD(e)}get Us(){if(this.Ls)return this.Ls;throw rt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),te.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(o=>this.Us.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Us.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Us,r=>{const o=Ge.fromPath(r);return this.Ks(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return te.or([()=>te.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class xN{constructor(e){this.Tt=e}F(e,t,r,o){const u=new pp("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0}),m.createObjectStore("documentMutations"),ZM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=te.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),ZM(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ET,{unique:!0});const S=w.store("mutations"),N=b.map(j=>S.put(j));return te.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Gs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(u)))),r<7&&o>=7&&(d=d.next(()=>this.js(u))),r<8&&o>=8&&(d=d.next(()=>this.zs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Ws(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:c});w.createIndex("collectionPathOverlayIndex",f,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",v,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:DT});w.createIndex("documentKeyIndex",IM),w.createIndex("collectionGroupIndex",DM)}(e)).next(()=>this.Hs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.Js(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:i}).createIndex("sequenceNumberIndex",s,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:a}).createIndex("documentKeyIndex",l,{unique:!1})}(e))),d}Qs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=fD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>te.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>te.forEach(m,w=>{yt(w.userId===u.userId);const b=Ka(this.Tt,w);return LM(e,u.userId,b).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((d,m)=>{const w=new sn(d),b=[0,Ai(w)];u.push(t.get(b).next(S=>S?te.resolve():t.put({targetId:0,path:Ai(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>te.waitFor(u))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:AM});const r=t.store("collectionParents"),o=new ST,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Ai(w)})}};return t.store("remoteDocuments").X({Z:!0},(d,m)=>{const w=new sn(d);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([d,m,w],b)=>{const S=Wa(m);return u(S.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,o)=>{const u=Ic(o),d=oy(this.Tt,u);return t.put(d)})}Hs(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(b=d,b.document?new Ge(sn.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(S))}).next(()=>te.waitFor(o))}Js(e,t){const r=t.store("mutations"),o=HM(this.Tt),u=new KM(mD.qs,this.Tt.oe);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var b;let S=null!==(b=m.get(w.userId))&&void 0!==b?b:$t();Ka(this.Tt,w).keys().forEach(N=>S=S.add(N)),m.set(w.userId,S)}),te.forEach(m,(w,b)=>{const S=new Nr(b),N=lD.ue(this.Tt,S),j=u.getIndexManager(S),Z=pD.ue(S,this.Tt,j,u.referenceDelegate);return new WM(o,Z,N,j).recalculateAndSaveOverlaysForDocumentKeys(new H(t,hs.at),w).next()})})}}function ZM(n){n.createObjectStore("targetDocuments",{keyPath:CM}).createIndex("documentTargetsIndex",TM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bM,{unique:!0}),n.createObjectStore("targetGlobal")}const xT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RT{constructor(e,t,r,o,u,d,m,w,b,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=u,this.window=d,this.document=m,this.Zs=b,this.Xs=S,this.ti=N,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=j=>Promise.resolve(),!RT.C())throw new xe(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _N(this,o),this.oi=t+"main",this.Tt=new It(w),this.ui=new ds(this.oi,this.ti,new xN(this.Tt)),this.Ns=new gN(this.referenceDelegate,this.Tt),this.remoteDocumentCache=HM(this.Tt),this.$s=new N0,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===S&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(se.FAILED_PRECONDITION,xT);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new hs(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,pe.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Wu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return V0(e).get("owner").next(t=>te.resolve(this.yi(t)))}pi(e){return yD(e).delete(this.clientId)}Ii(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=K(r,"clientMetadata");return o.W().next(u=>{const d=e.Ei(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return te.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?te.resolve(!0):V0(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new xe(se.FAILED_PRECONDITION,xT);return!1}}return!(!this.networkEnabled||!this.inForeground)||yD(e).W().next(r=>void 0===this.Ei(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new H(t,hs.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>yD(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return pD.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pN(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return lD.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.ti)?P:14===d?x:13===d?T:12===d?I:11===d?E:void rt();var d;let m;return this.ui.runTransaction(e,o,u,w=>(m=new H(w,this.Cs?this.Cs.next():hs.at),"readwrite-primary"===t?this._i(m).next(b=>!!b||this.wi(m)).next(b=>{if(!b)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new xe(se.FAILED_PRECONDITION,hp);return r(m)}).next(b=>this.gi(m).next(()=>b)):this.Di(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Di(e){return V0(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(se.FAILED_PRECONDITION,xT)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return V0(e).put("owner",t)}static C(){return ds.C()}mi(e){const t=V0(e);return t.get("owner").next(r=>this.yi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,rn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function V0(n){return K(n,"owner")}function yD(n){return K(n,"clientMetadata")}function NT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class OT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=o}static Ni(e,t){let r=$t(),o=$t();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new OT(e,t.fromCache,r,o)}}class YM{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Mi(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Fi(e,t))}Mi(e,t){if(XC(t))return te.resolve(null);let r=Ki(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=g0(t,null,"F"),r=Ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=$t(...u);return this.$i.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Bi(t,m);return this.Li(t,b,d,w.readTime)?this.Mi(e,g0(t,null,"F")):this.qi(e,b,t,w)}))})))}Oi(e,t,r,o){return XC(t)||o.isEqual(_t.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(u=>{const d=this.Bi(t,u);return this.Li(t,d,r,o)?this.Fi(e,t):(V_()<=Lu.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),m0(t)),this.qi(e,d,t,Jd(o,-1)))})}Bi(e,t){let r=new Cn(y0(e));return t.forEach((o,u)=>{Jm(e,u)&&(r=r.add(u))}),r}Li(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Fi(e,t){return V_()<=Lu.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",m0(t)),this.$i.getDocumentsMatchingQuery(e,t,cs.min())}qi(e,t,r,o){return this.$i.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class RN{constructor(e,t,r,o){this.persistence=e,this.Ui=t,this.Tt=o,this.Ki=new Zn(kt),this.Gi=new qa(u=>Xo(u),oh),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WM(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function QM(n,e,t,r){return new RN(n,e,t,r)}function XM(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,pe.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=$t();for(const b of o){d.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}for(const b of u){m.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(b=>({Wi:b,removedBatchIds:d,addedBatchIds:m}))})})}),PT.apply(this,arguments)}function NN(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ji.newChangeBuffer({trackRemovals:!0});return function(d,m,w,b){const S=w.batch,N=S.keys();let j=te.resolve();return N.forEach(Z=>{j=j.next(()=>b.getEntry(m,Z)).next(de=>{const Ne=w.docVersions.get(Z);yt(null!==Ne),de.version.compareTo(Ne)<0&&(S.applyToRemoteDocument(de,w),de.isValidDocument()&&(de.setReadTime(w.commitVersion),b.addEntry(de)))})}),j.next(()=>d.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=$t();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function JM(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function ON(n,e){const t=ze(n),r=e.snapshotVersion;let o=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ji.newChangeBuffer({trackRemovals:!0});o=t.Ki;const m=[];e.targetChanges.forEach((S,N)=>{const j=o.get(N);if(!j)return;m.push(t.Ns.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Ns.addMatchingKeys(u,S.addedDocuments,N)));let Z=j.withSequenceNumber(u.currentSequenceNumber);var de,Ne,Le;e.targetMismatches.has(N)?Z=Z.withResumeToken(Ir.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):S.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(S.resumeToken,r)),o=o.insert(N,Z),Ne=Z,Le=S,(0===(de=j).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-de.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&m.push(t.Ns.updateTargetData(u,Z))});let w=Ti(),b=$t();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(ex(u,d,e.documentUpdates).next(S=>{w=S.Hi,b=S.Ji})),!r.isEqual(_t.min())){const S=t.Ns.getLastRemoteSnapshotVersion(u).next(N=>t.Ns.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return te.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ki=o,u))}function ex(n,e,t){let r=$t(),o=$t();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Ti();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(_t.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{Hi:d,Ji:o}})}function PN(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hy(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ns.getTargetData(r,e).next(u=>u?(o=u,te.resolve(o)):t.Ns.allocateTargetId(r).next(d=>(o=new Xe(e,d,0,r.currentSequenceNumber),t.Ns.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ki.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function fy(n,e,t){return kT.apply(this,arguments)}function kT(){return kT=(0,pe.Z)(function*(n,e,t){const r=ze(n),o=r.Ki.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Wu(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(o.target)}),kT.apply(this,arguments)}function vD(n,e,t){const r=ze(n);let o=_t.min(),u=$t();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,b){const S=ze(m),N=S.Gi.get(b);return void 0!==N?te.resolve(S.Ki.get(N)):S.Ns.getTargetData(w,b)}(r,d,Ki(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Ui.getDocumentsMatchingQuery(d,e,t?o:_t.min(),t?u:$t())).next(m=>(rx(r,HI(e),m),{documents:m,Yi:u})))}function tx(n,e){const t=ze(n),r=ze(t.Ns),o=t.Ki.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ie(u,e).next(d=>d?d.target:null))}function nx(n,e){const t=ze(n),r=t.Qi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ji.getAllFromCollectionGroup(o,e,Jd(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(rx(t,e,o),o))}function rx(n,e,t){let r=n.Qi.get(e)||_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Qi.set(e,r)}function FT(){return FT=(0,pe.Z)(function*(n,e,t,r){const o=ze(n);let u=$t(),d=Ti();for(const b of t){const S=e.Zi(b.metadata.name);b.document&&(u=u.add(S));const N=e.Xi(b);N.setReadTime(e.tr(b.metadata.readTime)),d=d.insert(S,N)}const m=o.ji.newChangeBuffer({trackRemovals:!0}),w=yield hy(o,(b=r,Ki(Ip(sn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>ex(b,m,d).next(S=>(m.apply(b),S)).next(S=>o.Ns.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Ns.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.Hi,S.Ji)).next(()=>S.Hi)))}),FT.apply(this,arguments)}function FN(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,pe.Z)(function*(n,e,t=$t()){const r=yield hy(n,Ki(Mp(e.bundledQuery))),o=ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Yn(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.$s.saveNamedQuery(u,e);const m=r.withResumeToken(Ir.EMPTY_BYTE_STRING,d);return o.Ki=o.Ki.insert(m.targetId,m),o.Ns.updateTargetData(u,m).next(()=>o.Ns.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Ns.addMatchingKeys(u,t,r.targetId)).next(()=>o.$s.saveNamedQuery(u,e))})}),LT.apply(this,arguments)}function ix(n,e){return`firestore_clients_${n}_${e}`}function sx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function VT(n,e){return`firestore_targets_${n}_${e}`}class _D{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static er(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new _D(e,t,o.state,u):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class U0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new U0(e,r.state,o):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=C0();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Y_(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new wD(e,u):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class UT{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new UT(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class BT{constructor(){this.activeTargetIds=C0()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jT{constructor(e,t,r,o,u){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Zn(kt),this.started=!1,this.hr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.lr=ix(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new BT),this._r=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.Si();for(const o of t){if(o===e.rr)continue;const u=e.getItem(ix(e.persistenceKey,o));if(u){const d=wD.er(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const o=e.Ir(r);o&&e.Tr(o)}for(const o of e.hr)e.cr(o);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(VT(this.persistenceKey,e));if(r){const o=U0.er(e,r);o&&(t=o.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(VT(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Rr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const o=t.Sr(r.key);return t.Dr(o,null)}{const o=t.Cr(r.key,r.newValue);if(o)return t.Dr(o.clientId,o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const o=t.$r(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.gr){if(null!==r.newValue){const o=t.Ir(r.newValue);if(o)return t.Tr(o)}}else if(r.key===t.dr){const o=function(u){let d=hs.at;if(null!=u)try{const m=JSON.parse(u);yt("number"==typeof m),d=m}catch(m){Er("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==hs.at&&t.sequenceNumberHandler(o)}else if(r.key===t.yr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const o=new _D(this.currentUser,e,t,r),u=sx(this.persistenceKey,this.currentUser,e);this.setItem(u,o.nr())}Rr(e){const t=sx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const o=VT(this.persistenceKey,e),u=new U0(e,t,r);this.setItem(o,u.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return wD.er(r,t)}Nr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return _D.er(new Nr(void 0!==r[2]?r[2]:null),o,t)}$r(e,t){const r=this.mr.exec(e),o=Number(r[1]);return U0.er(o,t)}Ir(e){return UT.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Er(this.ar),u=this.Er(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.qr(d,m).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=C0();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class ox{constructor(){this.Ur=new BT,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new BT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class LN{Gr(e){}shutdown(){}}class ax{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ED=null;function $T(){return null===ED?ED=268435456+Math.round(2147483648*Math.random()):ED++,"0x"+ED.toString(16)}const VN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UN{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const Zi="WebChannelConnection";class BN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,o,u){const d=$T(),m=this.fo(e,t);Oe("RestConnection",`Sending RPC '${e}' ${d}:`,m,r);const w={};return this._o(w,o,u),this.wo(e,m,w,r).then(b=>(Oe("RestConnection",`Received RPC '${e}' ${d}: `,b),b),b=>{throw zu("RestConnection",`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",r),b})}mo(e,t,r,o,u,d){return this.lo(e,t,r,o,u)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}fo(e,t){return`${this.co}/v1/${t}:${VN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,o){const u=$T();return new Promise((d,m)=>{const w=new TI;w.setWithCredentials(!0),w.listenOnce(P_.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case O_.NO_ERROR:const S=w.getResponseJson();Oe(Zi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),d(S);break;case O_.TIMEOUT:Oe(Zi,`RPC '${e}' ${u} timed out`),m(new xe(se.DEADLINE_EXCEEDED,"Request time out"));break;case O_.HTTP_ERROR:const N=w.getStatus();if(Oe(Zi,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let j=w.getResponseJson();Array.isArray(j)&&(j=j[0]);const Z=j?.error;if(Z&&Z.status&&Z.message){const de=function(Ne){const Le=Ne.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(Le)>=0?Le:se.UNKNOWN}(Z.status);m(new xe(de,Z.message))}else m(new xe(se.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new xe(se.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Oe(Zi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Oe(Zi,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",b,r,15)})}yo(e,t,r){const o=$T(),u=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=CI(),m=N_(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new F_({})),this._o(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const b=u.join("");Oe(Zi,`Creating RPC '${e}' stream ${o}: ${b}`,w);const S=d.createWebChannel(b,w);let N=!1,j=!1;const Z=new UN({Yr:Ne=>{j?Oe(Zi,`Not sending because RPC '${e}' stream ${o} is closed:`,Ne):(N||(Oe(Zi,`Opening RPC '${e}' stream ${o} transport.`),S.open(),N=!0),Oe(Zi,`RPC '${e}' stream ${o} sending:`,Ne),S.send(Ne))},Zr:()=>S.close()}),de=(Ne,Le,Vt)=>{Ne.listen(Le,Zt=>{try{Vt(Zt)}catch(Nt){setTimeout(()=>{throw Nt},0)}})};return de(S,dp.EventType.OPEN,()=>{j||Oe(Zi,`RPC '${e}' stream ${o} transport opened.`)}),de(S,dp.EventType.CLOSE,()=>{j||(j=!0,Oe(Zi,`RPC '${e}' stream ${o} transport closed`),Z.oo())}),de(S,dp.EventType.ERROR,Ne=>{j||(j=!0,zu(Zi,`RPC '${e}' stream ${o} transport errored:`,Ne),Z.oo(new xe(se.UNAVAILABLE,"The operation could not be completed")))}),de(S,dp.EventType.MESSAGE,Ne=>{var Le;if(!j){const Vt=Ne.data[0];yt(!!Vt);const Zt=Vt,Nt=Zt.error||(null===(Le=Zt[0])||void 0===Le?void 0:Le.error);if(Nt){Oe(Zi,`RPC '${e}' stream ${o} received error:`,Nt);const Ht=Nt.status;let Lt=function(yi){const bh=cr[yi];if(void 0!==bh)return D0(bh)}(Ht),Wt=Nt.message;void 0===Lt&&(Lt=se.INTERNAL,Wt="Unknown error status: "+Ht+" with message "+Nt.message),j=!0,Z.oo(new xe(Lt,Wt)),S.close()}else Oe(Zi,`RPC '${e}' stream ${o} received:`,Vt),Z.uo(Vt)}}),de(m,xC.STAT_EVENT,Ne=>{Ne.stat===k_.PROXY?Oe(Zi,`RPC '${e}' stream ${o} detected buffering proxy`):Ne.stat===k_.NOPROXY&&Oe(Zi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Z.ro()},0),Z}}function ux(){return typeof window<"u"?window:null}function ID(){return typeof document<"u"?document:null}function B0(n){return new hT(n,!0)}class HT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=o,this.To=u,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,o,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class lx{constructor(e,t,r,o,u,d,m,w){this.Ys=e,this.So=r,this.Do=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new HT(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,pe.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Co===t&&this.jo(r,o)},r=>{e(()=>{const o=new xe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(o)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(o=>{r(()=>this.zo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.ko.vo((0,pe.Z)(function*(){e.state=0,e.start()}))}zo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jN extends lx{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.Tt=u}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function yT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:rt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.yt?(yt(void 0===b||"string"==typeof b),Ir.fromBase64String(b||"")):(yt(void 0===b||b instanceof Uint8Array),Ir.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const b=void 0===w.code?se.UNKNOWN:D0(w.code);return new xe(b,w.message||"")}(d);t=new oT(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=$s(n,r.document.name),u=Yn(r.document.updateTime),d=r.document.createTime?Yn(r.document.createTime):_t.min(),m=new ri({mapValue:{fields:r.document.fields}}),w=vn.newFoundDocument(o,u,d,m);t=new ny(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=$s(n,r.document),u=r.readTime?Yn(r.readTime):_t.min(),d=vn.newNoDocument(o,u);t=new ny([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=$s(n,r.document);t=new ny([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new iT(r.count||0);t=new tD(r.targetId,u)}}var w;return t}(this.Tt,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?Yn(u.readTime):_t.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=iy(this.Tt),t.addTarget=function(o,u){let d;const m=u.target;return d=Ep(m)?{documents:S0(o,m)}:{query:sy(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Qu(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=wc(o,u.snapshotVersion.toTimestamp())),d}(this.Tt,e);const r=function vT(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=iy(this.Tt),t.removeTarget=e,this.qo(t)}}class $N extends lx{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.Tt=u,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function iD(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,o){let u=Yn(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=Yn(o)),new ZI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.eu(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=iy(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Sp(this.Tt,r))};this.qo(t)}}class HN extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=o,this.iu=!1}ru(){if(this.iu)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.lo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(se.UNKNOWN,o.toString())})}mo(e,t,r,o){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.mo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(se.UNKNOWN,u.toString())})}terminate(){this.iu=!0}}class zN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Er(t),this.cu=!1):Oe("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class qN{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=u,this.yu.Gr(m=>{r.enqueueAndForget((0,pe.Z)(function*(){var w;Dc(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,pe.Z)(function*(b){const S=ze(b);S.mu.add(4),yield py(S),S.pu.set("Unknown"),S.mu.delete(4),yield j0(S)}),function(b){return w.apply(this,arguments)})(d))}))}),this.pu=new zN(r,o)}}function j0(n){return zT.apply(this,arguments)}function zT(){return zT=(0,pe.Z)(function*(n){if(Dc(n))for(const e of n.gu)yield e(!0)}),zT.apply(this,arguments)}function py(n){return qT.apply(this,arguments)}function qT(){return qT=(0,pe.Z)(function*(n){for(const e of n.gu)yield e(!1)}),qT.apply(this,arguments)}function DD(n,e){const t=ze(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),ZT(t)?KT(t):my(t).Mo()&&WT(t,e))}function $0(n,e){const t=ze(n),r=my(t);t.wu.delete(e),r.Mo()&&cx(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Dc(t)&&t.pu.set("Unknown"))}function WT(n,e){n.Iu.Ot(e.targetId),my(n).Jo(e)}function cx(n,e){n.Iu.Ot(e),my(n).Yo(e)}function KT(n){n.Iu=new vM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),my(n).start(),n.pu.au()}function ZT(n){return Dc(n)&&!my(n).$o()&&n.wu.size>0}function Dc(n){return 0===ze(n).mu.size}function dx(n){n.Iu=void 0}function WN(n){return YT.apply(this,arguments)}function YT(){return YT=(0,pe.Z)(function*(n){n.wu.forEach((e,t)=>{WT(n,e)})}),YT.apply(this,arguments)}function KN(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,pe.Z)(function*(n,e){dx(n),ZT(n)?(n.pu.fu(e),KT(n)):n.pu.set("Unknown")}),QT.apply(this,arguments)}function ZN(n,e,t){return XT.apply(this,arguments)}function XT(){return XT=(0,pe.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof oT&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.wu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.wu.delete(m),o.Iu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bD(n,r)}else if(e instanceof ny?n.Iu.Qt(e):e instanceof tD?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(_t.min()))try{const r=yield JM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.Iu.ee(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.wu.get(w);b&&o.wu.set(w,b.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.wu.get(m);if(!w)return;o.wu.set(m,w.withResumeToken(Ir.EMPTY_BYTE_STRING,w.snapshotVersion)),cx(o,m);const b=new Xe(w.target,m,1,w.sequenceNumber);WT(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield bD(n,r)}var r}),XT.apply(this,arguments)}function bD(n,e,t){return JT.apply(this,arguments)}function JT(){return JT=(0,pe.Z)(function*(n,e,t){if(!Wu(e))throw e;n.mu.add(1),yield py(n),n.pu.set("Offline"),t||(t=()=>JM(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield j0(n)}))}),JT.apply(this,arguments)}function hx(n,e){return e().catch(t=>bD(n,t,e))}function gy(n){return eA.apply(this,arguments)}function eA(){return eA=(0,pe.Z)(function*(n){const e=ze(n),t=_h(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;YN(e);)try{const o=yield PN(e.localStore,r);if(null===o){0===e._u.length&&t.Bo();break}r=o.batchId,QN(e,o)}catch(o){yield bD(e,o)}fx(e)&&px(e)}),eA.apply(this,arguments)}function YN(n){return Dc(n)&&n._u.length<10}function QN(n,e){n._u.push(e);const t=_h(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function fx(n){return Dc(n)&&!_h(n).$o()&&n._u.length>0}function px(n){_h(n).start()}function XN(n){return tA.apply(this,arguments)}function tA(){return tA=(0,pe.Z)(function*(n){_h(n).su()}),tA.apply(this,arguments)}function JN(n){return nA.apply(this,arguments)}function nA(){return nA=(0,pe.Z)(function*(n){const e=_h(n);for(const t of n._u)e.tu(t.mutations)}),nA.apply(this,arguments)}function eO(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,pe.Z)(function*(n,e,t){const r=n._u.shift(),o=ke.from(r,e,t);yield hx(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield gy(n)}),rA.apply(this,arguments)}function tO(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,pe.Z)(function*(n,e){var t;e&&_h(n).Xo&&(yield(t=(0,pe.Z)(function*(r,o){if(ty(u=o.code)&&u!==se.ABORTED){const d=r._u.shift();_h(r).Fo(),yield hx(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield gy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),fx(n)&&px(n)}),iA.apply(this,arguments)}function gx(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,pe.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Dc(t);t.mu.add(3),yield py(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield j0(t)}),sA.apply(this,arguments)}function oA(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,pe.Z)(function*(n,e){const t=ze(n);e?(t.mu.delete(2),yield j0(t)):e||(t.mu.add(2),yield py(t),t.pu.set("Unknown"))}),aA.apply(this,arguments)}function my(n){return n.Tu||(n.Tu=function(e,t,r){const o=ze(e);return o.ru(),new jN(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:WN.bind(null,n),no:KN.bind(null,n),Ho:ZN.bind(null,n)}),n.gu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Tu.Fo(),ZT(n)?KT(n):n.pu.set("Unknown")):(yield n.Tu.stop(),dx(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function _h(n){return n.Eu||(n.Eu=function(e,t,r){const o=ze(e);return o.ru(),new $N(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:XN.bind(null,n),no:tO.bind(null,n),nu:JN.bind(null,n),eu:eO.bind(null,n)}),n.gu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Eu.Fo(),yield gy(n)):(yield n.Eu.stop(),n._u.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class uA{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new uA(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yy(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Wu(n))return new xe(se.UNAVAILABLE,`${e}: ${n}`);throw n}class vy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Yu(),this.sortedSet=new Zn(this.comparator)}static emptySet(e){return new vy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mx{constructor(){this.Au=new Zn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):rt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class _y{constructor(e,t,r,o,u,d,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new _y(e,t,vy.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class nO{constructor(){this.Pu=void 0,this.listeners=[]}}class rO{constructor(){this.queries=new qa(e=>$I(e),Dp),this.onlineState="Unknown",this.vu=new Set}}function lA(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,pe.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new nO),o)try{u.Pu=yield t.onListen(r)}catch(d){const m=yy(d,`Initialization of query '${m0(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Pu&&e.Vu(u.Pu)&&fA(t)}),cA.apply(this,arguments)}function dA(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,pe.Z)(function*(n,e){const t=ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),hA.apply(this,arguments)}function iO(n,e){const t=ze(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Pu=o}}r&&fA(t)}function sO(n,e,t){const r=ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function fA(n){n.vu.forEach(e=>{e.next()})}class pA{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new _y(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=_y.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class oO{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class yx{constructor(e){this.Tt=e}Zi(e){return $s(this.Tt,e)}Xi(e){return e.metadata.exists?T0(this.Tt,e.document,!1):vn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Yn(e)}}class aO{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vx(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=sn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new yx(this.Tt);for(const o of e)if(o.metadata.queries){const u=r.Zi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||$t()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function kN(n,e,t,r){return FT.apply(this,arguments)}(e.localStore,new yx(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const o of e.queries)yield FN(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function vx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _x{constructor(e){this.key=e}}class wx{constructor(e){this.key=e}}class Ex{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=$t(),this.mutatedKeys=$t(),this.ju=y0(e),this.zu=new vy(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new mx,o=t?t.zu:this.zu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const j=o.get(S),Z=Jm(this.query,N)?N:null,de=!!j&&this.mutatedKeys.has(j.key),Ne=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Le=!1;j&&Z?j.data.isEqual(Z.data)?de!==Ne&&(r.track({type:3,doc:Z}),Le=!0):this.Yu(j,Z)||(r.track({type:2,doc:Z}),Le=!0,(w&&this.ju(Z,w)>0||b&&this.ju(Z,b)<0)&&(m=!0)):!j&&Z?(r.track({type:0,doc:Z}),Le=!0):j&&!Z&&(r.track({type:1,doc:j}),Le=!0,(w||b)&&(m=!0)),Le&&(Z?(d=d.add(Z),u=Ne?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{zu:d,Ju:r,Li:m,mutatedKeys:u}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const u=e.Ju.Ru();u.sort((b,S)=>function(N,j){const Z=de=>{switch(de){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return Z(N)-Z(j)}(b.type,S.type)||this.ju(b.doc,S.doc)),this.Zu(r);const d=t?this.Xu():[],m=0===this.Qu.size&&this.current?1:0,w=m!==this.Gu;return this.Gu=m,0!==u.length||w?{snapshot:new _y(this.query,e.zu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:d}:{tc:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new mx,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=$t(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new wx(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new _x(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=$t();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return _y.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class uO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lO{constructor(e){this.key=e,this.ic=!1}}class cO{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.rc={},this.oc=new qa(m=>$I(m),Dp),this.uc=new Map,this.cc=new Set,this.ac=new Zn(Ge.comparator),this.hc=new Map,this.lc=new MT,this.fc={},this.dc=new Map,this._c=Op.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function dO(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,pe.Z)(function*(n,e){const t=VA(n);let r,o;const u=t.oc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.sc();else{const d=yield hy(t.localStore,Ki(e));t.isPrimaryClient&&DD(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield mA(t,e,r,"current"===m,d.resumeToken)}return o}),gA.apply(this,arguments)}function mA(n,e,t,r,o){return yA.apply(this,arguments)}function yA(){return yA=(0,pe.Z)(function*(n,e,t,r,o){n.mc=(N,j,Z)=>{return(de=(0,pe.Z)(function*(Ne,Le,Vt,Zt){let Nt=Le.view.Hu(Vt);Nt.Li&&(Nt=yield vD(Ne.localStore,Le.query,!1).then(({documents:Wt})=>Le.view.Hu(Wt,Nt)));const Ht=Zt&&Zt.targetChanges.get(Le.targetId),Lt=Le.view.applyChanges(Nt,Ne.isPrimaryClient,Ht);return AA(Ne,Le.targetId,Lt.tc),Lt.snapshot}),function(Ne,Le,Vt,Zt){return de.apply(this,arguments)})(n,N,j,Z);var de};const u=yield vD(n.localStore,e,!0),d=new Ex(e,u.Yi),m=d.Hu(u.documents),w=Tp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=d.applyChanges(m,n.isPrimaryClient,w);AA(n,t,b.tc);const S=new uO(e,t,d);return n.oc.set(e,S),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),b.snapshot}),yA.apply(this,arguments)}function hO(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,pe.Z)(function*(n,e){const t=ze(n),r=t.oc.get(e),o=t.uc.get(r.targetId);if(o.length>1)return t.uc.set(r.targetId,o.filter(u=>!Dp(u,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$0(t.remoteStore,r.targetId),wy(t,r.targetId)}).catch(qu))):(wy(t,r.targetId),yield fy(t.localStore,r.targetId,!0))}),vA.apply(this,arguments)}function _A(){return _A=(0,pe.Z)(function*(n,e,t){const r=UA(n);try{const o=yield function(u,d){const m=ze(u),w=Bn.now(),b=d.reduce((j,Z)=>j.add(Z.key),$t());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",j=>{let Z=Ti(),de=$t();return m.ji.getEntries(j,b).next(Ne=>{Z=Ne,Z.forEach((Le,Vt)=>{Vt.isValidDocument()||(de=de.add(Le))})}).next(()=>m.localDocuments.getOverlayedDocuments(j,Z)).next(Ne=>{S=Ne;const Le=[];for(const Vt of d){const Zt=nT(Vt,S.get(Vt.key).overlayedDocument);null!=Zt&&Le.push(new za(Vt.key,Zt,QC(Zt.value.mapValue),jn.exists(!0)))}return m.mutationQueue.addMutationBatch(j,w,Le,d)}).next(Ne=>{N=Ne;const Le=Ne.applyToLocalDocumentSet(S,de);return m.documentOverlayCache.saveOverlays(j,Ne.batchId,Le)})}).then(()=>({batchId:N.batchId,changes:Cp(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.fc[u.currentUser.toKey()];w||(w=new Zn(kt)),w=w.insert(d,m),u.fc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield bc(r,o.changes),yield gy(r.remoteStore)}catch(o){const u=yy(o,"Failed to persist write");t.reject(u)}}),_A.apply(this,arguments)}function Ix(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,pe.Z)(function*(n,e){const t=ze(n);try{const r=yield ON(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.hc.get(u);d&&(yt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ic=!0:o.modifiedDocuments.size>0?yt(d.ic):o.removedDocuments.size>0&&(yt(d.ic),d.ic=!1))}),yield bc(t,r,e)}catch(r){yield qu(r)}}),wA.apply(this,arguments)}function Dx(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.oc.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=ze(u);m.onlineState=d;let w=!1;m.queries.forEach((b,S)=>{for(const N of S.listeners)N.bu(d)&&(w=!0)}),w&&fA(m)}(r.eventManager,e),o.length&&r.rc.Ho(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pO(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,pe.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.hc.get(e),u=o&&o.key;if(u){let d=new Zn(Ge.comparator);d=d.insert(u,vn.newNoDocument(u,_t.min()));const m=$t().add(u),w=new fh(_t.min(),new Map,new Cn(kt),d,m);yield Ix(r,w),r.ac=r.ac.remove(u),r.hc.delete(e),SA(r)}else yield fy(r.localStore,e,!1).then(()=>wy(r,e,t)).catch(qu)}),EA.apply(this,arguments)}function gO(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,pe.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const o=yield NN(t.localStore,e);TA(t,r,null),CA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield bc(t,o)}catch(o){yield qu(o)}}),IA.apply(this,arguments)}function mO(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,pe.Z)(function*(n,e,t){const r=ze(n);try{const o=yield function(u,d){const m=ze(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,d).next(S=>(yt(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);TA(r,e,t),CA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield bc(r,o)}catch(o){yield qu(o)}}),DA.apply(this,arguments)}function bA(){return bA=(0,pe.Z)(function*(n,e){const t=ze(n);Dc(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=ze(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.dc.get(r)||[];o.push(e),t.dc.set(r,o)}catch(r){const o=yy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),bA.apply(this,arguments)}function CA(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function TA(n,e,t){const r=ze(n);let o=r.fc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.fc[r.currentUser.toKey()]=o}}function wy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||bx(n,r)})}function bx(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&($0(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),SA(n))}function AA(n,e,t){for(const r of t)r instanceof _x?(n.lc.addReference(r.key,e),vO(n,r)):r instanceof wx?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||bx(n,r.key)):rt()}function vO(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.cc.add(r),SA(n))}function SA(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new Ge(sn.fromString(e)),r=n._c.next();n.hc.set(r,new lO(t)),n.ac=n.ac.insert(t,r),DD(n.remoteStore,new Xe(Ki(Ip(t.path)),r,2,hs.at))}}function bc(n,e,t){return MA.apply(this,arguments)}function MA(){return MA=(0,pe.Z)(function*(n,e,t){const r=ze(n),o=[],u=[],d=[];var m;r.oc.isEmpty()||(r.oc.forEach((m,w)=>{d.push(r.mc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const S=OT.Ni(w.targetId,b);u.push(S)}}))}),yield Promise.all(d),r.rc.Ho(o),yield(m=(0,pe.Z)(function*(w,b){const S=ze(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>te.forEach(b,j=>te.forEach(j.Ci,Z=>S.persistence.referenceDelegate.addReference(N,j.targetId,Z)).next(()=>te.forEach(j.xi,Z=>S.persistence.referenceDelegate.removeReference(N,j.targetId,Z)))))}catch(N){if(!Wu(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const j=N.targetId;if(!N.fromCache){const Z=S.Ki.get(j),Ne=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);S.Ki=S.Ki.insert(j,Ne)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),MA.apply(this,arguments)}function _O(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,pe.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield XM(t.localStore,e);t.currentUser=e,(o=t).dc.forEach(d=>{d.forEach(m=>{m.reject(new xe(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bc(t,r.Wi)}var o}),xA.apply(this,arguments)}function wO(n,e){const t=ze(n),r=t.hc.get(e);if(r&&r.ic)return $t().add(r.key);{let o=$t();const u=t.uc.get(e);if(!u)return o;for(const d of u){const m=t.oc.get(d);o=o.unionWith(m.view.Wu)}return o}}function EO(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,pe.Z)(function*(n,e){const t=ze(n),r=yield vD(t.localStore,e.query,!0),o=e.view.nc(r);return t.isPrimaryClient&&AA(t,e.targetId,o.tc),o}),RA.apply(this,arguments)}function IO(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,pe.Z)(function*(n,e){const t=ze(n);return nx(t.localStore,e).then(r=>bc(t,r))}),NA.apply(this,arguments)}function DO(n,e,t,r){return OA.apply(this,arguments)}function OA(){return OA=(0,pe.Z)(function*(n,e,t,r){const o=ze(n),u=yield function(d,m){const w=ze(d),b=ze(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.An(S,m).next(N=>N?w.localDocuments.getDocuments(S,N):te.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield gy(o.remoteStore):"acknowledged"===t||"rejected"===t?(TA(o,e,r||null),CA(o,e),m=e,ze(ze(o.localStore).mutationQueue).Pn(m)):rt(),yield bc(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),OA.apply(this,arguments)}function PA(){return PA=(0,pe.Z)(function*(n,e){const t=ze(n);if(VA(t),UA(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Cx(t,r.toArray());t.wc=!0,yield oA(t.remoteStore,!0);for(const u of o)DD(t.remoteStore,u)}else if(!1===e&&!1!==t.wc){const r=[];let o=Promise.resolve();t.uc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(wy(t,d),fy(t.localStore,d,!0))),$0(t.remoteStore,d)}),yield o,yield Cx(t,r),function(u){const d=ze(u);d.hc.forEach((m,w)=>{$0(d.remoteStore,w)}),d.lc._s(),d.hc=new Map,d.ac=new Zn(Ge.comparator)}(t),t.wc=!1,yield oA(t.remoteStore,!1)}}),PA.apply(this,arguments)}function Cx(n,e,t){return kA.apply(this,arguments)}function kA(){return kA=(0,pe.Z)(function*(n,e,t){const r=ze(n),o=[],u=[];for(const d of e){let m;const w=r.uc.get(d);if(w&&0!==w.length){m=yield hy(r.localStore,Ki(w[0]));for(const b of w){const S=r.oc.get(b),N=yield EO(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield tx(r.localStore,d);m=yield hy(r.localStore,b),yield mA(r,Tx(b),d,!1,m.resumeToken)}o.push(m)}return r.rc.Ho(u),o}),kA.apply(this,arguments)}function Tx(n){return f0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function CO(n){const e=ze(n);return ze(ze(e.localStore).persistence).Si()}function TO(n,e,t,r){return FA.apply(this,arguments)}function FA(){return FA=(0,pe.Z)(function*(n,e,t,r){const o=ze(n);if(o.wc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.uc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield nx(o.localStore,HI(u[0])),m=fh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ir.EMPTY_BYTE_STRING);yield bc(o,d,m);break}case"rejected":yield fy(o.localStore,e,!0),wy(o,e,r);break;default:rt()}}),FA.apply(this,arguments)}function AO(n,e,t){return LA.apply(this,arguments)}function LA(){return LA=(0,pe.Z)(function*(n,e,t){const r=VA(n);if(r.wc){for(const o of e){if(r.uc.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield tx(r.localStore,o),d=yield hy(r.localStore,u);yield mA(r,Tx(u),d.targetId,!1,d.resumeToken),DD(r.remoteStore,d)}for(const o of t)r.uc.has(o)&&(yield fy(r.localStore,o,!1).then(()=>{$0(r.remoteStore,o),wy(r,o)}).catch(qu))}}),LA.apply(this,arguments)}function VA(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ix.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pO.bind(null,e),e.rc.Ho=iO.bind(null,e.eventManager),e.rc.gc=sO.bind(null,e.eventManager),e}function UA(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mO.bind(null,e),e}class Ax{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.Tt=B0(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return QM(this.persistence,new YM,e.initialUser,this.Tt)}Tc(e){return new KM(mD.qs,this.Tt)}Ic(e){return new ox}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Sx extends Ax{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield UA(r.Pc.syncEngine),yield gy(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return QM(this.persistence,new YM,e.initialUser,this.Tt)}Ac(e,t){return new yN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new q_(t,this.persistence);return new z_(e.asyncQueue,r)}Tc(e){const t=NT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new RT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ux(),ID(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new ox}}class MO extends Sx{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const o=r.Pc.syncEngine;r.sharedClientState instanceof jT&&(r.sharedClientState.syncEngine={Br:DO.bind(null,o),Lr:TO.bind(null,o),qr:AO.bind(null,o),Si:CO.bind(null,o),Fr:IO.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var u=(0,pe.Z)(function*(d){yield function bO(n,e){return PA.apply(this,arguments)}(r.Pc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}Ic(e){const t=ux();if(!jT.C(t))throw new xe(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=NT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class BA{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Dx(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=_O.bind(null,r.syncEngine),yield oA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rO}createDatastore(e){const t=B0(e.databaseInfo.databaseId),r=new BN(e.databaseInfo);return new HN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>Dx(this.syncEngine,m,0),d=ax.C()?new ax:new LN,new qN(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,b){const S=new cO(r,o,u,d,m,w);return b&&(S.wc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield py(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mx(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class CD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class xO{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),o=Number(r);isNaN(o)&&e.xc(`length string (${r}) is not valid number`);const u=yield e.Nc(o);return new oO(JSON.parse(u),t.length+o)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,pe.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class RO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,pe.Z)(function*(u,d){const m=ze(u),w=iy(m.Tt)+"/documents",b={documents:d.map(Z=>Ec(m.Tt,Z))},S=yield m.mo("BatchGetDocuments",w,b,d.length),N=new Map;S.forEach(Z=>{const de=function mT(n,e){return"found"in e?function(t,r){yt(!!r.found);const o=$s(t,r.found.name),u=Yn(r.found.updateTime),d=r.found.createTime?Yn(r.found.createTime):_t.min(),m=new ri({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(o,u,d,m)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const o=$s(t,r.missing),u=Yn(r.readTime);return vn.newNoDocument(o,u)}(n,e):rt()}(m.Tt,Z);N.set(de.key.toString(),de)});const j=[];return d.forEach(Z=>{const de=N.get(Z.toString());yt(!!de),j.push(de)}),j}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ge.fromPath(o);e.mutations.push(new ey(u,e.precondition(u)))}),yield(r=(0,pe.Z)(function*(o,u){const d=ze(o),m=iy(d.Tt)+"/documents",w={writes:u.map(b=>Sp(d.Tt,b))};yield d.lo("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new xe(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class NO{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Mc=r.maxAttempts,this.ko=new HT(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,pe.Z)(function*(){const t=new RO(e.datastore),r=e.Fc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Bc(u)}))}).catch(o=>{e.Bc(o)})}))}Fc(e){try{const t=this.updateFunction(e);return!eh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ty(t)}return!1}}class OO{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Nr.UNAUTHENTICATED,this.clientId=B_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,pe.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=yy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function xx(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,pe.Z)(function*(u){r.isEqual(u)||(yield XM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jA.apply(this,arguments)}function Rx(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>gx(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>gx(e.remoteStore,u)),n.onlineComponents=e}),$A.apply(this,arguments)}function HA(n){return GA.apply(this,arguments)}function GA(){return GA=(0,pe.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield xx(n,new Ax)),n.offlineComponents}),GA.apply(this,arguments)}function TD(n){return zA.apply(this,arguments)}function zA(){return zA=(0,pe.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield Rx(n,new BA)),n.onlineComponents}),zA.apply(this,arguments)}function Nx(n){return HA(n).then(e=>e.persistence)}function AD(n){return HA(n).then(e=>e.localStore)}function qA(n){return TD(n).then(e=>e.remoteStore)}function WA(n){return TD(n).then(e=>e.syncEngine)}function Ey(n){return KA.apply(this,arguments)}function KA(){return KA=(0,pe.Z)(function*(n){const e=yield TD(n),t=e.eventManager;return t.onListen=dO.bind(null,e.syncEngine),t.onUnlisten=hO.bind(null,e.syncEngine),t}),KA.apply(this,arguments)}function Px(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,w){const b=new CD({next:N=>{u.enqueueAndForget(()=>dA(o,S));const j=N.docs.has(d);!j&&N.fromCache?w.reject(new xe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new pA(Ip(d.path),b,{includeMetadataChanges:!0,$u:!0});return lA(o,S)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}function kx(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(o,u,d,m,w){const b=new CD({next:N=>{u.enqueueAndForget(()=>dA(o,S)),N.fromCache&&"server"===m.source?w.reject(new xe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new pA(d,b,{includeMetadataChanges:!0,$u:!0});return lA(o,S)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}const Fx=new Map;function ZA(n,e,t){if(!t)throw new xe(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Lx(n,e,t,r){if(!0===e&&!0===r)throw new xe(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Vx(n){if(!Ge.isDocumentKey(n))throw new xe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ux(n){if(Ge.isDocumentKey(n))throw new xe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function an(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SD(n);throw new xe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Bx(n,e){if(e<=0)throw new xe(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class jx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Lx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class H0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NC;switch(t.type){case"gapi":return new FC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fx.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),Fx.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class Si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Xu extends Si{constructor(e,t,r){super(e,t,Ip(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new Ge(e))}withConverter(e){return new Xu(this.firestore,e,this._path)}}function Hx(n,e,...t){if(n=(0,rn.m9)(n),ZA("collection","path",e),n instanceof H0){const r=sn.fromString(e,...t);return Ux(r),new Xu(n,null,r)}{if(!(n instanceof Qn||n instanceof Xu))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return Ux(r),new Xu(n.firestore,null,r)}}function MD(n,e,...t){if(n=(0,rn.m9)(n),1===arguments.length&&(e=B_.R()),ZA("doc","path",e),n instanceof H0){const r=sn.fromString(e,...t);return Vx(r),new Qn(n,null,new Ge(r))}{if(!(n instanceof Qn||n instanceof Xu))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return Vx(r),new Qn(n.firestore,n instanceof Xu?n.converter:null,new Ge(r))}}function Gx(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),(n instanceof Qn||n instanceof Xu)&&(e instanceof Qn||e instanceof Xu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function YA(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),n instanceof Si&&e instanceof Si&&n.firestore===e.firestore&&Dp(n._query,e._query)&&n.converter===e.converter}class $O{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new HT(this,"async_queue_retry"),this.Hc=()=>{const t=ID();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=ID();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=ID();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Or;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Wu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const o=uA.createAndSchedule(this,e,t,r,u=>this.Xc(u));return this.Gc.push(o),o}Jc(){this.Qc&&rt()}verifyOperationInProgress(){}ta(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function QA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class HO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends H0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new $O,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zx(this),this._firestoreClient.terminate()}}function Pr(n){return n._firestoreClient||zx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new NI(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new OO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function qx(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield xx(n,t),yield Rx(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===se.FAILED_PRECONDITION||d.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;zu("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function Wx(n){if(n._initialized||n._terminated)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ju(Ir.fromBase64String(e))}catch(t){throw new xe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ju(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kp{constructor(e){this._methodName=e}}class xD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const e1=/^__.*__$/;class t1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new za(e,this.data,this.fieldMask,t,this.fieldTransforms):new dh(e,this.data,t,this.fieldTransforms)}}class Kx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class RD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ia(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new RD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.aa(e),o}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.ia(),o}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return PD(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(Zx(this.ra)&&e1.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class n1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||B0(e)}wa(e,t,r,o=!1){return new RD({ra:e,methodName:t,_a:r,path:nr.emptyPath(),ca:!1,da:o},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Fp(n){const e=n._freezeSettings(),t=B0(n._databaseId);return new n1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ND(n,e,t,r,o,u={}){const d=n.wa(u.merge||u.mergeFields?2:0,e,t,o);tS("Data must be an object, but it was:",d,r);const m=Xx(r,d);let w,b;if(u.merge)w=new fs(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const j=q0(e,N,t);if(!d.contains(j))throw new xe(se.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);eR(S,j)||S.push(j)}w=new fs(S),b=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=d.fieldTransforms;return new t1(new ri(m),w,b)}class z0 extends kp{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof z0}}function Yx(n,e,t){return new RD({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class XA extends kp{_toFieldTransform(e){return new lh(e.path,new Zu)}isEqual(e){return e instanceof XA}}class r1 extends kp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Yx(this,e,!0),r=this.ma.map(u=>Lp(u,t)),o=new vc(r);return new lh(e.path,o)}isEqual(e){return this===e}}class i1 extends kp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Yx(this,e,!0),r=this.ma.map(u=>Lp(u,t)),o=new Ga(r);return new lh(e.path,o)}isEqual(e){return this===e}}class s1 extends kp{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new _c(e.Tt,zI(e.Tt,this.ga));return new lh(e.path,t)}isEqual(e){return this===e}}function JA(n,e,t,r){const o=n.wa(1,e,t);tS("Data must be an object, but it was:",o,r);const u=[],d=ri.empty();hc(r,(w,b)=>{const S=OD(e,w,t);b=(0,rn.m9)(b);const N=o.ha(S);if(b instanceof z0)u.push(S);else{const j=Lp(b,N);null!=j&&(u.push(S),d.set(S,j))}});const m=new fs(u);return new Kx(d,m,o.fieldTransforms)}function eS(n,e,t,r,o,u){const d=n.wa(1,e,t),m=[q0(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)m.push(q0(e,u[j])),w.push(u[j+1]);const b=[],S=ri.empty();for(let j=m.length-1;j>=0;--j)if(!eR(b,m[j])){const Z=m[j];let de=w[j];de=(0,rn.m9)(de);const Ne=d.ha(Z);if(de instanceof z0)b.push(Z);else{const Le=Lp(de,Ne);null!=Le&&(b.push(Z),S.set(Z,Le))}}const N=new fs(b);return new Kx(S,N,d.fieldTransforms)}function Qx(n,e,t,r=!1){return Lp(t,n.wa(r?4:3,e))}function Lp(n,e){if(Jx(n=(0,rn.m9)(n)))return tS("Unsupported field value:",e,n),Xx(n,e);if(n instanceof kp)return function(t,r){if(!Zx(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Lp(d,r.la(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zI(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Bn.fromDate(t);return{timestampValue:wc(r.Tt,o)}}if(t instanceof Bn){const o=new Bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:wc(r.Tt,o)}}if(t instanceof xD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ju)return{bytesValue:Qu(r.Tt,t._byteString)};if(t instanceof Qn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.fa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ap(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${SD(t)}`)}(n,e)}function Xx(n,e){const t={};return Z_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hc(n,(r,o)=>{const u=Lp(o,e.ua(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Jx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Bn||n instanceof xD||n instanceof Ju||n instanceof Qn||n instanceof kp)}function tS(n,e,t){if(!Jx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=SD(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function q0(n,e,t){if((e=(0,rn.m9)(e))instanceof Cc)return e._internalPath;if("string"==typeof e)return OD(n,e);throw PD("Field path arguments must be of type string or ",n,!1,void 0,t)}const o1=new RegExp("[~\\*/\\[\\]]");function OD(n,e,t){if(e.search(o1)>=0)throw PD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cc(...e.split("."))._internalPath}catch{throw PD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(se.INVALID_ARGUMENT,m+n+w)}function eR(n,e){return n.some(t=>t.isEqual(e))}class W0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new a1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class a1 extends W0{data(){return super.data()}}function kD(n,e){return"string"==typeof e?OD(n,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}function tR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nS{}class K0 extends nS{}function wh(n,e,...t){let r=[];e instanceof nS&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof Iy).length,d=o.filter(m=>m instanceof Z0).length;if(u>1||u>0&&d>0)throw new xe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class Z0 extends K0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Z0(e,t,r)}_apply(e){const t=this._parse(e);return sR(e._query,t),new Si(e.firestore,e.converter,jI(e._query,t))}_parse(e){const t=Fp(e.firestore);return function(o,u,d,m,w,b,S){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new xe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){iR(S,b);const j=[];for(const Z of S)j.push(rR(m,o,Z));N={arrayValue:{values:j}}}else N=rR(m,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||iR(S,b),N=Qx(d,"where",S,"in"===b||"not-in"===b);return Xt.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Iy extends nS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const d=o.getFlattenedFilters();for(const m of d)sR(u,m),u=jI(u,m)}(e._query,t),new Si(e.firestore,e.converter,jI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rS extends K0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rS(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new sh(o,u);return function(m,w){if(null===p0(m)){const b=Xm(m);null!==b&&oR(0,b,w.field)}}(r,d),d}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ha(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class FD extends K0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new FD(e,t,r)}_apply(e){return new Si(e.firestore,e.converter,g0(e._query,this._limit,this._limitType))}}class LD extends K0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new LD(e,t,r)}_apply(e){const t=nR(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(o=t,new Ha((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class VD extends K0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new VD(e,t,r)}_apply(e){const t=nR(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(o=t,new Ha((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function nR(n,e,t,r){if(t[0]=(0,rn.m9)(t[0]),t[0]instanceof W0)return function(o,u,d,m,w){if(!m)throw new xe(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const S of yc(o))if(S.field.isKeyField())b.push(gc(u,m.key));else{const N=m.data.field(S.field);if(Q_(N))throw new xe(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const j=S.field.canonicalString();throw new xe(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}b.push(N)}return new $a(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Fp(n.firestore);return function(u,d,m,w,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new xe(se.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let Z=0;Z<b.length;Z++){const de=b[Z];if(N[Z].field.isKeyField()){if("string"!=typeof de)throw new xe(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof de}`);if(!ah(u)&&-1!==de.indexOf("/"))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${de}' contains a slash.`);const Ne=u.path.child(sn.fromString(de));if(!Ge.isDocumentKey(Ne))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Le=new Ge(Ne);j.push(gc(d,Le))}else{const Ne=Qx(m,w,de);j.push(Ne)}}return new $a(j,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function rR(n,e,t){if("string"==typeof(t=(0,rn.m9)(t))){if(""===t)throw new xe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ah(e)&&-1!==t.indexOf("/"))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ge.isDocumentKey(r))throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gc(n,new Ge(r))}if(t instanceof Qn)return gc(n,t._key);throw new xe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SD(t)}.`)}function iR(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sR(n,e){if(e.isInequality()){const r=Xm(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new xe(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=p0(n);null!==u&&oR(0,o,u)}const t=function(r,o){for(const u of r)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(se.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function oR(n,e,t){if(!t.isEqual(e))throw new xe(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class iS{convertValue(e,t="none"){switch(vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return hc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new xD(bn(e.latitude),bn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=GC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qm(e));default:return null}}convertTimestamp(e){const t=rr(e);return new Bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);yt(_T(r));const o=new Yo(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return o.isEqual(t)||Er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function UD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class m1 extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class Vp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tc extends W0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(kD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Y0 extends Tc{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Y0(this._firestore,this._userDataWriter,r.key,r,new Vp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Y0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Vp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Y0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Vp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:v1(d.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function v1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function uR(n,e){return n instanceof Tc&&e instanceof Tc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&YA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ih extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function lR(n,e,t){n=an(n,Qn);const r=an(n.firestore,Xn),o=UD(n.converter,e,t);return Dy(r,[ND(Fp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,jn.none())])}function cR(n,e,t,...r){n=an(n,Qn);const o=an(n.firestore,Xn),u=Fp(o);let d;return d="string"==typeof(e=(0,rn.m9)(e))||e instanceof Cc?eS(u,"updateDoc",n._key,e,t,r):JA(u,"updateDoc",n._key,e),Dy(o,[d.toMutation(n._key,jn.exists(!0))])}function dR(n,...e){var t,r,o;n=(0,rn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||QA(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(QA(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,b,S;if(n instanceof Qn)b=an(n.firestore,Xn),S=Ip(n._key.path),w={next:N=>{e[d]&&e[d](sS(b,n,N))},error:e[d+1],complete:e[d+2]};else{const N=an(n,Si);b=an(N.firestore,Xn),S=N._query;const j=new Ih(b);w={next:Z=>{e[d]&&e[d](new Eh(b,j,N,Z))},error:e[d+1],complete:e[d+2]},tR(n._query)}return function(N,j,Z,de){const Ne=new CD(de),Le=new pA(j,Ne,Z);return N.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return lA(yield Ey(N),Le)})),()=>{Ne.bc(),N.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return dA(yield Ey(N),Le)}))}}(Pr(b),S,m,w)}function Dy(n,e){return function(t,r){const o=new Or;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function fO(n,e,t){return _A.apply(this,arguments)}(yield WA(t),r,o)})),o.promise}(Pr(n),e)}function sS(n,e,t){const r=t.docs.get(e._key),o=new Ih(n);return new Tc(n,o,e._key,r,new Vp(t.hasPendingWrites,t.fromCache),e.converter)}const M1={maxAttempts:5};class hR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fp(e)}set(e,t,r){this._verifyNotCommitted();const o=Dh(e,this._firestore),u=UD(o.converter,t,r),d=ND(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,jn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Dh(e,this._firestore);let d;return d="string"==typeof(t=(0,rn.m9)(t))||t instanceof Cc?eS(this._dataReader,"WriteBatch.update",u._key,t,r,o):JA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dh(e,this._firestore);return this._mutations=this._mutations.concat(new bp(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dh(n,e){if((n=(0,rn.m9)(n)).firestore!==e)throw new xe(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class x1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fp(e)}get(e){const t=Dh(e,this._firestore),r=new m1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new W0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new W0(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=Dh(e,this._firestore),u=UD(o.converter,t,r),d=ND(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Dh(e,this._firestore);let d;return d="string"==typeof(t=(0,rn.m9)(t))||t instanceof Cc?eS(this._dataReader,"Transaction.update",u._key,t,r,o):JA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dh(e,this._firestore),r=new Ih(this._firestore);return super.get(e).then(o=>new Tc(this._firestore,r,t._key,o._document,new Vp(!1,!1),t.converter))}}function oS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function pR(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function gR(){if(!function $C(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xd=Wo.SDK_VERSION,(0,Wo._registerComponent)(new Bd.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Xn(new PC(t.getProvider("auth-internal")),new LC(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Wo.registerVersion)(L_,"3.9.0",n),(0,Wo.registerVersion)(L_,"3.9.0","esm2017")}();class Q0{constructor(e){this._delegate=e}static fromBase64String(e){return gR(),new Q0(Ju.fromBase64String(e))}static fromUint8Array(e){return pR(),new Q0(Ju.fromUint8Array(e))}toBase64(){return gR(),this._delegate.toBase64()}toUint8Array(){return pR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function aS(n){return function U1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class B1{enableIndexedDbPersistence(e,t){return function zO(n,e){Wx(n=an(n,Xn));const t=Pr(n),r=n._freezeSettings(),o=new BA;return qx(t,o,new Sx(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qO(n){Wx(n=an(n,Xn));const e=Pr(n),t=n._freezeSettings(),r=new BA;return qx(e,r,new MO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function WO(n){if(n._initialized&&!n._terminated)throw new xe(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!ds.C())return Promise.resolve();const o=r+"main";yield ds.delete(o)}),function(r){return t.apply(this,arguments)})(NT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function $x(n,e,t,r={}){var o;const u=(n=an(n,H0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&zu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Nr.MOCK_USER;else{d=(0,rn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nr(w)}n._authCredentials=new OC(new AI(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function ZO(n){return function PO(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield Nx(n),t=yield qA(n);return e.setNetworkEnabled(!0),function(r){const o=ze(r);return o.mu.delete(0),j0(o)}(t)}))}(Pr(n=an(n,Xn)))}(this._delegate)}disableNetwork(){return function YO(n){return function kO(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield Nx(n),t=yield qA(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(o){const u=ze(o);u.mu.add(0),yield py(u),u.pu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Pr(n=an(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Lx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function KO(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function yO(n,e){return bA.apply(this,arguments)}(yield WA(e),t)})),t.promise}(Pr(n=an(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function A1(n,e){return function VO(n,e){const t=new CD(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Ey(n),o=t,ze(r).vu.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Ey(n),o=t,void ze(r).vu.delete(o);var r,o}))}}(Pr(n=an(n,Xn)),QA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new by(this,Hx(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,MD(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function jO(n,e){if(n=an(n,H0),ZA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(n,null,(t=e,new Ha(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function R1(n,e,t){n=an(n,Xn);const r=Object.assign(Object.assign({},M1),t);return function(o){if(o.maxAttempts<1)throw new xe(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const m=new Or;return o.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const w=yield function Ox(n){return TD(n).then(e=>e.datastore)}(o);new NO(o.asyncQueue,w,d,u,m).run()})),m.promise}(Pr(n),o=>e(new x1(n,o)),r)}(this._delegate,t=>e(new yR(this,t)))}batch(){return Pr(this._delegate),new vR(new hR(this._delegate,e=>Dy(this._delegate,e)))}loadBundle(e){return function QO(n,e){const t=Pr(n=an(n,Xn)),r=new HO;return function UO(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return Mx(w,b);if(w instanceof ArrayBuffer)return Mx(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new xO(w,d);var w}(t,B0(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function SO(n,e,t){const r=ze(n);var o;(o=(0,pe.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(j,Z){const de=ze(j),Ne=Yn(Z.createTime);return de.persistence.runTransaction("hasNewerBundle","readonly",Le=>de.$s.getBundleMetadata(Le,Z.id)).then(Le=>!!Le&&Le.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(j=w).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);m._updateProgress(vx(w));const b=new aO(w,u.localStore,d.Tt);let S=yield d.yc();for(;S;){const j=yield b.Bu(S);j&&m._updateProgress(j),S=yield d.yc()}const N=yield b.complete();return yield bc(u,N.Uu,void 0),yield function(j,Z){const de=ze(j);return de.persistence.runTransaction("Save bundle","readwrite",Ne=>de.$s.saveBundleMetadata(Ne,Z))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.qu)}catch(w){return zu("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var j}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield WA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function XO(n,e){return function BO(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const o=ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.$s.getNamedQuery(u,r))}(yield AD(n),e)}))}(Pr(n=an(n,Xn)),e).then(t=>t?new Si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class BD extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Q0(new Ju(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class yR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BD(e)}get(e){const t=Bp(e);return this._delegate.get(t).then(r=>new X0(this._firestore,new Tc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Bp(e);return r?(oS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}}class vR{constructor(e){this._delegate=e}set(e,t,r){const o=Bp(e);return r?(oS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Up{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Y0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new J0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Up.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Up(e,new BD(e),t),o.set(t,u)),u}}Up.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new Qn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new ea(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new by(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new by(this.firestore,Hx(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.m9)(e))instanceof Qn&&Gx(this._delegate,e)}set(e,t){t=oS("DocumentReference.set",t);try{return t?lR(this._delegate,e,t):lR(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cR(this._delegate,e):cR(this._delegate,e,t,...r)}catch(o){throw ms(o,"updateDoc()","DocumentReference.update()")}}delete(){return function C1(n){return Dy(an(n.firestore,Xn),[new bp(n._key,jn.none())])}(this._delegate)}onSnapshot(...e){const t=_R(e),r=wR(e,o=>new X0(this.firestore,new Tc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return dR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function w1(n){n=an(n,Qn);const e=an(n.firestore,Xn),t=Pr(e),r=new Ih(e);return function FO(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield function(w,b){const S=ze(w);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=yy(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield AD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Tc(e,r,n._key,o,new Vp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function E1(n){n=an(n,Qn);const e=an(n.firestore,Xn);return Px(Pr(e),n._key,{source:"server"}).then(t=>sS(e,n,t))}(this._delegate):function _1(n){n=an(n,Qn);const e=an(n.firestore,Xn);return Px(Pr(e),n._key).then(t=>sS(e,n,t))}(this._delegate),t.then(r=>new X0(this.firestore,new Tc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?Up.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function _R(n){for(const e of n)if("object"==typeof e&&!aS(e))return e;return{}}function wR(n,e){var t,r;let o;return o=aS(n[0])?n[0]:aS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class X0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uR(this._delegate,e._delegate)}}class J0 extends X0{data(e){const t=this._delegate.data(e);return function fM(n,e){n||rt()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BD(e)}where(e,t,r){try{return new ys(this.firestore,wh(this._delegate,function u1(n,e,t){const r=e,o=kD("where",n);return Z0._create(o,r,t)}(e,t,r)))}catch(o){throw ms(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,wh(this._delegate,function l1(n,e="asc"){const t=e,r=kD("orderBy",n);return rS._create(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,wh(this._delegate,function c1(n){return Bx("limit",n),FD._create("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,wh(this._delegate,function d1(n){return Bx("limitToLast",n),FD._create("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,wh(this._delegate,function h1(...n){return LD._create("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,wh(this._delegate,function f1(...n){return LD._create("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,wh(this._delegate,function p1(...n){return VD._create("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,wh(this._delegate,function g1(...n){return VD._create("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return YA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function D1(n){n=an(n,Si);const e=an(n.firestore,Xn),t=Pr(e),r=new Ih(e);return function LO(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(o,u,d){try{const m=yield vD(o,u,!0),w=new Ex(u,m.Yi),b=w.Hu(m.documents),S=w.applyChanges(b,!1);d.resolve(S.snapshot)}catch(m){const w=yy(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield AD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate):"server"===e?.source?function b1(n){n=an(n,Si);const e=an(n.firestore,Xn),t=Pr(e),r=new Ih(e);return kx(t,n._query,{source:"server"}).then(o=>new Eh(e,r,n,o))}(this._delegate):function I1(n){n=an(n,Si);const e=an(n.firestore,Xn),t=Pr(e),r=new Ih(e);return tR(n._query),kx(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate),t.then(r=>new uS(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_R(e),r=wR(e,o=>new uS(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return dR(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?Up.getInstance(this.firestore,e):null))}}class $1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new J0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new J0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new J0(this._firestore,r))})}isEqual(e){return uR(this._delegate,e._delegate)}}class by extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?MD(this._delegate):MD(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function T1(n,e){const t=an(n.firestore,Xn),r=MD(n),o=UD(n.converter,e);return Dy(t,[ND(Fp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return Gx(this._delegate,e._delegate)}withConverter(e){return new by(this.firestore,this._delegate.withConverter(e?Up.getInstance(this.firestore,e):null))}}function Bp(n){return an(n,Qn)}class lS{constructor(...e){this._delegate=new Cc(...e)}static documentId(){return new lS(nr.keyField().canonicalString())}isEqual(e){return(e=(0,rn.m9)(e))instanceof Cc&&this._delegate._internalPath.isEqual(e._internalPath)}}class jp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function O1(){return new XA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jp(e)}static delete(){const e=function N1(){return new z0("deleteField")}();return e._methodName="FieldValue.delete",new jp(e)}static arrayUnion(...e){const t=function P1(...n){return new r1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new jp(t)}static arrayRemove(...e){const t=function k1(...n){return new i1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new jp(t)}static increment(e){const t=function F1(n){return new s1("increment",n)}(e);return t._methodName="FieldValue.increment",new jp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const H1={Firestore:mR,GeoPoint:xD,Timestamp:Bn,Blob:Q0,Transaction:yR,WriteBatch:vR,DocumentReference:ea,DocumentSnapshot:X0,Query:ys,QueryDocumentSnapshot:J0,QuerySnapshot:uS,CollectionReference:by,FieldPath:lS,FieldValue:jp,setLogLevel:function j1(n){!function RC(n){Gu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function z1(n){(function G1(n,e){n.INTERNAL.registerComponent(new Bd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},H1)))})(n,(e,t)=>new mR(e,t,new B1)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(iC.Z);var q1=k(6451),jD=k(5363),W1=k(6063);class K1 extends Aa.x{constructor(e=1/0,t=1/0,r=W1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var Z1=k(3099);function ER(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,Z1.B)({connector:()=>new K1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function IR(n,e){return(0,Rg.m)(e)?Vn(()=>n,e):Vn(()=>n)}var cS=k(9468);k(259);const hS=new Map,bR={activated:!1,tokenObservers:[]},eP={initialized:!1,enabled:!1};function Mi(n){return hS.get(n)||Object.assign({},bR)}function HD(){return eP}class oP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new rn.BH,yield function aP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vs=new rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TR(n){if(!Mi(n).activated)throw vs.create("use-before-activation",{appName:n.name})}function gS(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw vs.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==d.status)throw vs.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw vs.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),mS.apply(this,arguments)}function dP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const ew="firebase-app-check-store";let qD=null;function SR(){return qD||(qD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(vs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ew,{keyPath:"compositeKey"})}}catch(t){e(vs.create("storage-open",{originalErrorMessage:t?.message}))}}),qD)}function yS(){return yS=(0,pe.Z)(function*(n,e){const r=(yield SR()).transaction(ew,"readwrite"),u=r.objectStore(ew).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var b;m(vs.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),yS.apply(this,arguments)}const tw=new Lu.Yd("@firebase/app-check");function wS(n,e){return(0,rn.hl)()?function gP(n,e){return function MR(n,e){return yS.apply(this,arguments)}(function RR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{tw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NR(){return HD().enabled}function OR(){return IS.apply(this,arguments)}function IS(){return IS=(0,pe.Z)(function*(){const n=HD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),IS.apply(this,arguments)}const EP={error:"UNKNOWN_ERROR"};function IP(n){return rn.US.encodeString(JSON.stringify(n),!1)}function WD(n){return DS.apply(this,arguments)}function DS(){return DS=(0,pe.Z)(function*(n,e=!1){const t=n.app;TR(t);const r=Mi(t);let u,o=r.token;if(o&&!Cy(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(Cy(w)?o=w:yield wS(t,void 0))}if(!e&&o&&Cy(o))return{token:o.token};let m,d=!1;if(NR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gS(dP(t,yield OR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield wS(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield Mi(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?tw.warn(w.message):tw.error(w),u=w}return o?u?m=Cy(o)?{token:o.token,internalError:u}:FR(u):(m={token:o.token},r.token=o,yield wS(t,o)):m=FR(u),d&&kR(t,m),m}),DS.apply(this,arguments)}function CS(n,e){const t=Mi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function PR(n){const{app:e}=n,t=Mi(e);let r=t.tokenRefresher;r||(r=function DP(n){const{app:e}=n;return new oP((0,pe.Z)(function*(){let r;if(r=Mi(e).token?yield WD(n,!0):yield WD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kR(n,e){const t=Mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Cy(n){return n.expireTimeMillis-Date.now()>0}function FR(n){return{token:IP(EP),error:n}}class bP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mi(this.app);for(const t of e)CS(this.app,t.next);return Promise.resolve()}}const GR="app-check-internal";!function VP(){(0,Wo._registerComponent)(new Bd.wA("app-check",n=>function CP(n,e){return new bP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(GR).initialize()})),(0,Wo._registerComponent)(new Bd.wA(GR,n=>function TP(n){return{getToken:e=>WD(n,e),addTokenListener:e=>function bS(n,e,t,r){const{app:o}=n,u=Mi(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Cy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),PR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>PR(n))}(n,"INTERNAL",e),removeTokenListener:e=>CS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wo.registerVersion)("@firebase/app-check","0.6.4")}();class MS{constructor(){return(0,ei.vb)("app-check")}}typeof window<"u"&&window,k(9260);const qR=new p.OlP("angularfire2.auth.use-emulator"),WR=new p.OlP("angularfire2.auth.settings"),KR=new p.OlP("angularfire2.auth.tenant-id"),ZR=new p.OlP("angularfire2.auth.langugage-code"),YR=new p.OlP("angularfire2.auth.use-device-language"),QR=new p.OlP("angularfire.auth.persistence"),XR=(n,e,t,r,o,u,d,m)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[b,S]of Object.entries(d))w.settings[b]=S;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let RS=(()=>{class n{constructor(t,r,o,u,d,m,w,b,S,N,j,Z){const de=new Aa.x,Ne=mt(void 0).pipe((0,jD.Q)(d.outsideAngular),Vn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,8971)))),(0,St.U)(()=>(0,Mr.on)(t,u,r)),(0,St.U)(Le=>XR(Le,u,m,b,S,N,w,j)),ER({bufferSize:1,refCount:!1}));if(mr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{Ne.pipe($o()).subscribe();const Vt=Ne.pipe(Vn(Ht=>Ht.getRedirectResult().then(Lt=>Lt,()=>null)),ei.iC,ER({bufferSize:1,refCount:!1})),Zt=Ne.pipe(Vn(Ht=>new Yr.y(Lt=>({unsubscribe:u.runOutsideAngular(()=>Ht.onAuthStateChanged(Wt=>Lt.next(Wt),Wt=>Lt.error(Wt),()=>Lt.complete()))})))),Nt=Ne.pipe(Vn(Ht=>new Yr.y(Lt=>({unsubscribe:u.runOutsideAngular(()=>Ht.onIdTokenChanged(Wt=>Lt.next(Wt),Wt=>Lt.error(Wt),()=>Lt.complete()))}))));this.authState=Vt.pipe(IR(Zt),(0,cS.R)(d.outsideAngular),(0,jD.Q)(d.insideAngular)),this.user=Vt.pipe(IR(Nt),(0,cS.R)(d.outsideAngular),(0,jD.Q)(d.insideAngular)),this.idToken=this.user.pipe(Vn(Ht=>Ht?(0,nn.D)(Ht.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Vn(Ht=>Ht?(0,nn.D)(Ht.getIdTokenResult()):mt(null))),this.credential=(0,q1.T)(Vt,de,this.authState.pipe(Hi(Ht=>!Ht))).pipe((0,St.U)(Ht=>Ht?.user?Ht:null),(0,cS.R)(d.outsideAngular),(0,jD.Q)(d.insideAngular))}return(0,Mr.pX)(this,Ne,u,{spy:{apply:(Le,Vt,Zt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&Zt.then(Nt=>de.next(Nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mr.Dh),p.LFG(Mr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ei.HU),p.LFG(qR,8),p.LFG(WR,8),p.LFG(KR,8),p.LFG(ZR,8),p.LFG(YR,8),p.LFG(QR,8),p.LFG(MS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function JR(n,e){return function GP(n,e=nC.z){return new Yr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function NS(n,e){return JR(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function ZD(n,e){return NS(n,e).pipe(bd(void 0),Bv(),(0,St.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(S=>S.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function eN(n,e,t){return ZD(n,t).pipe(Ho((r,o)=>function qP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function WP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return OS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return OS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function rC(n,e=mf.y){return n=n??jv,(0,Jr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Dn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,St.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function OS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function tN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class nN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(bd(void 0),Bv(),Hi(([r,o])=>o.length>0||!r),(0,St.U)(([r,o])=>o),ei.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ho((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tN(e);return eN(this.query,t,this.afs.schedulers.outsideAngular).pipe(ei.iC)}valueChanges(e={}){return NS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ei.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(ei.iC)}add(e){return this.ref.add(e)}doc(e){return new rN(this.ref.doc(e),this.afs)}}class rN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=iN(r,t);return new nN(o,u,this.afs)}snapshotChanges(){return function zP(n,e){return JR(n,e).pipe(bd(void 0),Bv(),(0,St.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ei.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(ei.iC)}}class KP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZD(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Hi(t=>t.length>0),ei.iC):ZD(this.query,this.afs.schedulers.outsideAngular).pipe(ei.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ho((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tN(e);return eN(this.query,t,this.afs.schedulers.outsideAngular).pipe(ei.iC)}valueChanges(e={}){return NS(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ei.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(ei.iC)}}const ZP=new p.OlP("angularfire2.enableFirestorePersistence"),YP=new p.OlP("angularfire2.firestore.persistenceSettings"),QP=new p.OlP("angularfire2.firestore.settings"),XP=new p.OlP("angularfire2.firestore.use-emulator");function iN(n,e=(t=>t)){return{query:e(n),ref:n}}let JP=(()=>{class n{constructor(t,r,o,u,d,m,w,b,S,N,j,Z,de,Ne,Le,Vt,Zt){this.schedulers=w;const Nt=(0,Mr.on)(t,m,r),Ht=S;N&&XR(Nt,m,j,de,Ne,Le,Z,Vt),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${Nt.name}.firestore`,"AngularFirestore",Nt.name,()=>{const Lt=m.runOutsideAngular(()=>Nt.firestore());if(u&&Lt.settings(u),Ht&&Lt.useEmulator(...Ht),o&&!mr(d)){const Wt=()=>{try{return(0,nn.D)(Lt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(yi){return typeof console<"u"&&console.warn(yi),mt(!1)}};return[Lt,m.runOutsideAngular(Wt)]}return[Lt,mt(!1)]},[u,Ht,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=iN(o,r),m=this.schedulers.ngZone.run(()=>u);return new nN(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new KP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new rN(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mr.Dh),p.LFG(Mr.xv,8),p.LFG(ZP,8),p.LFG(QP,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ei.HU),p.LFG(YP,8),p.LFG(XP,8),p.LFG(RS,8),p.LFG(qR,8),p.LFG(WR,8),p.LFG(KR,8),p.LFG(ZR,8),p.LFG(YR,8),p.LFG(QR,8),p.LFG(MS,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nw=(()=>{class n{constructor(t,r,o){this.afs=t,this.fireAuth=r,this.router=o,this.alert=!1,this.alertMsg="",this.loader=!1}login(t,r){this.loader=!0,this.fireAuth.signInWithEmailAndPassword(t.trim(),r).then(()=>{localStorage.setItem("token","true"),this.loader=!1,this.router.navigate(["/home"])},o=>{this.alert=!0,this.alertMsg="Something went wrong",alert("Something went wrong"),this.router.navigate(["/login"])})}register(t,r,o,u,d,m){this.loader=!0,this.fireAuth.createUserWithEmailAndPassword(t.trim(),r).then(()=>{this.alert=!0,this.loader=!1,this.alertMsg="Registeration Successful",alert("Registeration Successful"),this.router.navigate(["/login"]);const w={id:"",firstname:o,lastname:u,email:t,password:r,pan:d,aadhar:m};return w.id=this.afs.createId(),this.afs.collection("/users").add(w)},w=>{this.alert=!0,this.alertMsg=w.message,alert(w.message),this.router.navigate(["/register"])})}logout(){this.loader=!0,this.fireAuth.signOut().then(()=>{localStorage.removeItem("token"),this.loader=!1,this.router.navigate(["/login"])},t=>{this.alert=!0,this.alertMsg=t.message,alert(t.message)})}onload(){return this.afs.collection("/users").snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(JP),p.LFG(RS),p.LFG(Rr))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ek(n,e){1&n&&(p.TgZ(0,"div",26),p._UZ(1,"img",27),p.qZA())}let tk=(()=>{class n{constructor(t){this.auth=t,this.userList=[]}ngOnInit(){this.onLoad()}register(){this.auth.logout()}onLoad(){this.auth.onload().subscribe(t=>{this.auth.loader=!0,this.userList=t.map(r=>{const o=r.payload.doc.data();return this.auth.loader=!1,this.firstname=o.firstname,this.lastname=o.lastname,this.email=o.email,o.id=r.payload.doc.id,o})},t=>{alert("Error while fetching student data")})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(nw))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:34,vars:3,consts:[[1,"container-fluid","loginbg","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"logo"],["src","./assets/logo.png","width","50",1,"me-2"],["id","logOut",1,"btn","btn-warning","ms-auto",3,"click"],[1,"col-12","col-md-12","h-100","px-0"],[1,"card","shadow","h-100"],[1,"card-body","p-5"],[1,"row","g-3"],[1,"col","user-info","mb-4"],[1,"user-icon","me-3"],[1,"bi","bi-person-circle"],[1,"d-flex","flex-column"],[1,"fw-bold"],[1,"small","fw-normal"],[1,"col-12","acc-info","mb-3"],["data-bs-toggle","collapse","data-bs-target","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"border","rounded","d-flex","align-items-center","btn","btn-outline-primary","p-3"],[1,"btn","btn-primary","icon","me-3","rounded"],[1,"bi","bi-person-lines-fill"],["id","collapseExample",1,"collapse","mt-2"],[1,"card","border"],[1,"col-12","acc-info"],["data-bs-toggle","collapse","data-bs-target","#collapseExample1","role","button","aria-expanded","false","aria-controls","collapseExample1",1,"border","rounded","d-flex","align-items-center","btn","btn-outline-primary","p-3"],[1,"bi","bi-repeat"],["id","collapseExample1",1,"collapse","mt-2"],["class","loader",4,"ngIf"],[1,"loader"],["src","./assets/loader.gif","width","100"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),p._UZ(3,"img",3),p._uU(4," Banking System "),p.TgZ(5,"button",4),p.NdJ("click",function(){return r.register()}),p._uU(6,"Logout"),p.qZA()(),p.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"span",10),p._UZ(13,"i",11),p.qZA(),p.TgZ(14,"div",12)(15,"span",13),p._uU(16),p.qZA(),p.TgZ(17,"span",14),p._uU(18),p.qZA()()(),p.TgZ(19,"div",15)(20,"div",16)(21,"button",17),p._UZ(22,"i",18),p.qZA(),p._uU(23," Account Summary "),p.qZA(),p.TgZ(24,"div",19),p._UZ(25,"div",20),p.qZA()(),p.TgZ(26,"div",21)(27,"div",22)(28,"button",17),p._UZ(29,"i",23),p.qZA(),p._uU(30," Transaction Details "),p.qZA(),p.TgZ(31,"div",24),p._UZ(32,"div",20),p.qZA()()()()()()()(),p.YNc(33,ek,2,0,"div",25)),2&t&&(p.xp6(16),p.Oqu(r.firstname),p.xp6(2),p.Oqu(r.email),p.xp6(15),p.Q6J("ngIf",r.auth.loader))},dependencies:[zn]}),n})();function nk(n,e){1&n&&(p.TgZ(0,"div",25),p._UZ(1,"img",26),p.qZA())}const rk=function(){return["/register"]};let ik=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password="",this.alert=!1,this.alertMsg=""}ngOnInit(){}login(){""==this.email&&(this.alert=!0,this.alertMsg="Email cannot be empty",alert("Email cannot be empty")),""==this.password&&(this.alert=!0,this.alertMsg="Password cannot be empty",alert("Password cannot be empty")),this.auth.login(this.email,this.password),this.email="",this.password=""}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(nw))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:36,vars:5,consts:[[1,"container-fluid","loginbg","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"logo"],["src","./assets/logo.png","width","50",1,"me-2"],[1,"col-12","col-md-3","login-card","h-100"],[1,"card","shadow","h-100"],[1,"card-body"],[1,"d-flex","flex-column","align-items-center","mb-4"],[1,"card-title","fw-bold"],[1,"col-12","d-flex","align-items-center","justify-content-center","mb-4"],[1,"user-icon"],[1,"bi","bi-person-circle"],[1,"row","g-3"],[1,"col-12"],[1,"col-12","form-floating"],["type","email","id","floatingInput","placeholder","name@example.com","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"col-12","d-flex","align-items-center","justify-content-center"],["id","login",1,"btn","btn-primary","col-12","shadow",3,"click"],[1,"col-12","d-flex","align-items-center","justify-content-center","my-4"],[1,"me-2"],[1,"text-danger",3,"routerLink"],["class","loader",4,"ngIf"],[1,"loader"],["src","./assets/loader.gif","width","100"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),p._UZ(3,"img",3),p._uU(4," Banking System "),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h5",8),p._uU(10,"Welcome Back !"),p.qZA(),p.TgZ(11,"span"),p._uU(12,"Please login here"),p.qZA()(),p.TgZ(13,"div",9)(14,"span",10),p._UZ(15,"i",11),p.qZA()(),p.TgZ(16,"form",12)(17,"div",13)(18,"div",14)(19,"input",15),p.NdJ("ngModelChange",function(u){return r.email=u}),p.qZA(),p.TgZ(20,"label",16),p._uU(21,"Email"),p.qZA()()(),p.TgZ(22,"div",13)(23,"div",14)(24,"input",17),p.NdJ("ngModelChange",function(u){return r.password=u}),p.qZA(),p.TgZ(25,"label",18),p._uU(26,"Password"),p.qZA()()(),p.TgZ(27,"div",19)(28,"button",20),p.NdJ("click",function(){return r.login()}),p._uU(29,"Login"),p.qZA()(),p.TgZ(30,"div",21)(31,"span",22),p._uU(32,"Need an account?"),p.qZA(),p.TgZ(33,"a",23),p._uU(34,"Register"),p.qZA()()()()()()()(),p.YNc(35,nk,2,0,"div",24)),2&t&&(p.xp6(19),p.Q6J("ngModel",r.email),p.xp6(5),p.Q6J("ngModel",r.password),p.xp6(9),p.Q6J("routerLink",p.DdM(4,rk)),p.xp6(2),p.Q6J("ngIf",r.auth.loader))},dependencies:[zn,Uf,jr,wt,ji,sd,oo,Ol]}),n})();function sk(n,e){1&n&&(p.TgZ(0,"div",30),p._UZ(1,"img",31),p.qZA())}const ok=function(){return["/login"]},ak=[{path:" ",redirectTo:"login",pathMatch:"full"},{path:"login",component:ik},{path:"register",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password="",this.firstname="",this.lastname="",this.aadhar="",this.pan="",this.alert=!1,this.alertMsg=""}ngOnInit(){}register(){""==this.email&&(this.alert=!0,this.alertMsg="Email cannot be empty",alert("Email cannot be empty")),""==this.password&&(this.alert=!0,this.alertMsg="Password cannot be empty",alert("Password cannot be empty")),""==this.firstname&&(this.alert=!0,this.alertMsg="first name cannot be empty",alert("First name cannot be empty")),""==this.lastname&&(this.alert=!0,this.alertMsg="Last name cannot be empty",alert("Last name cannot be empty")),""==this.aadhar&&(this.alert=!0,this.alertMsg="Aadhar cannot be empty",alert("Aadhar cannot be empty")),""==this.pan&&(this.alert=!0,this.alertMsg="PAN cannot be empty",alert("PAN cannot be empty")),this.auth.register(this.email,this.password,this.firstname,this.lastname,this.aadhar,this.pan),this.email="",this.password="",this.firstname="",this.lastname="",this.aadhar="",this.pan=""}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(nw))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-register"]],features:[p._Bn([nw])],decls:53,vars:9,consts:[[1,"container-fluid","loginbg","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"logo"],["src","./assets/logo.png","width","50",1,"me-2"],[1,"col-12","col-md-12","h-100","px-0"],[1,"card","shadow","h-100"],[1,"card-body"],[1,"d-flex","flex-column","align-items-center","mb-4"],[1,"card-title","fw-bold"],[1,"row","g-3"],[1,"col-12","col-md-6"],[1,"col-12","form-floating"],["type","text","id","firstName","placeholder","First Name","name","firstName",1,"form-control",3,"ngModel","ngModelChange"],["for","firstName"],["type","text","id","lastName","placeholder","Last Name","name","lastName",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName"],["type","email","id","email","placeholder","name@example.com","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","password","id","floatingPassword","placeholder","Password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],["type","text","id","aadhar","placeholder","Aadhar Number","name","aadhar",1,"form-control",3,"ngModel","ngModelChange"],["for","aadhar"],["type","text","id","pan","placeholder","PAN Number","name","pan",1,"form-control",3,"ngModel","ngModelChange"],["for","pan"],[1,"col-12","d-flex","align-items-center","justify-content-center"],["id","register",1,"btn","btn-primary","col-12","shadow",3,"click"],[1,"col-12","d-flex","align-items-center","justify-content-center","my-4"],[1,"me-2"],[1,"text-danger",3,"routerLink"],["class","loader",4,"ngIf"],[1,"loader"],["src","./assets/loader.gif","width","100"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),p._UZ(3,"img",3),p._uU(4," Banking System "),p.qZA(),p.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h5",8),p._uU(10,"Welcome our Banking !"),p.qZA(),p.TgZ(11,"span"),p._uU(12,"Please Register here"),p.qZA()(),p.TgZ(13,"form",9)(14,"div",10)(15,"div",11)(16,"input",12),p.NdJ("ngModelChange",function(u){return r.firstname=u}),p.qZA(),p.TgZ(17,"label",13),p._uU(18,"First Name"),p.qZA()()(),p.TgZ(19,"div",10)(20,"div",11)(21,"input",14),p.NdJ("ngModelChange",function(u){return r.lastname=u}),p.qZA(),p.TgZ(22,"label",15),p._uU(23,"Last Name"),p.qZA()()(),p.TgZ(24,"div",10)(25,"div",11)(26,"input",16),p.NdJ("ngModelChange",function(u){return r.email=u}),p.qZA(),p.TgZ(27,"label",17),p._uU(28,"Email"),p.qZA()()(),p.TgZ(29,"div",10)(30,"div",11)(31,"input",18),p.NdJ("ngModelChange",function(u){return r.password=u}),p.qZA(),p.TgZ(32,"label",19),p._uU(33,"Password"),p.qZA()()(),p.TgZ(34,"div",10)(35,"div",11)(36,"input",20),p.NdJ("ngModelChange",function(u){return r.aadhar=u}),p.qZA(),p.TgZ(37,"label",21),p._uU(38,"Aadhar Number"),p.qZA()()(),p.TgZ(39,"div",10)(40,"div",11)(41,"input",22),p.NdJ("ngModelChange",function(u){return r.pan=u}),p.qZA(),p.TgZ(42,"label",23),p._uU(43,"PAN Number"),p.qZA()()(),p.TgZ(44,"div",24)(45,"button",25),p.NdJ("click",function(){return r.register()}),p._uU(46,"Register"),p.qZA()(),p.TgZ(47,"div",26)(48,"span",27),p._uU(49,"Already have an account?"),p.qZA(),p.TgZ(50,"a",28),p._uU(51,"Login"),p.qZA()()()()()()()(),p.YNc(52,sk,2,0,"div",29)),2&t&&(p.xp6(16),p.Q6J("ngModel",r.firstname),p.xp6(5),p.Q6J("ngModel",r.lastname),p.xp6(5),p.Q6J("ngModel",r.email),p.xp6(5),p.Q6J("ngModel",r.password),p.xp6(5),p.Q6J("ngModel",r.aadhar),p.xp6(5),p.Q6J("ngModel",r.pan),p.xp6(9),p.Q6J("routerLink",p.DdM(8,ok)),p.xp6(2),p.Q6J("ngIf",r.auth.loader))},dependencies:[zn,Uf,jr,wt,ji,sd,oo,Ol]}),n})()},{path:"home",component:tk}];let uk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Vv.forRoot(ak),Vv]}),n})(),lk=(()=>{class n{constructor(t){this.route=t,this.title="mybankingaccount"}ngOnInit(){this.route.navigate([" "])}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Rr))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")(1,"router-outlet")},dependencies:[vv]}),n})(),ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[lk]}),n.\u0275inj=p.cJS({providers:[nw],imports:[Jp,uk,Mr.hO.initializeApp(Ag_firebase),JD,eb]}),n})();(0,p.G48)(),Ps().bootstrapModule(ck).catch(n=>console.error(n))},9751:(ht,Ce,k)=>{k.d(Ce,{y:()=>ce});var p=k(2961),Y=k(727),O=k(8822),ee=k(9635),J=k(2416),oe=k(576),ie=k(2806);let ce=(()=>{class q{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const _e=new q;return _e.source=this,_e.operator=Te,_e}subscribe(Te,_e,et){const ge=function $(q){return q&&q instanceof p.Lv||function B(q){return q&&(0,oe.m)(q.next)&&(0,oe.m)(q.error)&&(0,oe.m)(q.complete)}(q)&&(0,Y.Nn)(q)}(Te)?Te:new p.Hp(Te,_e,et);return(0,ie.x)(()=>{const{operator:ae,source:Je}=this;ge.add(ae?ae.call(ge,Je):Je?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Te){try{return this._subscribe(Te)}catch(_e){Te.error(_e)}}forEach(Te,_e){return new(_e=le(_e))((et,ge)=>{const ae=new p.Hp({next:Je=>{try{Te(Je)}catch(lt){ge(lt),ae.unsubscribe()}},error:ge,complete:et});this.subscribe(ae)})}_subscribe(Te){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Te)}[O.L](){return this}pipe(...Te){return(0,ee.U)(Te)(this)}toPromise(Te){return new(Te=le(Te))((_e,et)=>{let ge;this.subscribe(ae=>ge=ae,ae=>et(ae),()=>_e(ge))})}}return q.create=je=>new q(je),q})();function le(q){var je;return null!==(je=q??J.v.Promise)&&void 0!==je?je:Promise}},7579:(ht,Ce,k)=>{k.d(Ce,{x:()=>ie});var p=k(9751),Y=k(727);const ee=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),oe=k(2806);let ie=(()=>{class le extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const q=new ce(this,this);return q.operator=$,q}_throwIfClosed(){if(this.closed)throw new ee}next($){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next($)}})}error($){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:q}=this;for(;q.length;)q.shift().error($)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:q,isStopped:je,observers:Te}=this;return q||je?Y.Lc:(this.currentObservers=null,Te.push($),new Y.w0(()=>{this.currentObservers=null,(0,J.P)(Te,$)}))}_checkFinalizedStatuses($){const{hasError:q,thrownError:je,isStopped:Te}=this;q?$.error(je):Te&&$.complete()}asObservable(){const $=new p.y;return $.source=this,$}}return le.create=(B,$)=>new ce(B,$),le})();class ce extends ie{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===q||q.call($,B)}error(B){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===q||q.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,q;return null!==(q=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==q?q:Y.Lc}}},2961:(ht,Ce,k)=>{k.d(Ce,{Hp:()=>et,Lv:()=>q});var p=k(576),Y=k(727),O=k(2416),ee=k(7849);function J(){}const oe=le("C",void 0,void 0);function le(De,ye,we){return{kind:De,value:ye,error:we}}var B=k(3410),$=k(2806);class q extends Y.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,Y.Nn)(ye)&&ye.add(this)):this.destination=lt}static create(ye,we,Ve){return new et(ye,we,Ve)}next(ye){this.isStopped?Je(function ce(De){return le("N",De,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Je(function ie(De){return le("E",void 0,De)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Je(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Te(De,ye){return je.call(De,ye)}class _e{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:we}=this;if(we.next)try{we.next(ye)}catch(Ve){ge(Ve)}}error(ye){const{partialObserver:we}=this;if(we.error)try{we.error(ye)}catch(Ve){ge(Ve)}else ge(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(we){ge(we)}}}class et extends q{constructor(ye,we,Ve){let Ue;if(super(),(0,p.m)(ye)||!ye)Ue={next:ye??void 0,error:we??void 0,complete:Ve??void 0};else{let U;this&&O.v.useDeprecatedNextContext?(U=Object.create(ye),U.unsubscribe=()=>this.unsubscribe(),Ue={next:ye.next&&Te(ye.next,U),error:ye.error&&Te(ye.error,U),complete:ye.complete&&Te(ye.complete,U)}):Ue=ye}this.destination=new _e(Ue)}}function ge(De){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(De):(0,ee.h)(De)}function Je(De,ye){const{onStoppedNotification:we}=O.v;we&&B.z.setTimeout(()=>we(De,ye))}const lt={closed:!0,next:J,error:function ae(De){throw De},complete:J}},727:(ht,Ce,k)=>{k.d(Ce,{Lc:()=>oe,w0:()=>J,Nn:()=>ie});var p=k(576);const O=(0,k(3888).d)(le=>function($){le(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((q,je)=>`${je+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ee=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Te of $)Te.remove(this);else $.remove(this);const{initialTeardown:q}=this;if((0,p.m)(q))try{q()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Te of je)try{ce(Te)}catch(_e){B=B??[],_e instanceof O?B=[...B,..._e.errors]:B.push(_e)}}if(B)throw new O(B)}}add(B){var $;if(B&&B!==this)if(this.closed)ce(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,ee.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,ee.P)($,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const le=new J;return le.closed=!0,le})();const oe=J.EMPTY;function ie(le){return le instanceof J||le&&"closed"in le&&(0,p.m)(le.remove)&&(0,p.m)(le.add)&&(0,p.m)(le.unsubscribe)}function ce(le){(0,p.m)(le)?le():le.unsubscribe()}},2416:(ht,Ce,k)=>{k.d(Ce,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Ce,k)=>{k.d(Ce,{E:()=>Y});const Y=new(k(9751).y)(J=>J.complete())},8996:(ht,Ce,k)=>{k.d(Ce,{D:()=>ye});var p=k(8421),Y=k(5363),O=k(9468),oe=k(9751),ce=k(2202),le=k(576),B=k(9672);function q(we,Ve){if(!we)throw new Error("Iterable cannot be null");return new oe.y(Ue=>{(0,B.f)(Ue,Ve,()=>{const U=we[Symbol.asyncIterator]();(0,B.f)(Ue,Ve,()=>{U.next().then(fe=>{fe.done?Ue.complete():Ue.next(fe.value)})},0,!0)})})}var je=k(3670),Te=k(8239),_e=k(1144),et=k(6495),ge=k(2206),ae=k(4532),Je=k(3260);function ye(we,Ve){return Ve?function De(we,Ve){if(null!=we){if((0,je.c)(we))return function ee(we,Ve){return(0,p.Xf)(we).pipe((0,O.R)(Ve),(0,Y.Q)(Ve))}(we,Ve);if((0,_e.z)(we))return function ie(we,Ve){return new oe.y(Ue=>{let U=0;return Ve.schedule(function(){U===we.length?Ue.complete():(Ue.next(we[U++]),Ue.closed||this.schedule())})})}(we,Ve);if((0,Te.t)(we))return function J(we,Ve){return(0,p.Xf)(we).pipe((0,O.R)(Ve),(0,Y.Q)(Ve))}(we,Ve);if((0,ge.D)(we))return q(we,Ve);if((0,et.T)(we))return function $(we,Ve){return new oe.y(Ue=>{let U;return(0,B.f)(Ue,Ve,()=>{U=we[ce.h](),(0,B.f)(Ue,Ve,()=>{let fe,Fe;try{({value:fe,done:Fe}=U.next())}catch(Ye){return void Ue.error(Ye)}Fe?Ue.complete():Ue.next(fe)},0,!0)}),()=>(0,le.m)(U?.return)&&U.return()})}(we,Ve);if((0,Je.L)(we))return function lt(we,Ve){return q((0,Je.Q)(we),Ve)}(we,Ve)}throw(0,ae.z)(we)}(we,Ve):(0,p.Xf)(we)}},8421:(ht,Ce,k)=>{k.d(Ce,{Xf:()=>je});var p=k(655),Y=k(1144),O=k(8239),ee=k(9751),J=k(3670),oe=k(2206),ie=k(4532),ce=k(6495),le=k(3260),B=k(576),$=k(7849),q=k(8822);function je(De){if(De instanceof ee.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new ee.y(ye=>{const we=De[q.L]();if((0,B.m)(we.subscribe))return we.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Y.z)(De))return function _e(De){return new ee.y(ye=>{for(let we=0;we<De.length&&!ye.closed;we++)ye.next(De[we]);ye.complete()})}(De);if((0,O.t)(De))return function et(De){return new ee.y(ye=>{De.then(we=>{ye.closed||(ye.next(we),ye.complete())},we=>ye.error(we)).then(null,$.h)})}(De);if((0,oe.D)(De))return ae(De);if((0,ce.T)(De))return function ge(De){return new ee.y(ye=>{for(const we of De)if(ye.next(we),ye.closed)return;ye.complete()})}(De);if((0,le.L)(De))return function Je(De){return ae((0,le.Q)(De))}(De)}throw(0,ie.z)(De)}function ae(De){return new ee.y(ye=>{(function lt(De,ye){var we,Ve,Ue,U;return(0,p.mG)(this,void 0,void 0,function*(){try{for(we=(0,p.KL)(De);!(Ve=yield we.next()).done;)if(ye.next(Ve.value),ye.closed)return}catch(fe){Ue={error:fe}}finally{try{Ve&&!Ve.done&&(U=we.return)&&(yield U.call(we))}finally{if(Ue)throw Ue.error}}ye.complete()})})(De,ye).catch(we=>ye.error(we))})}},6451:(ht,Ce,k)=>{k.d(Ce,{T:()=>oe});var p=k(8189),Y=k(8421),O=k(515),ee=k(7669),J=k(8996);function oe(...ie){const ce=(0,ee.yG)(ie),le=(0,ee._6)(ie,1/0),B=ie;return B.length?1===B.length?(0,Y.Xf)(B[0]):(0,p.J)(le)((0,J.D)(B,ce)):O.E}},5403:(ht,Ce,k)=>{k.d(Ce,{x:()=>Y});var p=k(2961);function Y(ee,J,oe,ie,ce){return new O(ee,J,oe,ie,ce)}class O extends p.Lv{constructor(J,oe,ie,ce,le,B){super(J),this.onFinalize=le,this.shouldUnsubscribe=B,this._next=oe?function($){try{oe($)}catch(q){J.error(q)}}:super._next,this._error=ce?function($){try{ce($)}catch(q){J.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch($){J.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(ht,Ce,k)=>{k.d(Ce,{U:()=>O});var p=k(4482),Y=k(5403);function O(ee,J){return(0,p.e)((oe,ie)=>{let ce=0;oe.subscribe((0,Y.x)(ie,le=>{ie.next(ee.call(J,le,ce++))}))})}},8189:(ht,Ce,k)=>{k.d(Ce,{J:()=>O});var p=k(5577),Y=k(4671);function O(ee=1/0){return(0,p.z)(Y.y,ee)}},5577:(ht,Ce,k)=>{k.d(Ce,{z:()=>ce});var p=k(4004),Y=k(8421),O=k(4482),ee=k(9672),J=k(5403),ie=k(576);function ce(le,B,$=1/0){return(0,ie.m)(B)?ce((q,je)=>(0,p.U)((Te,_e)=>B(q,Te,je,_e))((0,Y.Xf)(le(q,je))),$):("number"==typeof B&&($=B),(0,O.e)((q,je)=>function oe(le,B,$,q,je,Te,_e,et){const ge=[];let ae=0,Je=0,lt=!1;const De=()=>{lt&&!ge.length&&!ae&&B.complete()},ye=Ve=>ae<q?we(Ve):ge.push(Ve),we=Ve=>{Te&&B.next(Ve),ae++;let Ue=!1;(0,Y.Xf)($(Ve,Je++)).subscribe((0,J.x)(B,U=>{je?.(U),Te?ye(U):B.next(U)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(ae--;ge.length&&ae<q;){const U=ge.shift();_e?(0,ee.f)(B,_e,()=>we(U)):we(U)}De()}catch(U){B.error(U)}}))};return le.subscribe((0,J.x)(B,ye,()=>{lt=!0,De()})),()=>{et?.()}}(q,je,le,$)))}},5363:(ht,Ce,k)=>{k.d(Ce,{Q:()=>ee});var p=k(9672),Y=k(4482),O=k(5403);function ee(J,oe=0){return(0,Y.e)((ie,ce)=>{ie.subscribe((0,O.x)(ce,le=>(0,p.f)(ce,J,()=>ce.next(le),oe),()=>(0,p.f)(ce,J,()=>ce.complete(),oe),le=>(0,p.f)(ce,J,()=>ce.error(le),oe)))})}},3099:(ht,Ce,k)=>{k.d(Ce,{B:()=>J});var p=k(8421),Y=k(7579),O=k(2961),ee=k(4482);function J(ie={}){const{connector:ce=(()=>new Y.x),resetOnError:le=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=ie;return q=>{let je,Te,_e,et=0,ge=!1,ae=!1;const Je=()=>{Te?.unsubscribe(),Te=void 0},lt=()=>{Je(),je=_e=void 0,ge=ae=!1},De=()=>{const ye=je;lt(),ye?.unsubscribe()};return(0,ee.e)((ye,we)=>{et++,!ae&&!ge&&Je();const Ve=_e=_e??ce();we.add(()=>{et--,0===et&&!ae&&!ge&&(Te=oe(De,$))}),Ve.subscribe(we),!je&&et>0&&(je=new O.Hp({next:Ue=>Ve.next(Ue),error:Ue=>{ae=!0,Je(),Te=oe(lt,le,Ue),Ve.error(Ue)},complete:()=>{ge=!0,Je(),Te=oe(lt,B),Ve.complete()}}),(0,p.Xf)(ye).subscribe(je))})(q)}}function oe(ie,ce,...le){if(!0===ce)return void ie();if(!1===ce)return;const B=new O.Hp({next:()=>{B.unsubscribe(),ie()}});return ce(...le).subscribe(B)}},9468:(ht,Ce,k)=>{k.d(Ce,{R:()=>Y});var p=k(4482);function Y(O,ee=0){return(0,p.e)((J,oe)=>{oe.add(O.schedule(()=>J.subscribe(oe),ee))})}},8505:(ht,Ce,k)=>{k.d(Ce,{b:()=>J});var p=k(576),Y=k(4482),O=k(5403),ee=k(4671);function J(oe,ie,ce){const le=(0,p.m)(oe)||ie||ce?{next:oe,error:ie,complete:ce}:oe;return le?(0,Y.e)((B,$)=>{var q;null===(q=le.subscribe)||void 0===q||q.call(le);let je=!0;B.subscribe((0,O.x)($,Te=>{var _e;null===(_e=le.next)||void 0===_e||_e.call(le,Te),$.next(Te)},()=>{var Te;je=!1,null===(Te=le.complete)||void 0===Te||Te.call(le),$.complete()},Te=>{var _e;je=!1,null===(_e=le.error)||void 0===_e||_e.call(le,Te),$.error(Te)},()=>{var Te,_e;je&&(null===(Te=le.unsubscribe)||void 0===Te||Te.call(le)),null===(_e=le.finalize)||void 0===_e||_e.call(le)}))}):ee.y}},4408:(ht,Ce,k)=>{k.d(Ce,{o:()=>J});var p=k(727);class Y extends p.w0{constructor(ie,ce){super()}schedule(ie,ce=0){return this}}const O={setInterval(oe,ie,...ce){const{delegate:le}=O;return le?.setInterval?le.setInterval(oe,ie,...ce):setInterval(oe,ie,...ce)},clearInterval(oe){const{delegate:ie}=O;return(ie?.clearInterval||clearInterval)(oe)},delegate:void 0};var ee=k(8737);class J extends Y{constructor(ie,ce){super(ie,ce),this.scheduler=ie,this.work=ce,this.pending=!1}schedule(ie,ce=0){var le;if(this.closed)return this;this.state=ie;const B=this.id,$=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId($,B,ce)),this.pending=!0,this.delay=ce,this.id=null!==(le=this.id)&&void 0!==le?le:this.requestAsyncId($,this.id,ce),this}requestAsyncId(ie,ce,le=0){return O.setInterval(ie.flush.bind(ie,this),le)}recycleAsyncId(ie,ce,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return ce;null!=ce&&O.clearInterval(ce)}execute(ie,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ie,ce);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ce){let B,le=!1;try{this.work(ie)}catch($){le=!0,B=$||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ce}=this,{actions:le}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(le,this),null!=ie&&(this.id=this.recycleAsyncId(ce,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Ce,k)=>{k.d(Ce,{v:()=>O});var p=k(6063);class Y{constructor(J,oe=Y.now){this.schedulerActionCtor=J,this.now=oe}schedule(J,oe=0,ie){return new this.schedulerActionCtor(this,J).schedule(ie,oe)}}Y.now=p.l.now;class O extends Y{constructor(J,oe=Y.now){super(J,oe),this.actions=[],this._active=!1}flush(J){const{actions:oe}=this;if(this._active)return void oe.push(J);let ie;this._active=!0;do{if(ie=J.execute(J.state,J.delay))break}while(J=oe.shift());if(this._active=!1,ie){for(;J=oe.shift();)J.unsubscribe();throw ie}}}},4986:(ht,Ce,k)=>{k.d(Ce,{z:()=>O});var p=k(4408);const O=new(k(7565).v)(p.o)},6063:(ht,Ce,k)=>{k.d(Ce,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(ht,Ce,k)=>{k.d(Ce,{z:()=>p});const p={setTimeout(Y,O,...ee){const{delegate:J}=p;return J?.setTimeout?J.setTimeout(Y,O,...ee):setTimeout(Y,O,...ee)},clearTimeout(Y){const{delegate:O}=p;return(O?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(ht,Ce,k)=>{k.d(Ce,{h:()=>Y});const Y=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Ce,k)=>{k.d(Ce,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,Ce,k)=>{k.d(Ce,{_6:()=>oe,jO:()=>ee,yG:()=>J});var p=k(576);function O(ie){return ie[ie.length-1]}function ee(ie){return(0,p.m)(O(ie))?ie.pop():void 0}function J(ie){return function Y(ie){return ie&&(0,p.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function oe(ie,ce){return"number"==typeof O(ie)?ie.pop():ce}},8737:(ht,Ce,k)=>{function p(Y,O){if(Y){const ee=Y.indexOf(O);0<=ee&&Y.splice(ee,1)}}k.d(Ce,{P:()=>p})},3888:(ht,Ce,k)=>{function p(Y){const ee=Y(J=>{Error.call(J),J.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}k.d(Ce,{d:()=>p})},2806:(ht,Ce,k)=>{k.d(Ce,{O:()=>ee,x:()=>O});var p=k(2416);let Y=null;function O(J){if(p.v.useDeprecatedSynchronousErrorHandling){const oe=!Y;if(oe&&(Y={errorThrown:!1,error:null}),J(),oe){const{errorThrown:ie,error:ce}=Y;if(Y=null,ie)throw ce}}else J()}function ee(J){p.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=J)}},9672:(ht,Ce,k)=>{function p(Y,O,ee,J=0,oe=!1){const ie=O.schedule(function(){ee(),oe?Y.add(this.schedule(null,J)):this.unsubscribe()},J);if(Y.add(ie),!oe)return ie}k.d(Ce,{f:()=>p})},4671:(ht,Ce,k)=>{function p(Y){return Y}k.d(Ce,{y:()=>p})},1144:(ht,Ce,k)=>{k.d(Ce,{z:()=>p});const p=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ht,Ce,k)=>{k.d(Ce,{D:()=>Y});var p=k(576);function Y(O){return Symbol.asyncIterator&&(0,p.m)(O?.[Symbol.asyncIterator])}},576:(ht,Ce,k)=>{function p(Y){return"function"==typeof Y}k.d(Ce,{m:()=>p})},3670:(ht,Ce,k)=>{k.d(Ce,{c:()=>O});var p=k(8822),Y=k(576);function O(ee){return(0,Y.m)(ee[p.L])}},6495:(ht,Ce,k)=>{k.d(Ce,{T:()=>O});var p=k(2202),Y=k(576);function O(ee){return(0,Y.m)(ee?.[p.h])}},8239:(ht,Ce,k)=>{k.d(Ce,{t:()=>Y});var p=k(576);function Y(O){return(0,p.m)(O?.then)}},3260:(ht,Ce,k)=>{k.d(Ce,{L:()=>ee,Q:()=>O});var p=k(655),Y=k(576);function O(J){return(0,p.FC)(this,arguments,function*(){const ie=J.getReader();try{for(;;){const{value:ce,done:le}=yield(0,p.qq)(ie.read());if(le)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ce)}}finally{ie.releaseLock()}})}function ee(J){return(0,Y.m)(J?.getReader)}},4482:(ht,Ce,k)=>{k.d(Ce,{A:()=>Y,e:()=>O});var p=k(576);function Y(ee){return(0,p.m)(ee?.lift)}function O(ee){return J=>{if(Y(J))return J.lift(function(oe){try{return ee(oe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ht,Ce,k)=>{k.d(Ce,{U:()=>O,z:()=>Y});var p=k(4671);function Y(...ee){return O(ee)}function O(ee){return 0===ee.length?p.y:1===ee.length?ee[0]:function(oe){return ee.reduce((ie,ce)=>ce(ie),oe)}}},7849:(ht,Ce,k)=>{k.d(Ce,{h:()=>O});var p=k(2416),Y=k(3410);function O(ee){Y.z.setTimeout(()=>{const{onUnhandledError:J}=p.v;if(!J)throw ee;J(ee)})}},4532:(ht,Ce,k)=>{function p(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>p})},655:(ht,Ce,k)=>{function ee(ne,he){var ve={};for(var Me in ne)Object.prototype.hasOwnProperty.call(ne,Me)&&he.indexOf(Me)<0&&(ve[Me]=ne[Me]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(Me=Object.getOwnPropertySymbols(ne);Re<Me.length;Re++)he.indexOf(Me[Re])<0&&Object.prototype.propertyIsEnumerable.call(ne,Me[Re])&&(ve[Me[Re]]=ne[Me[Re]])}return ve}function q(ne,he,ve,Me){return new(ve||(ve=Promise))(function(Ee,it){function Ot(Yt){try{Ke(Me.next(Yt))}catch(pt){it(pt)}}function Jt(Yt){try{Ke(Me.throw(Yt))}catch(pt){it(pt)}}function Ke(Yt){Yt.done?Ee(Yt.value):function Re(Ee){return Ee instanceof ve?Ee:new ve(function(it){it(Ee)})}(Yt.value).then(Ot,Jt)}Ke((Me=Me.apply(ne,he||[])).next())})}function De(ne){return this instanceof De?(this.v=ne,this):new De(ne)}function ye(ne,he,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,Me=ve.apply(ne,he||[]),Ee=[];return Re={},it("next"),it("throw"),it("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function it(bt){Me[bt]&&(Re[bt]=function(dr){return new Promise(function(mn,_n){Ee.push([bt,dr,mn,_n])>1||Ot(bt,dr)})})}function Ot(bt,dr){try{!function Jt(bt){bt.value instanceof De?Promise.resolve(bt.value.v).then(Ke,Yt):pt(Ee[0][2],bt)}(Me[bt](dr))}catch(mn){pt(Ee[0][3],mn)}}function Ke(bt){Ot("next",bt)}function Yt(bt){Ot("throw",bt)}function pt(bt,dr){bt(dr),Ee.shift(),Ee.length&&Ot(Ee[0][0],Ee[0][1])}}function Ve(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,he=ne[Symbol.asyncIterator];return he?he.call(ne):(ne=function et(ne){var he="function"==typeof Symbol&&Symbol.iterator,ve=he&&ne[he],Me=0;if(ve)return ve.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&Me>=ne.length&&(ne=void 0),{value:ne&&ne[Me++],done:!ne}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),ve={},Me("next"),Me("throw"),Me("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function Me(Ee){ve[Ee]=ne[Ee]&&function(it){return new Promise(function(Ot,Jt){!function Re(Ee,it,Ot,Jt){Promise.resolve(Jt).then(function(Ke){Ee({value:Ke,done:Ot})},it)}(Ot,Jt,(it=ne[Ee](it)).done,it.value)})}}}k.d(Ce,{FC:()=>ye,KL:()=>Ve,_T:()=>ee,mG:()=>q,qq:()=>De})},4650:(ht,Ce,k)=>{k.d(Ce,{$8M:()=>Yc,$Z:()=>Lw,AFp:()=>oh,AaK:()=>ce,CRH:()=>eh,CZH:()=>Xo,CqO:()=>Gf,D6c:()=>uD,DdM:()=>xe,EJc:()=>yc,F4k:()=>Pt,FYo:()=>Ma,FiY:()=>We,G48:()=>$t,GfV:()=>iv,Gpc:()=>$,JOm:()=>ji,LFG:()=>Ln,LSH:()=>Ag,Lbi:()=>Ha,Lck:()=>bI,MMx:()=>P_,NdJ:()=>jd,OlP:()=>dn,Oqu:()=>Zf,PXZ:()=>za,Q6J:()=>jv,QGY:()=>Hf,QP$:()=>Ct,Qsj:()=>rv,R0b:()=>js,RDi:()=>y,Rgc:()=>Jd,SBq:()=>Ad,Sil:()=>$I,Suo:()=>Z_,TTD:()=>Xi,TgZ:()=>pe,X6Q:()=>sT,XFs:()=>Ze,Xpm:()=>Ie,Xts:()=>Mg,Y36:()=>Yl,YKP:()=>R_,YNc:()=>ei,Yjl:()=>z,Yz7:()=>Ke,Z0I:()=>dr,ZZ4:()=>x0,_Bn:()=>lp,_UZ:()=>Bd,_Vd:()=>Gi,_c5:()=>Ai,_uU:()=>wm,aQg:()=>Jo,c2e:()=>p0,cJS:()=>pt,cg1:()=>Cm,dDg:()=>tT,dqk:()=>ln,eFA:()=>ey,ekj:()=>e_,eoX:()=>ZI,f3M:()=>D,g9A:()=>h0,h0i:()=>Hr,hGG:()=>wT,iGM:()=>K_,ifc:()=>dt,ip1:()=>Ym,jDz:()=>k_,kL8:()=>Am,lG2:()=>L,lqb:()=>Ul,lri:()=>_0,n5z:()=>Zc,oAB:()=>Ut,q4F:()=>sv,qLn:()=>Sd,qOj:()=>cm,qZA:()=>Wo,rWj:()=>lh,sBO:()=>Tp,sIi:()=>ec,s_b:()=>fp,soG:()=>ah,tb:()=>f0,tp0:()=>ot,uIk:()=>Lv,vHH:()=>_e,vpe:()=>ls,wAp:()=>Et,xp6:()=>Cw,z2F:()=>Yu,zSh:()=>bd,zs3:()=>Wl});var p=k(7579),Y=k(727),O=k(9751),ee=k(6451),J=k(3099);function oe(i){for(let s in i)if(i[s]===oe)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=oe({__forward_ref__:oe});function $(i){return i.__forward_ref__=$,i.toString=function(){return ce(this())},i}function q(i){return je(i)?i():i}function je(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}class _e extends Error{constructor(s,a){super(function et(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ye(i,s){throw new _e(-201,!1)}function Re(i,s){null==i&&function Ee(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Ke(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function pt(i){return{providers:i.providers||[],imports:i.imports||[]}}function bt(i){return mn(i,xi)||mn(i,vi)}function dr(i){return null!==bt(i)}function mn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Gr(i){return i&&(i.hasOwnProperty(zr)||i.hasOwnProperty(Eo))?i[zr]:null}const xi=oe({\u0275prov:oe}),zr=oe({\u0275inj:oe}),vi=oe({ngInjectableDef:oe}),Eo=oe({ngInjectorDef:oe});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let Dr;function ir(i){const s=Dr;return Dr=i,s}function ii(i,s,a){const l=bt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ze.Optional?null:void 0!==s?s:void ye(ce(i))}function Mn(i){return{toString:i}.toString()}var Jn=(()=>((Jn=Jn||{})[Jn.OnPush=0]="OnPush",Jn[Jn.Default=1]="Default",Jn))(),dt=(()=>{return(i=dt||(dt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",dt;var i})();const ln=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fr={},xt=[],_s=oe({\u0275cmp:oe}),en=oe({\u0275dir:oe}),Oi=oe({\u0275pipe:oe}),tn=oe({\u0275mod:oe}),sr=oe({\u0275fac:oe}),kr=oe({__NG_ELEMENT_ID__:oe});let nt=0;function Ie(i){return Mn(()=>{const a=!0===i.standalone,l={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||xt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||dt.Emulated,id:"c"+nt++,styles:i.styles||xt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return c.inputs=V(i.inputs,l),c.outputs=V(i.outputs),v&&v.forEach(E=>E(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(At).filter(Rt):null,c.pipeDefs=f?()=>("function"==typeof f?f():f).map(He).filter(Rt):null,c})}function At(i){return re(i)||Q(i)}function Rt(i){return null!==i}function Ut(i){return Mn(()=>({type:i.type,bootstrap:i.bootstrap||xt,declarations:i.declarations||xt,imports:i.imports||xt,exports:i.exports||xt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function V(i,s){if(null==i)return fr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const L=Ie;function z(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function re(i){return i[_s]||null}function Q(i){return i[en]||null}function He(i){return i[Oi]||null}function Ct(i){const s=re(i)||Q(i)||He(i);return null!==s&&s.standalone}function Gt(i,s){const a=i[tn]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function or(i){return Array.isArray(i)&&"object"==typeof i[1]}function Fr(i){return Array.isArray(i)&&!0===i[1]}function Qa(i){return 0!=(8&i.flags)}function na(i){return 2==(2&i.flags)}function rl(i){return 1==(1&i.flags)}function Cr(i){return null!==i.template}function Ch(i){return 0!=(256&i[2])}function ki(i,s){return i.hasOwnProperty(sr)?i[sr]:null}class Qi{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Xi(){return Ws}function Ws(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ja),ra}function ra(){const i=Sh(this),s=i?.current;if(s){const a=i.previous;if(a===fr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Ja(i,s,a,l){const c=Sh(i)||function ia(i,s){return i[al]=s}(i,{previous:fr,current:null}),f=c.current||(c.current={}),v=c.previous,E=this.declaredInputs[a],I=v[E];f[E]=new Qi(I&&I.currentValue,s,v===fr),i[l]=s}Xi.ngInherit=!0;const al="__ngSimpleChanges__";function Sh(i){return i[al]||null}function xn(i){for(;Array.isArray(i);)i=i[0];return i}function oi(i,s){return xn(s[i])}function Tr(i,s){return xn(s[i.index])}function Co(i,s){return i.data[s]}function kn(i,s){const a=s[i];return or(a)?a:a[0]}function sa(i){return 64==(64&i[2])}function wi(i,s){return null==s?null:i[s]}function Ks(i){i[18]=0}function An(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const Dt={lFrame:hl(null),bindingsEnabled:!0};function To(){return Dt.bindingsEnabled}function be(){return Dt.lFrame.lView}function zt(){return Dt.lFrame.tView}function Rn(){let i=ou();for(;null!==i&&64===i.type;)i=i.parent;return i}function ou(){return Dt.lFrame.currentTNode}function ai(i,s){const a=Dt.lFrame;a.currentTNode=i,a.isParent=s}function Ao(){return Dt.lFrame.isParent}function Ys(){return Dt.lFrame.bindingIndex++}function Kp(i,s){const a=Dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,da(s)}function da(i){Dt.lFrame.currentDirectiveIndex=i}function So(){return Dt.lFrame.currentQueryIndex}function ts(i){Dt.lFrame.currentQueryIndex=i}function Vc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function au(i,s,a){if(a&Ze.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&Ze.Host||(c=Vc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=Dt.lFrame=fa();return l.currentTNode=s,l.lView=i,!0}function Mo(i){const s=fa(),a=i[1];Dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function fa(){const i=Dt.lFrame,s=null===i?null:i.child;return null===s?hl(i):s}function hl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function fl(){const i=Dt.lFrame;return Dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Uc=fl;function xo(){const i=fl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Lr(){return Dt.lFrame.selectedIndex}function ui(i){Dt.lFrame.selectedIndex=i}function In(){const i=Dt.lFrame;return Co(i.tView,i.selectedIndex)}function Hc(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:x}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function Ro(i,s,a){gl(i,s,3,a)}function Gc(i,s,a,l){(3&i[2])===a&&gl(i,s,a,l)}function Qp(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function gl(i,s,a,l){const f=l??-1,v=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<v;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Ay(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Ay(i,s,a,l){const c=a[l]<0,f=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Oo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function lu(i,s,a){let l=0;for(;l<a.length;){const c=a[l];if("number"==typeof c){if(0!==c)break;l++;const f=a[l++],v=a[l++],E=a[l++];i.setAttribute(s,v,E,f)}else{const f=c,v=a[++l];vl(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),l++}}return l}function Li(i){return 3===i||4===i||6===i}function vl(i){return 64===i.charCodeAt(0)}function pa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||zc(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function zc(i,s,a,l,c){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function qc(i){return-1!==i}function ar(i){return 32767&i}function Ss(i,s){let a=function cu(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Wr=!0;function ko(i){const s=Wr;return Wr=i,s}let Nn=0;const Vr={};function Ms(i,s){const a=_l(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ya(l.data,i),ya(s,null),ya(l.blueprint,null));const c=du(i,s),f=i.injectorIndex;if(qc(c)){const v=ar(c),E=Ss(c,s),I=E[1].data;for(let T=0;T<8;T++)s[f+T]=E[v+T]|I[v+T]}return s[f+8]=c,f}function ya(i,s){i.push(0,0,0,0,0,0,0,0,s)}function _l(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function du(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){if(l=Il(c),null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Qs(i,s,a){!function ma(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(kr)&&(l=a[kr]),null==l&&(l=a[kr]=Nn++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function xs(i,s,a){if(a&Ze.Optional||void 0!==i)return i;ye()}function Wc(i,s,a,l){if(a&Ze.Optional&&void 0===l&&(l=null),0==(a&(Ze.Self|Ze.Host))){const c=i[9],f=ir(void 0);try{return c?c.get(s,l,a&Ze.Optional):ii(s,l,a&Ze.Optional)}finally{ir(f)}}return xs(l,0,a)}function Ui(i,s,a,l=Ze.Default,c){if(null!==i){if(1024&s[2]){const v=function Rs(i,s,a,l,c){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=Xs(f,v,a,l|Ze.Self,Vr);if(E!==Vr)return E;let I=f.parent;if(!I){const T=v[21];if(T){const x=T.get(a,Vr,l);if(x!==Vr)return x}I=Il(v),v=v[15]}f=I}return c}(i,s,a,l,Vr);if(v!==Vr)return v}const f=Xs(i,s,a,l,Vr);if(f!==Vr)return f}return Wc(s,a,l,c)}function Xs(i,s,a,l,c){const f=function El(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(kr)?i[kr]:void 0;return"number"==typeof s?s>=0?255&s:Kc:s}(a);if("function"==typeof f){if(!au(s,i,l))return l&Ze.Host?xs(c,0,l):Wc(s,a,l,c);try{const v=f(l);if(null!=v||l&Ze.Optional)return v;ye()}finally{Uc()}}else if("number"==typeof f){let v=null,E=_l(i,s),I=-1,T=l&Ze.Host?s[16][6]:null;for((-1===E||l&Ze.SkipSelf)&&(I=-1===E?du(i,s):s[E+8],-1!==I&&Fo(l,!1)?(v=s[1],E=ar(I),s=Ss(I,s)):E=-1);-1!==E;){const x=s[1];if(fu(f,E,x.data)){const P=wl(E,s,a,v,l,T);if(P!==Vr)return P}I=s[E+8],-1!==I&&Fo(l,s[1].data[E+8]===T)&&fu(f,E,s)?(v=x,E=ar(I),s=Ss(I,s)):E=-1}}return c}function wl(i,s,a,l,c,f){const v=s[1],E=v.data[i+8],x=Js(E,v,a,null==l?na(E)&&Wr:l!=v&&0!=(3&E.type),c&Ze.Host&&f===E);return null!==x?ns(s,v,x,E):Vr}function Js(i,s,a,l,c){const f=i.providerIndexes,v=s.data,E=1048575&f,I=i.directiveStart,x=f>>20,H=c?E+x:i.directiveEnd;for(let K=l?E:E+x;K<H;K++){const me=v[K];if(K<I&&a===me||K>=I&&me.type===a)return K}if(c){const K=v[I];if(K&&Cr(K)&&K.type===a)return I}return null}function ns(i,s,a,l){let c=i[a];const f=s.data;if(function Po(i){return i instanceof Oo}(c)){const v=c;v.resolving&&function Je(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new _e(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ae(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(f[a]));const E=ko(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?ir(v.injectImpl):null;au(i,l,Ze.Default);try{c=i[a]=v.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Ty(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const v=Ws(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&ir(I),ko(E),v.resolving=!1,Uc()}}return c}function fu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Fo(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class rs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ui(this._tNode,this._lView,s,l,a)}}function Kc(){return new rs(Rn(),be())}function Zc(i){return Mn(()=>{const s=i.prototype.constructor,a=s[sr]||pu(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[sr]||pu(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function pu(i){return je(i)?()=>{const s=pu(q(i));return s&&s()}:ki(i)}function Il(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Yc(i){return function hu(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(Li(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(Rn(),i)}const Ns="__parameters__";function Os(i,s,a){return Mn(()=>{const l=function va(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const v=new c(...f);return E.annotation=v,E;function E(I,T,x){const P=I.hasOwnProperty(Ns)?I[Ns]:Object.defineProperty(I,Ns,{value:[]})[Ns];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(v),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ke({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Sr(l,s)):s!==i&&s.push(l)}return s}function li(i,s){i.forEach(a=>Array.isArray(a)?li(a,s):s(a))}function Uh(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function _a(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Zr(i,s,a){let l=ro(i,s);return l>=0?i[1|l]=a:(l=~l,function Xc(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function _u(i,s){const a=ro(i,s);if(a>=0)return i[1|a]}function ro(i,s){return function wu(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),v=i[f<<a];if(s===v)return f<<a;v>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const Bi={},Tl="__NG_DI_FLAG__",Iu="ngTempTokenPath",Du=/\n/gm,bu="__source";let Ei;function Dn(i){const s=Ei;return Ei=i,s}function St(i,s=Ze.Default){if(void 0===Ei)throw new _e(-203,!1);return null===Ei?ii(i,void 0,s):Ei.get(i,s&Ze.Optional?null:void 0,s)}function Ln(i,s=Ze.Default){return(function Ri(){return Dr}()||St)(q(i),s)}function D(i,s=Ze.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Ln(i,s)}function C(i){const s=[];for(let a=0;a<i.length;a++){const l=q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new _e(900,!1);let c,f=Ze.Default;for(let v=0;v<l.length;v++){const E=l[v],I=F(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Ln(c,f))}else s.push(Ln(l))}return s}function M(i,s){return i[Tl]=s,i.prototype[Tl]=s,i}function F(i){return i[Tl]}const We=M(Os("Optional"),8),ot=M(Os("SkipSelf"),4);var ji=(()=>((ji=ji||{})[ji.Important=1]="Important",ji[ji.DashCase=2]="DashCase",ji))();const Au=new Map;let pg=0;const Fs="__ngContext__";function Br(i,s){or(s)?(i[Fs]=s[20],function sw(i){Au.set(i[20],i)}(s)):i[Fs]=s}function ad(i,s){return undefined(i,s)}function xu(i){const s=i[3];return Fr(s)?s[3]:s}function ld(i){return Ru(i[13])}function Uo(i){return Ru(i[4])}function Ru(i){for(;null!==i&&!Fr(i);)i=i[4];return i}function $i(i,s,a,l,c){if(null!=l){let f,v=!1;Fr(l)?f=l:or(l)&&(v=!0,l=l[0]);const E=xn(l);0===i&&null!==a?null==c?wg(s,a,E):ba(s,a,E,c||null,!0):1===i&&null!==a?ba(s,a,E,c||null,!0):2===i?function uf(i,s,a){const l=so(i,s);l&&function Ol(i,s,a,l){i.removeChild(s,a,l)}(i,l,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=f&&function _d(i,s,a,l,c){const f=a[7];f!==xn(a)&&$i(s,i,l,f,c);for(let E=10;E<a.length;E++){const I=a[E];oo(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function hd(i,s,a){return i.createElement(s,a)}function tf(i,s){const a=i[9],l=a.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,An(c,-1)),a.splice(l,1)}function fd(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&tf(c,l),s>0&&(i[a-1][4]=l[4]);const f=_a(i,10+s);!function $y(i,s){oo(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const v=f[19];null!==v&&v.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Gy(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&oo(i,s,a,3,null,null),function _g(i){let s=i[13];if(!s)return Nl(i[1],i);for(;s;){let a=null;if(or(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)or(s)&&Nl(s[1],s),s=s[3];null===s&&(s=i),or(s)&&Nl(s[1],s),a=s&&s[4]}s=a}}(s)}}function Nl(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function nf(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Oo)){const f=a[l+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const E=c[f[v]],I=f[v+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function zy(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],E="function"==typeof v?v(s):xn(s[v]),I=l[c=a[f+2]],T=a[f+3];"boolean"==typeof T?E.removeEventListener(a[f],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),f+=2}else{const v=l[c=a[f+1]];a[f].call(v)}if(null!==l){for(let f=c+1;f<l.length;f++)(0,l[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Fr(s[3])){a!==s[3]&&tf(a,s);const l=s[19];null!==l&&l.detachView(i)}!function ow(i){Au.delete(i[20])}(s)}}function Nu(i,s,a){return function pd(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===dt.None||c===dt.Emulated)return null}return Tr(l,a)}(i,s.parent,a)}function ba(i,s,a,l,c){i.insertBefore(s,a,l,c)}function wg(i,s,a){i.appendChild(s,a)}function Bo(i,s,a,l,c){null!==l?ba(i,s,a,l,c):wg(i,s,a)}function so(i,s){return i.parentNode(s)}let cf,Pl=function gd(i,s,a){return 40&i.type?Tr(i,a):null};function sf(i,s,a,l){const c=Nu(i,l,s),f=s[11],E=function qy(i,s,a){return Pl(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Bo(f,c,a[I],E,!1);else Bo(f,c,a,E,!1)}function Ls(i,s){if(null!==s){const a=s.type;if(3&a)return Tr(s,i);if(4&a)return md(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Ls(i,l);{const c=i[s.index];return Fr(c)?md(-1,c):xn(c)}}if(32&a)return ad(s,i)()||xn(i[s.index]);{const l=af(i,s);return null!==l?Array.isArray(l)?l[0]:Ls(xu(i[16]),l):Ls(i,s.next)}}return null}function af(i,s){return null!==s?i[16][6].projection[s.projection]:null}function md(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Ls(l,c)}return s[7]}function yd(i,s,a,l,c,f,v){for(;null!=a;){const E=l[a.index],I=a.type;if(v&&0===s&&(E&&Br(xn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)yd(i,s,a.child,l,c,f,!1),$i(s,i,c,E,f);else if(32&I){const T=ad(a,l);let x;for(;x=T();)$i(s,i,c,x,f);$i(s,i,c,E,f)}else 16&I?vd(i,s,l,a,c,f):$i(s,i,c,E,f);a=v?a.projectionNext:a.next}}function oo(i,s,a,l,c,f){yd(a,l,i.firstChild,s,c,f,!1)}function vd(i,s,a,l,c,f){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)$i(s,i,c,I[T],f);else yd(i,s,I,v[3],c,f,!0)}function ao(i,s,a){i.setAttribute(s,"style",a)}function jo(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function y(i){cf=i}class ue{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function _r(i){return i instanceof ue?i.changingThisBreaksApplicationSecurity:i}const Ed=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var xr=(()=>((xr=xr||{})[xr.NONE=0]="NONE",xr[xr.HTML=1]="HTML",xr[xr.STYLE=2]="STYLE",xr[xr.SCRIPT=3]="SCRIPT",xr[xr.URL=4]="URL",xr[xr.RESOURCE_URL=5]="RESOURCE_URL",xr))();function Ag(i){const s=function yf(){const i=be();return i&&i[12]}();return s?s.sanitize(xr.URL,i)||"":function uo(i,s){const a=function bg(i){return i instanceof ue&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?_r(i):function gf(i){return(i=String(i)).match(Ed)?i:"unsafe:"+i}(ge(i))}const Mg=new dn("ENVIRONMENT_INITIALIZER"),Id=new dn("INJECTOR",-1),gw=new dn("INJECTOR_DEF_TYPES");class xg{get(s,a=Bi){if(a===Bi){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}function mw(...i){return{\u0275providers:yw(0,i)}}function yw(i,...s){const a=[],l=new Set;let c;return li(s,f=>{const v=f;Vl(v,a,[],l)&&(c||(c=[]),c.push(v))}),void 0!==c&&Rg(c,a),a}function Rg(i,s){for(let a=0;a<i.length;a++){const{providers:c}=i[a];li(c,f=>{s.push(f)})}}function Vl(i,s,a,l){if(!(i=q(i)))return!1;let c=null,f=Gr(i);const v=!f&&re(i);if(f||v){if(v&&!v.standalone)return!1;c=i}else{const I=i.ngModule;if(f=Gr(I),!f)return!1;c=I}const E=l.has(c);if(v){if(E)return!1;if(l.add(c),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of I)Vl(T,s,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let T;l.add(c);try{li(f.imports,x=>{Vl(x,s,a,l)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&Rg(T,s)}if(!E){const T=ki(c)||(()=>new c);s.push({provide:c,useFactory:T,deps:xt},{provide:gw,useValue:c,multi:!0},{provide:Mg,useValue:()=>Ln(c),multi:!0})}const I=f.providers;null==I||E||li(I,x=>{s.push(x)})}}return c!==i&&void 0!==i.providers}const vw=oe({provide:String,useValue:oe});function Jr(i){return null!==i&&"object"==typeof i&&vw in i}function Vn(i){return"function"==typeof i}const bd=new dn("Set Injector scope."),Hi={},Di={};let Cd;function _f(){return void 0===Cd&&(Cd=new xg),Cd}class Ul{}class $o extends Ul{constructor(s,a,l,c){super(),this.parent=a,this.source=l,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wf(s,v=>this.processProvider(v)),this.records.set(Id,Ho(void 0,this)),c.has("environment")&&this.records.set(Ul,Ho(void 0,this));const f=this.records.get(bd);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(gw.multi,xt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Dn(this),l=ir(void 0);try{return s()}finally{Dn(a),ir(l)}}get(s,a=Bi,l=Ze.Default){this.assertNotDestroyed();const c=Dn(this),f=ir(void 0);try{if(!(l&Ze.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function rb(i){return"function"==typeof i||"object"==typeof i&&i instanceof dn}(s)&&bt(s);E=I&&this.injectableDefInScope(I)?Ho(Sa(s),Hi):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&Ze.Self?_f():this.parent).get(s,a=l&Ze.Optional&&a===Bi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Iu]=v[Iu]||[]).unshift(ce(s)),c)throw v;return function W(i,s,a,l){const c=i[Iu];throw s[bu]&&c.unshift(s[bu]),i.message=function X(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];f.push(v+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(Du,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Iu]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{ir(f),Dn(c)}}resolveInjectorInitializers(){const s=Dn(this),a=ir(void 0);try{const l=this.get(Mg.multi,xt,Ze.Self);for(const c of l)c()}finally{Dn(s),ir(a)}}toString(){const s=[],a=this.records;for(const l of a.keys())s.push(ce(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(s){let a=Vn(s=q(s))?s:q(s&&s.provide);const l=function Ou(i){return Jr(i)?Ho(void 0,i.useValue):Ho(_w(i),Hi)}(s);if(Vn(s)||!0!==s.multi)this.records.get(a);else{let c=this.records.get(a);c||(c=Ho(void 0,Hi,!0),c.factory=()=>C(c.multi),this.records.set(a,c)),a=s,c.multi.push(s)}this.records.set(a,l)}hydrate(s,a){return a.value===Hi&&(a.value=Di,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ww(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Sa(i){const s=bt(i),a=null!==s?s.factory:ki(i);if(null!==a)return a;if(i instanceof dn)throw new _e(204,!1);if(i instanceof Function)return function di(i){const s=i.length;if(s>0)throw function no(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new _e(204,!1);const a=function _n(i){const s=i&&(i[xi]||i[vi]);if(s){const a=function Sn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new _e(204,!1)}function _w(i,s,a){let l;if(Vn(i)){const c=q(i);return ki(c)||Sa(c)}if(Jr(i))l=()=>q(i.useValue);else if(function tv(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...C(i.deps||[]));else if(function Ng(i){return!(!i||!i.useExisting)}(i))l=()=>Ln(q(i.useExisting));else{const c=q(i&&(i.useClass||i.provide));if(!function nv(i){return!!i.deps}(i))return ki(c)||Sa(c);l=()=>new c(...C(i.deps))}return l}function Ho(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ib(i){return!!i.\u0275providers}function wf(i,s){for(const a of i)Array.isArray(a)?wf(a,s):ib(a)?wf(a.\u0275providers,s):s(a)}class Td{}class ob{resolveComponentFactory(s){throw function sb(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Gi=(()=>{class i{}return i.NULL=new ob,i})();function Ew(){return jl(Rn(),be())}function jl(i,s){return new Ad(Tr(i,s))}let Ad=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ew,i})();function HS(i){return i instanceof Ad?i.nativeElement:i}class Ma{}let rv=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ab(){const i=be(),a=kn(Rn().index,i);return(or(a)?a:i)[11]}(),i})(),ub=(()=>{class i{}return i.\u0275prov=Ke({token:i,providedIn:"root",factory:()=>null}),i})();class iv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const sv=new iv("14.3.0"),ov={};function Pg(i){return i.ngOriginalError}class Sd{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Pg(s);for(;a&&Pg(a);)a=Pg(a);return a||null}}function ho(i){return i instanceof Function?i():i}function Vg(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const uv="ng-template";function Iw(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==Vg(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Dw(i){return 4===i.type&&i.value!==uv}function pb(i,s,a){return s===(4!==i.type||a?i.value:uv)}function gb(i,s,a){let l=4;const c=i.attrs||[],f=function vb(i){for(let s=0;s<i.length;s++)if(Li(i[s]))return s;return i.length}(c);let v=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!pb(i,I,a)||""===I&&1===s.length){if(zi(l))return!1;v=!0}}else{const T=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!Iw(i.attrs,T,a)){if(zi(l))return!1;v=!0}continue}const P=mb(8&l?"class":I,c,Dw(i),a);if(-1===P){if(zi(l))return!1;v=!0;continue}if(""!==T){let H;H=P>f?"":c[P+1].toLowerCase();const K=8&l?H:null;if(K&&-1!==Vg(K,T,0)||2&l&&T!==H){if(zi(l))return!1;v=!0}}}}else{if(!v&&!zi(l)&&!zi(I))return!1;if(v&&zi(I))continue;v=!1,l=I|1&l}}return zi(l)||v}function zi(i){return 0==(1&i)}function mb(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const v=s[c];if(v===i)return c;if(3===v||6===v)f=!0;else{if(1===v||2===v){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===v)break;if(0===v){c+=4;continue}}c+=f?1:2}return-1}return function _b(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function bw(i,s,a=!1){for(let l=0;l<s.length;l++)if(gb(i,s[l],a))return!0;return!1}function Df(i,s){return i?":not("+s.trim()+")":s}function wb(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const E=i[++a];c+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+v:4&l&&(c+=" "+v);else""!==c&&!zi(v)&&(s+=Df(f,c),c=""),l=v,f=f||!zi(l);a++}return""!==c&&(s+=Df(f,c)),s}const Bt={};function Cw(i){Tw(zt(),be(),Lr()+i,!1)}function Tw(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ro(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Gc(s,f,0,a)}ui(a)}function xw(i,s=null,a=null,l){const c=hv(i,s,a,l);return c.resolveInjectorInitializers(),c}function hv(i,s=null,a=null,l,c=new Set){const f=[a||xt,mw(i)];return l=l||("object"==typeof i?void 0:ce(i)),new $o(f,s||_f(),l||null,c)}let Wl=(()=>{class i{static create(a,l){if(Array.isArray(a))return xw({name:""},l,a,"");{const c=a.name??"";return xw({name:c},a.parent,a.providers,c)}}}return i.THROW_IF_NOT_FOUND=Bi,i.NULL=new xg,i.\u0275prov=Ke({token:i,providedIn:"any",factory:()=>Ln(Id)}),i.__NG_ELEMENT_ID__=-1,i})();function Yl(i,s=Ze.Default){const a=be();return null===a?Ln(i,s):Ui(Rn(),a,q(i),s)}function Lw(){throw new Error("invalid")}function Af(i,s){return i<<17|s<<2}function po(i){return i>>17&32767}function Mf(i){return 2|i}function Go(i){return(131068&i)>>2}function xf(i,s){return-131069&i|s<<2}function yv(i){return 1|i}function qw(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const v=i.data[f];ts(c),v.contentQueries(2,s[f],f)}}}function Ev(i,s,a,l,c,f,v,E,I,T,x){const P=s.blueprint.slice();return P[0]=c,P[2]=76|l,(null!==x||i&&1024&i[2])&&(P[2]|=1024),Ks(P),P[3]=P[15]=i,P[8]=a,P[10]=v||i&&i[10],P[11]=E||i&&i[11],P[12]=I||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=f,P[20]=function iw(){return pg++}(),P[21]=x,P[16]=2==s.type?i[16]:P,P}function Od(i,s,a,l,c){let f=i.data[s];if(null===f)f=function kf(i,s,a,l,c){const f=ou(),v=Ao(),I=i.data[s]=function Cv(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(v?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function Wp(){return Dt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const v=function Zs(){const i=Dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return ai(f,!0),f}function Ra(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function ku(i,s,a){Mo(s);try{const l=i.viewQuery;null!==l&&Mv(1,l,a);const c=i.template;null!==c&&Ww(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&qw(i,s),i.staticViewQueries&&Mv(2,i.viewQuery,a);const f=i.components;null!==f&&function Bb(i,s){for(let a=0;a<s.length;a++)oE(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,xo()}}function Zg(i,s,a,l){const c=s[2];if(128!=(128&c)){Mo(s);try{Ks(s),function Oh(i){return Dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ww(i,s,a,2,l);const v=3==(3&c);if(v){const T=i.preOrderCheckHooks;null!==T&&Ro(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Gc(s,T,0,null),Qp(s,0)}if(function sE(i){for(let s=ld(i);null!==s;s=Uo(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(512&c[2])&&An(f,1),c[2]|=512}}}(s),function Wb(i){for(let s=ld(i);null!==s;s=Uo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];sa(l)&&Zg(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&qw(i,s),v){const T=i.contentCheckHooks;null!==T&&Ro(s,T)}else{const T=i.contentHooks;null!==T&&Gc(s,T,1),Qp(s,1)}!function Vb(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)ui(~c);else{const f=c,v=a[++l],E=a[++l];Kp(v,f),E(2,s[f])}}}finally{ui(-1)}}(i,s);const E=i.components;null!==E&&function Ub(i,s){for(let a=0;a<s.length;a++)Kb(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Mv(2,I,l),v){const T=i.viewCheckHooks;null!==T&&Ro(s,T)}else{const T=i.viewHooks;null!==T&&Gc(s,T,2),Qp(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,An(s[3],-1))}finally{xo()}}}function Ww(i,s,a,l,c){const f=Lr(),v=2&l;try{ui(-1),v&&s.length>22&&Tw(i,s,22,!1),a(l,c)}finally{ui(f)}}function Iv(i,s,a){!To()||(function tm(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ms(a,s),Br(l,s);const v=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],T=Cr(I);T&&nm(s,a,I);const x=ns(s,i,E,a);Br(x,s),null!==v&&zb(0,E-c,x,I,0,v),T&&(kn(a.index,s)[8]=x)}}(i,s,a,Tr(a,s)),128==(128&a.flags)&&function Jw(i,s,a){const l=a.directiveStart,c=a.directiveEnd,f=a.index,v=function ca(){return Dt.lFrame.currentDirectiveIndex}();try{ui(f);for(let E=l;E<c;E++){const I=i.data[E],T=s[E];da(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Pd(I,T)}}finally{ui(-1),da(v)}}(i,s,a))}function Dv(i,s,a=Tr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const v=l[f+1],E=-1===v?a(s,i):i[v];i[c++]=E}}}function Zw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=bv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function bv(i,s,a,l,c,f,v,E,I,T){const x=22+l,P=x+c,H=function jb(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Bt);return a}(x,P),K="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:s,data:H.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:K,incompleteFirstPass:!1}}function Qw(i,s,a,l){const c=uE(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&lE(i).push(l,c.length-1))}function Tv(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Yg(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,v=[];let E=null,I=null;for(let T=s.directiveStart;T<l;T++){const x=c[T],P=x.inputs,H=null===f||Dw(s)?null:qb(P,f);v.push(H),E=Tv(P,T,E),I=Tv(x.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=E,s.outputs=I}function Xw(i,s){const a=kn(s,i);16&a[2]||(a[2]|=32)}function Jg(i,s,a,l){let c=!1;if(To()){const f=function eE(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const v=l[f];bw(a,v.selectors,!1)&&(c||(c=[]),Qs(Ms(a,s),i,v.type),Cr(v)?(tE(i,a),c.unshift(v)):c.push(v))}return c}(i,s,a),v=null===l?null:{"":-1};if(null!==f){c=!0,nE(a,i.data.length,f.length);for(let x=0;x<f.length;x++){const P=f[x];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,T=Ra(i,s,f.length,null);for(let x=0;x<f.length;x++){const P=f[x];a.mergedAttrs=pa(a.mergedAttrs,P.hostAttrs),rE(i,a,s,T,P),Gb(T,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const H=P.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}Yg(i,a)}v&&function Hb(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new _e(-301,!1);l.push(s[c],f)}}}(a,l,v)}return a.mergedAttrs=pa(a.mergedAttrs,a.attrs),c}function Av(i,s,a,l,c,f){const v=f.hostBindings;if(v){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function em(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,v)}}function Pd(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function tE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Gb(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Cr(s)&&(a[""]=i)}}function nE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function rE(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=ki(c.type)),v=new Oo(f,Cr(c),Yl);i.blueprint[l]=v,a[l]=v,Av(i,s,0,l,Ra(i,a,c.hostVars,Bt),c)}function nm(i,s,a){const l=Tr(s,i),c=Zw(a),f=i[10],v=Ff(i,Ev(i,c,null,a.onPush?32:16,l,s,f,f.createRenderer(l,a),null,null,null));i[s.index]=v}function zo(i,s,a,l,c,f){const v=Tr(i,s);!function Sv(i,s,a,l,c,f,v){if(null==f)i.removeAttribute(s,c,a);else{const E=null==v?ge(f):v(f,l||"",c);i.setAttribute(s,c,E,a)}}(s[11],v,f,i.value,a,l,c)}function zb(i,s,a,l,c,f){const v=f[s];if(null!==v){const E=l.setInput;for(let I=0;I<v.length;){const T=v[I++],x=v[I++],P=v[I++];null!==E?l.setInput(a,P,T,x):a[x]=P}}}function qb(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function iE(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Kb(i,s){const a=kn(s,i);if(sa(a)){const l=a[1];48&a[2]?Zg(l,a,l.template,a[8]):a[5]>0&&rm(a)}}function rm(i){for(let l=ld(i);null!==l;l=Uo(l))for(let c=10;c<l.length;c++){const f=l[c];if(sa(f))if(512&f[2]){const v=f[1];Zg(v,f,v.template,f[8])}else f[5]>0&&rm(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=kn(a[l],i);sa(c)&&c[5]>0&&rm(c)}}function oE(i,s){const a=kn(s,i),l=a[1];(function aE(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),ku(l,a,a[8])}function Ff(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function im(i){for(;i;){i[2]|=32;const s=xu(i);if(Ch(i)&&!s)return i;i=s}return null}function sm(i,s,a,l=!0){const c=s[10];c.begin&&c.begin();try{Zg(i,s,i.template,a)}catch(v){throw l&&om(s,v),v}finally{c.end&&c.end()}}function Mv(i,s,a){ts(0),s(i,a)}function uE(i){return i[7]||(i[7]=[])}function lE(i){return i.cleanup||(i.cleanup=[])}function om(i,s){const a=i[9],l=a?a.get(Sd,null):null;l&&l.handleError(s)}function am(i,s,a,l,c){for(let f=0;f<a.length;){const v=a[f++],E=a[f++],I=s[v],T=i.data[v];null!==T.setInput?T.setInput(I,c,l,E):I[E]=c}}function Rv(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?f=E:1==f?c=le(c,E):2==f&&(l=le(l,E+": "+s[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}function um(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(xn(f)),Fr(f))for(let E=10;E<f.length;E++){const I=f[E],T=I[1].firstChild;null!==T&&um(I[1],I,T,l)}const v=a.type;if(8&v)um(i,s,a.child,l);else if(32&v){const E=ad(a,s);let I;for(;I=E();)l.push(I)}else if(16&v){const E=af(s,a);if(Array.isArray(E))l.push(...E);else{const I=xu(s[16]);um(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Lf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return um(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Fr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(fd(s,l),_a(a,l))}this._attachedToViewContainer=!1}Gy(this._lView[1],this._lView)}onDestroy(s){Qw(this._lView[1],this._lView,null,s)}markForCheck(){im(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){sm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Hy(i,s){oo(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=s}}class Zb extends Lf{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;sm(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Nv extends Gi{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=re(s);return new Jl(a,this.ngModule)}}function Vf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Ov{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,l){const c=this.injector.get(s,ov,l);return c!==ov||a===ov?c:this.parentInjector.get(s,a,l)}}class Jl extends Td{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function zl(i){return i.map(wb).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Vf(this.componentDef.inputs)}get outputs(){return Vf(this.componentDef.outputs)}create(s,a,l,c){let f=(c=c||this.ngModule)instanceof Ul?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new Ov(s,f):s,E=v.get(Ma,null);if(null===E)throw new _e(407,!1);const I=v.get(ub,null),T=E.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",P=l?function Yw(i,s,a){return i.selectRootElement(s,a===dt.ShadowDom)}(T,l,this.componentDef.encapsulation):hd(T,x,function cE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(x)),H=this.componentDef.onPush?288:272,K=bv(0,null,null,1,0,null,null,null,null,null),me=Ev(null,K,null,H,null,null,E,T,I,v,null);let ke,$e;Mo(me);try{const Xe=function Qb(i,s,a,l,c,f){const v=a[1];a[22]=i;const I=Od(v,22,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(Rv(I,T,!0),null!==i&&(lu(c,i,T),null!==I.classes&&jo(c,i,I.classes),null!==I.styles&&ao(c,i,I.styles)));const x=l.createRenderer(i,s),P=Ev(a,Zw(s),null,s.onPush?32:16,a[22],I,l,x,f||null,null,null);return v.firstCreatePass&&(Qs(Ms(I,a),v,s.type),tE(v,I),nE(I,a.length,1)),Ff(a,P),a[22]=P}(P,this.componentDef,me,E,T);if(P)if(l)lu(T,P,["ng-version",sv.full]);else{const{attrs:It,classes:Se}=function cv(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!zi(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);It&&lu(T,P,It),Se&&Se.length>0&&jo(T,P,Se.join(" "))}if($e=Co(K,22),void 0!==a){const It=$e.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const Mt=a[Se];It.push(null!=Mt?Array.from(Mt):null)}}ke=function Xb(i,s,a,l){const c=a[1],f=function Xg(i,s,a){const l=Rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),rE(i,l,s,Ra(i,s,1,null),a),Yg(i,l));const c=ns(s,i,l.directiveStart,l);Br(c,s);const f=Tr(l,s);return f&&Br(f,s),c}(c,a,s);if(i[8]=a[8]=f,null!==l)for(const E of l)E(f,s);if(s.contentQueries){const E=Rn();s.contentQueries(1,f,E.directiveStart)}const v=Rn();return!c.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ui(v.index),Av(a[1],v,0,v.directiveStart,v.directiveEnd,s),Pd(s,f)),f}(Xe,this.componentDef,me,[Jb]),ku(K,me,null)}finally{xo()}return new lm(this.componentType,ke,jl($e,me),me,$e)}}class lm extends class qt{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Zb(c),this.componentType=s}setInput(s,a){const l=this._tNode.inputs;let c;if(null!==l&&(c=l[s])){const f=this._rootLView;am(f[1],f,c,s,a),Xw(f,this._tNode.index)}}get injector(){return new rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Jb(){const i=Rn();Hc(be()[1],i)}function cm(i){let s=function dE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Cr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new _e(903,!1);c=s.\u0275dir}if(c){if(a){l.push(c);const v=i;v.inputs=Pv(i.inputs),v.declaredInputs=Pv(i.declaredInputs),v.outputs=Pv(i.outputs);const E=c.hostBindings;E&&Uf(i,E);const I=c.viewQuery,T=c.contentQueries;if(I&&hE(i,I),T&&kv(i,T),ie(i.inputs,c.inputs),ie(i.declaredInputs,c.declaredInputs),ie(i.outputs,c.outputs),Cr(c)&&c.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let v=0;v<f.length;v++){const E=f[v];E&&E.ngInherit&&E(i),E===cm&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Rr(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=pa(c.hostAttrs,a=pa(a,c.hostAttrs))}}(l)}function Pv(i){return i===fr?{}:i===xt?[]:i}function hE(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function kv(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function Uf(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Fv=null;function kd(){if(!Fv){const i=ln.Symbol;if(i&&i.iterator)Fv=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Fv=l)}}}return Fv}function ec(i){return!!gE(i)&&(Array.isArray(i)||!(i instanceof Map)&&kd()in i)}function gE(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Lv(i,s,a,l){const c=be();return Ci(c,Ys(),s)&&(zt(),zo(In(),c,i,s,a,l)),Lv}function ei(i,s,a,l,c,f,v,E){const I=be(),T=zt(),x=i+22,P=T.firstCreatePass?function nC(i,s,a,l,c,f,v,E,I){const T=s.consts,x=Od(s,i,4,v||null,wi(T,E));Jg(s,a,x,wi(T,I)),Hc(s,x);const P=x.tViews=bv(2,x,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),P.queries=s.queries.embeddedTView(x)),x}(x,T,I,s,a,l,c,f,v):T.data[x];ai(P,!1);const H=I[11].createComment("");sf(T,I,H,P),Br(H,I),Ff(I,I[x]=iE(H,I,H,P)),rl(P)&&Iv(T,I,P),null!=v&&Dv(I,P,E)}function jv(i,s,a){const l=be();return Ci(l,Ys(),s)&&function os(i,s,a,l,c,f,v,E){const I=Tr(s,a);let x,T=s.inputs;!E&&null!=T&&(x=T[l])?(am(i,a,x,l,c),na(s)&&Xw(a,s.index)):3&s.type&&(l=function Qg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=v?v(c,s.value||"",l):c,f.setProperty(I,l,c))}(zt(),In(),l,i,s,l[11],a,!1),jv}function bE(i,s,a,l,c){const v=c?"class":"style";am(i,a,s.inputs[v],v,l)}function pe(i,s,a,l){const c=be(),f=zt(),v=22+i,E=c[11],I=c[v]=hd(E,s,function Yp(){return Dt.lFrame.currentNamespace}()),T=f.firstCreatePass?function iC(i,s,a,l,c,f,v){const E=s.consts,T=Od(s,i,2,c,wi(E,f));return Jg(s,a,T,wi(E,v)),null!==T.attrs&&Rv(T,T.attrs,!1),null!==T.mergedAttrs&&Rv(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,c,0,s,a,l):f.data[v];ai(T,!0);const x=T.mergedAttrs;null!==x&&lu(E,I,x);const P=T.classes;null!==P&&jo(E,I,P);const H=T.styles;return null!==H&&ao(E,I,H),64!=(64&T.flags)&&sf(f,c,I,T),0===function ul(){return Dt.lFrame.elementDepthCount}()&&Br(I,c),function ru(){Dt.lFrame.elementDepthCount++}(),rl(T)&&(Iv(f,c,T),function Kw(i,s,a){if(Qa(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,T,c)),null!==l&&Dv(c,T),pe}function Wo(){let i=Rn();Ao()?function ua(){Dt.lFrame.isParent=!1}():(i=i.parent,ai(i,!1));const s=i;!function ll(){Dt.lFrame.elementDepthCount--}();const a=zt();return a.firstCreatePass&&(Hc(a,i),Qa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Xp(i){return 0!=(16&i.flags)}(s)&&bE(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function kh(i){return 0!=(32&i.flags)}(s)&&bE(a,s,be(),s.stylesWithoutHost,!1),Wo}function Bd(i,s,a,l){return pe(i,s,a,l),Wo(),Bd}function Hf(i){return!!i&&"function"==typeof i.then}function Pt(i){return!!i&&"function"==typeof i.subscribe}const Gf=Pt;function jd(i,s,a,l){const c=be(),f=zt(),v=Rn();return function hm(i,s,a,l,c,f,v,E){const I=rl(l),x=i.firstCreatePass&&lE(i),P=s[8],H=uE(s);let K=!0;if(3&l.type||E){const $e=Tr(l,s),Xe=E?E($e):$e,It=H.length,Se=E?on=>E(xn(on[l.index])):l.index;let Mt=null;if(!E&&I&&(Mt=function sC(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const v=c[f];if(v===a&&c[f+1]===l){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof v&&(f+=2)}return null}(i,s,c,l.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=f,Mt.__ngLastListenerFn__=f,K=!1;else{f=TE(l,s,P,f,!1);const on=a.listen(Xe,c,f);H.push(f,on),x&&x.push(c,Se,It,It+1)}}else f=TE(l,s,P,f,!1);const me=l.outputs;let ke;if(K&&null!==me&&(ke=me[c])){const $e=ke.length;if($e)for(let Xe=0;Xe<$e;Xe+=2){const fn=s[ke[Xe]][ke[Xe+1]].subscribe(f),gs=H.length;H.push(f,fn),x&&x.push(c,l.index,gs,-(gs+1))}}}(f,c,c[11],v,i,s,0,l),jd}function CE(i,s,a,l){try{return!1!==a(l)}catch(c){return om(i,c),!1}}function TE(i,s,a,l,c){return function f(v){if(v===Function)return l;im(2&i.flags?kn(i.index,s):s);let I=CE(s,0,l,v),T=f.__ngNextListenerFn__;for(;T;)I=CE(s,0,T,v)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function SE(i,s,a,l,c){const f=i[a+1],v=null===s;let E=l?po(f):Go(f),I=!1;for(;0!==E&&(!1===I||v);){const x=i[E+1];aC(i[E],s)&&(I=!0,i[E+1]=l?yv(x):Mf(x)),E=l?po(x):Go(x)}I&&(i[a+1]=l?Mf(f):yv(f))}function aC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ro(i,s)>=0}function e_(i,s){return function us(i,s,a,l){const c=be(),f=zt(),v=function Fi(i){const s=Dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function n_(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[Lr()],v=function t_(i,s){return s>=i.expandoStartIndex}(i,a);(function _m(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!v&&(s=!1),s=function ym(i,s,a,l){const c=function ha(i){const s=Dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Gd(a=Wf(null,i,s,a,l),s.attrs,l),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==c)if(a=Wf(c,i,s,a,l),null===f){let I=function r_(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Go(l))return i[po(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Wf(null,i,s,I[1],l),I=Gd(I,s.attrs,l),function i_(i,s,a,l){i[po(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function s_(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=Gd(l,i[f].hostAttrs,a);return Gd(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function Zo(i,s,a,l,c,f){let v=f?s.classBindings:s.styleBindings,E=po(v),I=Go(v);i[l]=a;let x,T=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||ro(P,x)>0)&&(T=!0)}else x=a;if(c)if(0!==I){const H=po(i[E+1]);i[l+1]=Af(H,E),0!==H&&(i[H+1]=xf(i[H+1],l)),i[E+1]=function Vw(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Af(E,0),0!==E&&(i[E+1]=xf(i[E+1],l)),E=l;else i[l+1]=Af(I,0),0===E?E=l:i[I+1]=xf(i[I+1],l),I=l;T&&(i[l+1]=Mf(i[l+1])),SE(i,x,l,!0),SE(i,x,l,!1),function Kv(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&ro(f,s)>=0&&(a[l+1]=yv(a[l+1]))}(s,x,i,l,f),v=Af(E,I),f?s.classBindings=v:s.styleBindings=v}(c,f,s,a,v,l)}}(f,i,v,l),s!==Bt&&Ci(c,v,s)&&function o_(i,s,a,l,c,f,v,E){if(!(3&s.type))return;const I=i.data,T=I[E+1];Kf(function $g(i){return 1==(1&i)}(T)?vm(I,s,a,c,Go(T),v):void 0)||(Kf(f)||function Sf(i){return 2==(2&i)}(T)&&(f=vm(I,null,a,c,E,v)),function Wy(i,s,a,l,c){if(s)c?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:ji.DashCase;null==c?i.removeStyle(a,l,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=ji.Important),i.setStyle(a,l,c,f))}}(l,v,oi(Lr(),a),c,f))}(f,f.data[Lr()],c,c[11],i,c[v+1]=function dC(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(_r(i)))),i}(s,a),l,v)}(i,s,null,!0),e_}function Wf(i,s,a,l,c){let f=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(f=s[E],l=Gd(l,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Gd(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?c=v:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Zr(i,v,!!a||s[++f]))}return void 0===i?null:i}function vm(i,s,a,l,c,f){const v=null===s;let E;for(;c>0;){const I=i[c],T=Array.isArray(I),x=T?I[1]:I,P=null===x;let H=a[c+1];H===Bt&&(H=P?xt:void 0);let K=P?_u(H,l):x===l?H:void 0;if(T&&!Kf(K)&&(K=_u(I,l)),Kf(K)&&(E=K,v))return E;const me=i[c+1];c=v?po(me):Go(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=_u(I,l))}return E}function Kf(i){return void 0!==i}function wm(i,s=""){const a=be(),l=zt(),c=i+22,f=l.firstCreatePass?Od(l,c,1,s,null):l.data[c],v=a[c]=function ef(i,s){return i.createText(s)}(a[11],s);sf(l,a,v,f),ai(f,!1)}function Zf(i){return wr("",i,""),Zf}function wr(i,s,a){const l=be(),c=function Ld(i,s,a,l){return Ci(i,Ys(),a)?s+ge(a)+l:Bt}(l,i,s,a);return c!==Bt&&function qo(i,s,a){const l=oi(s,i);!function cd(i,s,a){i.setValue(s,a)}(i[11],l,a)}(l,Lr(),c),wr}const yo=void 0;var KE=["en",[["a","p"],["AM","PM"],yo],[["AM","PM"],yo,yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yo,"{1} 'at' {0}",yo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bm(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Bu={};function Cm(i){const s=function Jf(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Sm(s);if(a)return a;const l=s.split("-")[0];if(a=Sm(l),a)return a;if("en"===l)return KE;throw new _e(701,!1)}function Am(i){return Cm(i)[Et.PluralCase]}function Sm(i){return i in Bu||(Bu[i]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[i]),Bu[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const ju="en-US";let QE=ju;function Qd(i,s,a,l,c){if(i=q(i),Array.isArray(i))for(let f=0;f<i.length;f++)Qd(i[f],s,a,l,c);else{const f=zt(),v=be();let E=Vn(i)?i:q(i.provide),I=_w(i);const T=Rn(),x=1048575&T.providerIndexes,P=T.directiveStart,H=T.providerIndexes>>20;if(Vn(i)||!i.multi){const K=new Oo(I,c,Yl),me=Ua(E,s,c?x:x+H,P);-1===me?(Qs(Ms(T,v),f,E),Um(f,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(K),v.push(K)):(a[me]=K,v[me]=K)}else{const K=Ua(E,s,x+H,P),me=Ua(E,s,x,x+H),ke=K>=0&&a[K],$e=me>=0&&a[me];if(c&&!$e||!c&&!ke){Qs(Ms(T,v),f,E);const Xe=function DI(i,s,a,l,c){const f=new Oo(i,a,Yl);return f.multi=[],f.index=s,f.componentProviders=0,x_(f,c,l&&!a),f}(c?II:EI,a.length,c,l,I);!c&&$e&&(a[me].providerFactory=Xe),Um(f,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Xe),v.push(Xe)}else Um(f,i,K>-1?K:me,x_(a[c?me:K],I,!c&&l));!c&&l&&$e&&a[me].componentProviders++}}}function Um(i,s,a,l){const c=Vn(s),f=function vf(i){return!!i.useClass}(s);if(c||f){const I=(f?q(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[l,I]):T[x+1].push(l,I)}else T.push(a,I)}}}function x_(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Ua(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function EI(i,s,a,l){return Bm(this.multi,[])}function II(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=ns(a,a[1],this.providerFactory.index,l);f=E.slice(0,v),Bm(c,f);for(let I=v;I<E.length;I++)f.push(E[I])}else f=[],Bm(c,f);return f}function Bm(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function lp(i,s=[]){return a=>{a.providersResolver=(l,c)=>function wI(i,s,a){const l=zt();if(l.firstCreatePass){const c=Cr(i);Qd(a,l.data,l.blueprint,c,!0),Qd(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Hr{}class R_{}function bI(i,s){return new CI(i,s??null)}class CI extends Hr{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Nv(this);const l=Gt(s);this._bootstrapComponents=ho(l.bootstrap),this._r3Injector=hv(s,a,[{provide:Hr,useValue:this},{provide:Gi,useValue:this.componentFactoryResolver}],ce(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class N_ extends R_{constructor(s){super(),this.moduleType=s}create(s){return new CI(this.moduleType,s)}}class O_ extends Hr{constructor(s,a,l){super(),this.componentFactoryResolver=new Nv(this),this.instance=null;const c=new $o([...s,{provide:Hr,useValue:this},{provide:Gi,useValue:this.componentFactoryResolver}],a||_f(),l,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function P_(i,s,a=null){return new O_(i,s,a).injector}let xC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=yw(0,a.type),c=l.length>0?P_([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,c)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Ke({token:i,providedIn:"environment",factory:()=>new i(Ln(Ul))}),i})();function k_(i){i.getStandaloneInjector=s=>s.get(xC).getOrCreateStandaloneInjector(i)}function xe(i,s,a){const l=function yr(){const i=Dt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}()+i,c=be();return c[l]===Bt?function bi(i,s,a){return i[s]=a}(c,l,a?s.call(a):s()):function tc(i,s){return i[s]}(c,l)}function $_(i){return s=>{setTimeout(i,void 0,s)}}const ls=class cc extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){let c=s,f=a||(()=>null),v=l;if(s&&"object"==typeof s){const I=s;c=I.next?.bind(I),f=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(f=$_(f),c&&(c=$_(c)),v&&(v=$_(v)));const E=super.subscribe({next:c,error:f,complete:v});return s instanceof Y.w0&&s.add(E),E}};function UC(){return this._results[kd()]()}class dc{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=kd(),l=dc.prototype;l[a]||(l[a]=UC)}get changes(){return this._changes||(this._changes=new ls)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Sr(s);(this._changesDetected=!function yu(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Jd=(()=>{class i{}return i.__NG_ELEMENT_ID__=H_,i})();const xI=Jd,cs=class extends xI{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s,a){const l=this._declarationTContainer.tViews,c=Ev(this._declarationLView,l,s,16,null,l.declTNode,null,null,null,null,a||null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(l)),ku(l,c,s),new Lf(c)}};function H_(){return hp(Rn(),be())}function hp(i,s){return 4&i.type?new cs(s,i,jl(i,s)):null}let fp=(()=>{class i{}return i.__NG_ELEMENT_ID__=qu,i})();function qu(){return RI(Rn(),be())}const G_=fp,te=class extends G_{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return jl(this._hostTNode,this._hostLView)}get injector(){return new rs(this._hostTNode,this._hostLView)}get parentInjector(){const s=du(this._hostTNode,this._hostLView);if(qc(s)){const a=Ss(s,this._hostLView),l=ar(s);return new rs(a[1].data[l+8],a)}return new rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=pp(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){let c,f;"number"==typeof l?c=l:null!=l&&(c=l.index,f=l.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,c),v}createComponent(s,a,l,c,f){const v=s&&!function Kr(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const P=a||{};E=P.index,l=P.injector,c=P.projectableNodes,f=P.environmentInjector||P.ngModuleRef}const I=v?s:new Jl(re(s)),T=l||this.parentInjector;if(!f&&null==I.ngModule){const H=(v?T:this.parentInjector).get(Ul,null);H&&(f=H)}const x=I.create(T,c,void 0,f);return this.insert(x.hostView,E),x}insert(s,a){const l=s._lView,c=l[1];if(function oa(i){return Fr(i[3])}(l)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const P=l[3],H=new te(P,P[6],P[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function Rl(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],Uh(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function lw(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=64}(c,l,v,f);const E=md(f,v),I=l[11],T=so(I,v[7]);return null!==T&&function vg(i,s,a,l,c,f){l[0]=c,l[6]=s,oo(i,l,a,1,c,f)}(c,v[6],I,l,T,E),s.attachToViewContainerRef(),Uh(ds(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=pp(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=fd(this._lContainer,a);l&&(_a(ds(this._lContainer),a),Gy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=fd(this._lContainer,a);return l&&null!=_a(ds(this._lContainer),a)?new Lf(l):null}_adjustIndex(s,a=0){return s??this.length+a}};function pp(i){return i[8]}function ds(i){return i[8]||(i[8]=[])}function RI(i,s){let a;const l=s[i.index];if(Fr(l))a=l;else{let c;if(8&i.type)c=xn(l);else{const f=s[11];c=f.createComment("");const v=Tr(i,s);ba(f,so(f,v),c,function rf(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=iE(l,s,c,i),Ff(s,a)}return new te(a,i,s)}class Ba{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ba(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const v=a.getByIndex(f);c.push(this.queries[v.indexInDeclarationView].clone())}return new Gm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ir(s,a).matches&&this.queries[a].setDirty()}}class zm{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class z_{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new z_(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class q_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new q_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,hs(a,f)),this.matchTNodeWithReadOption(s,a,Js(a,s,f,!1,!1))}else l===Jd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Js(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Ad||c===fp||c===Jd&&4&a.type)this.addMatch(a.index,-2);else{const f=Js(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function hs(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function W_(i,s,a,l){return-1===a?function BC(i,s){return 11&i.type?jl(i,s):4&i.type?hp(i,s):null}(s,i):-2===a?function jC(i,s,a){return a===Ad?jl(s,i):a===Jd?hp(s,i):a===fp?RI(s,i):void 0}(i,s,l):ns(i,i[1],a,s)}function NI(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const T=v[I];E.push(T<0?null:W_(s,f[T],v[I+1],a.metadata.read))}c.matches=E}return c.matches}function Yo(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const v=NI(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(v[E/2]);else{const T=f[E+1],x=s[-I];for(let P=10;P<x.length;P++){const H=x[P];H[17]===H[3]&&Yo(H[1],H,T,l)}if(null!==x[9]){const P=x[9];for(let H=0;H<P.length;H++){const K=P[H];Yo(K[1],K,T,l)}}}}}return l}function K_(i){const s=be(),a=zt(),l=So();ts(l+1);const c=Ir(a,l);if(i.dirty&&function nu(i){return 4==(4&i[2])}(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Yo(a,s,l,[]):NI(a,s,c,l);i.reset(f,HS),i.notifyOnChanges()}return!0}return!1}function Z_(i,s,a,l){const c=zt();if(c.firstCreatePass){const f=Rn();(function OI(i,s,a){null===i.queries&&(i.queries=new z_),i.queries.track(new q_(s,a))})(c,new zm(s,a,l),f.index),function $C(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Y_(i,s,a){const l=new dc(4==(4&a));Qw(i,s,l,l.destroy),null===s[19]&&(s[19]=new Gm),s[19].queries.push(new Ba(l))}(c,be(),a)}function eh(){return function mp(i,s){return i[19].queries[s].queryList}(be(),So())}function Ir(i,s){return i.queries.getByIndex(s)}function vn(...i){}const Ym=new dn("Application Initializer");let Xo=(()=>{class i{constructor(a){this.appInits=a,this.resolve=vn,this.reject=vn,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Hf(f))a.push(f);else if(Gf(f)){const v=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ln(Ym,8))},i.\u0275prov=Ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const oh=new dn("AppId",{providedIn:"root",factory:function Ep(){return`${Qm()}${Qm()}${Qm()}`}});function Qm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const h0=new dn("Platform Initializer"),Ha=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),f0=new dn("appBootstrapListener");let p0=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ke({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ah=new dn("LocaleId",{providedIn:"root",factory:()=>D(ah,Ze.Optional|Ze.SkipSelf)||function Xm(){return typeof $localize<"u"&&$localize.locale||ju}()}),yc=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Dp{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let $I=(()=>{class i{compileModuleSync(a){return new N_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=ho(Gt(a).declarations).reduce((v,E)=>{const I=re(E);return I&&v.push(new Jl(I)),v},[]);return new Dp(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zI=(()=>Promise.resolve(0))();function uh(i){typeof Zone>"u"?zI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class js{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ls(!1),this.onMicrotaskEmpty=new ls(!1),this.onStable=new ls(!1),this.onError=new ls(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function eT(){let i=ln.requestAnimationFrame,s=ln.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function WI(i){const s=()=>{!function vc(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ln,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ga(i),i.isCheckStableRunning=!0,Zu(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ga(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,v,E)=>{try{return v0(i),a.invokeTask(c,f,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),_c(i)}},onInvoke:(a,l,c,f,v,E,I)=>{try{return v0(i),a.invoke(c,f,v,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),_c(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ga(i),Zu(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!js.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(js.isInAngularZone())throw new _e(909,!1)}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+c,s,qI,vn,vn);try{return f.runTask(v,a,l)}finally{f.cancelTask(v)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const qI={};function Zu(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ga(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function v0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function _c(i){i._nesting--,Zu(i)}class KI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ls,this.onMicrotaskEmpty=new ls,this.onStable=new ls,this.onError=new ls}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}const _0=new dn(""),lh=new dn("");let ch,tT=(()=>{class i{constructor(a,l,c){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ch||(function jn(i){ch=i}(c),c.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{js.assertNotInAngularZone(),uh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uh(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ln(js),Ln(ZI),Ln(lh))},i.\u0275prov=Ke({token:i,factory:i.\u0275fac}),i})(),ZI=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ch?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ke({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),_o=null;const w0=new dn("AllowMultipleToken"),E0=new dn("PlatformDestroyListeners");class za{constructor(s,a){this.name=s,this.token=a}}function ey(i,s,a=[]){const l=`Platform: ${s}`,c=new dn(l);return(f=[])=>{let v=ty();if(!v||v.injector.get(w0,!1)){const E=[...a,...f,{provide:c,useValue:!0}];i?i(E):function YI(i){if(_o&&!_o.get(w0,!1))throw new _e(400,!1);_o=i;const s=i.get(D0);(function I0(i){const s=i.get(h0,null);s&&s.forEach(a=>a())})(i)}(function cr(i=[],s){return Wl.create({name:s,providers:[{provide:bd,useValue:"platform"},{provide:E0,useValue:new Set([()=>_o=null])},...i]})}(E,l))}return function iT(i){const s=ty();if(!s)throw new _e(401,!1);return s}()}}function ty(){return _o?.get(D0)??null}let D0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const c=function XI(i,s){let a;return a="noop"===i?new KI:("zone.js"===i?void 0:i)||new js(s),a}(l?.ngZone,function qa(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:js,useValue:c}];return c.run(()=>{const v=Wl.create({providers:f,parent:this.injector,name:a.moduleType.name}),E=a.create(v),I=E.injector.get(Sd,null);if(!I)throw new _e(402,!1);return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:x=>{I.handleError(x)}});E.onDestroy(()=>{Cp(this._modules,E),T.unsubscribe()})}),function Ti(i,s,a){try{const l=a();return Hf(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(I,c,()=>{const T=E.injector.get(Xo);return T.runInitializers(),T.donePromise.then(()=>(function Wd(i){Re(i,"Expected localeId to be defined"),"string"==typeof i&&(QE=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(ah,ju)||ju),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const c=b0({},l);return function nT(i,s,a){const l=new N_(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(Yu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new _e(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(E0,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ln(Wl))},i.\u0275prov=Ke({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function b0(i,s){return Array.isArray(s)?s.reduce(b0,i):{...i,...s}}let Yu=(()=>{class i{constructor(a,l,c){this._zone=a,this._injector=l,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{js.assertNotInAngularZone(),uh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{js.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ee.T)(f,v.pipe((0,J.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const c=a instanceof Td;if(!this._injector.get(Xo).done)throw!c&&Ct(a),new _e(405,false);let v;v=c?a:this._injector.get(Gi).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function dh(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Hr),T=v.create(Wl.NULL,[],l||v.selector,E),x=T.location.nativeElement,P=T.injector.get(_0,null);return P?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),Cp(this.components,T),P?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Cp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(f0,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Cp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new _e(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Ln(js),Ln(Ul),Ln(Sd))},i.\u0275prov=Ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Cp(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let hh=!0,eD=!1;function sT(){return eD=!0,hh}function $t(){if(eD)throw new Error("Cannot enable prod mode after platform setup.");hh=!1}let Tp=(()=>{class i{}return i.__NG_ELEMENT_ID__=ny,i})();function ny(i){return function tD(i,s,a){if(na(i)&&!a){const l=kn(i.index,s);return new Lf(l,l)}return 47&i.type?new Lf(s[16],s):null}(Rn(),be(),16==(16&i))}class T0{constructor(){}supports(s){return ec(s)}create(s){return new yT(s)}}const mT=(i,s)=>s;class yT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||mT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const v=!l||a&&a.currentIndex<S0(l,c,f)?a:l,E=S0(v,c,f),I=v.currentIndex;if(v===l)c--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)c++;else{f||(f=[]);const T=E-c,x=I-c;if(T!=x){for(let H=0;H<T;H++){const K=H<f.length?f[H]:f[H]=0,me=K+H;x<=me&&me<T&&(f[H]=K+1)}f[v.previousIndex]=x-T}}E!==I&&s(v,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ec(s))throw new _e(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,v,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],v=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,f,v,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,E),l=!0),a=a._next}else c=0,function dm(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[kd()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{v=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new Sp(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new iD),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Sp{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class A0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class iD{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new A0,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function S0(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class sy{constructor(){}supports(s){return s instanceof Map||gE(s)}create(){return new sD}}class sD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||gE(s)))throw new _e(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,v=c._next;return f&&(f._next=v),v&&(v._prev=f),c._next=null,c._prev=null,c}const l=new vT(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class vT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function M0(){return new x0([new T0])}let x0=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||M0()),deps:[[i,new ot,new We]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new _e(901,!1)}}return i.\u0275prov=Ke({token:i,providedIn:"root",factory:M0}),i})();function oD(){return new Jo([new sy])}let Jo=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||oD()),deps:[[i,new ot,new We]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(l)return l;throw new _e(901,!1)}}return i.\u0275prov=Ke({token:i,providedIn:"root",factory:oD}),i})();const Ai=ey(null,"core",[]);let wT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ln(Yu))},i.\u0275mod=Ut({type:i}),i.\u0275inj=pt({}),i})();function uD(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ht,Ce,k)=>{k.d(Ce,{Z:()=>_e});var p=k(2090),Y=k(4859),O=k(9681),ee=k(1877);class J{constructor(ge,ae){this._delegate=ge,this.firebase=ae,(0,O._addComponent)(ge,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,ae=O._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const lt=this._delegate.container.getProvider(ge);return!lt.isInitialized()&&"EXPLICIT"===(null===(Je=lt.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&lt.initialize(),lt.getImmediate({identifier:ae})}_removeServiceInstance(ge,ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(ae)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function le(){const et=function ce(et){const ge={},ae={__esModule:!0,initializeApp:function De(Ue,U={}){const fe=O.initializeApp(Ue,U);if((0,p.r3)(ge,fe.name))return ge[fe.name];const Fe=new et(fe,ae);return ge[fe.name]=Fe,Fe},app:lt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(Ue){const U=Ue.name,fe=U.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const Fe=(Ye=lt())=>{if("function"!=typeof Ye[fe])throw ie.create("invalid-app-argument",{appName:U});return Ye[fe]()};void 0!==Ue.serviceProps&&(0,p.ZB)(Fe,Ue.serviceProps),ae[fe]=Fe,et.prototype[fe]=function(...Ye){return this._getService.bind(this,U).apply(this,Ue.multipleInstances?Ye:[])}}return"PUBLIC"===Ue.type?ae[fe]:null},removeApp:function Je(Ue){delete ge[Ue]},useAsService:function Ve(Ue,U){return"serverAuth"===U?null:U},modularAPIs:O}};function lt(Ue){if(!(0,p.r3)(ge,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Ue});return ge[Ue]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function ye(){return Object.keys(ge).map(Ue=>ge[Ue])}}),lt.App=et,ae}(J);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function ge(ae){(0,p.ZB)(et,ae)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),et}(),$=new ee.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _e=B;!function Te(et){(0,O.registerVersion)("@firebase/app-compat","0.2.5",et)}()},9681:(ht,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>Re,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>Ke,_apps:()=>it,_clearComponents:()=>dr,_components:()=>Ot,_getProvider:()=>pt,_registerComponent:()=>Yt,_removeServiceInstance:()=>bt,deleteApp:()=>Eo,getApp:()=>zr,getApps:()=>vi,initializeApp:()=>xi,onLog:()=>Ri,registerVersion:()=>Dr,setLogLevel:()=>ir});var p=k(5861),Y=k(4859),O=k(1877),ee=k(2090),J=k(8766);class oe{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ie(nt){return"VERSION"===nt.getComponent()?.type}(tt)){const At=tt.getImmediate();return`${At.library}/${At.version}`}return null}).filter(tt=>tt).join(" ")}}const ce="@firebase/app",B=new O.Yd("@firebase/app"),Re="[DEFAULT]",Ee={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,Ot=new Map;function Jt(nt,Ie){try{nt.container.addComponent(Ie)}catch(tt){B.debug(`Component ${Ie.name} failed to register with FirebaseApp ${nt.name}`,tt)}}function Ke(nt,Ie){nt.container.addOrOverwriteComponent(Ie)}function Yt(nt){const Ie=nt.name;if(Ot.has(Ie))return B.debug(`There were multiple attempts to register component ${Ie}.`),!1;Ot.set(Ie,nt);for(const tt of it.values())Jt(tt,nt);return!0}function pt(nt,Ie){const tt=nt.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),nt.container.getProvider(Ie)}function bt(nt,Ie,tt=Re){pt(nt,Ie).clearInstance(tt)}function dr(){Ot.clear()}const _n=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Sn{constructor(Ie,tt,At){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}const Gr="9.18.0";function xi(nt,Ie={}){let tt=nt;"object"!=typeof Ie&&(Ie={name:Ie});const At=Object.assign({name:Re,automaticDataCollectionEnabled:!1},Ie),Rt=At.name;if("string"!=typeof Rt||!Rt)throw _n.create("bad-app-name",{appName:String(Rt)});if(tt||(tt=(0,ee.aH)()),!tt)throw _n.create("no-options");const Ut=it.get(Rt);if(Ut){if((0,ee.vZ)(tt,Ut.options)&&(0,ee.vZ)(At,Ut.config))return Ut;throw _n.create("duplicate-app",{appName:Rt})}const br=new Y.H0(Rt);for(const L of Ot.values())br.addComponent(L);const V=new Sn(tt,At,br);return it.set(Rt,V),V}function zr(nt=Re){const Ie=it.get(nt);if(!Ie&&nt===Re)return xi();if(!Ie)throw _n.create("no-app",{appName:nt});return Ie}function vi(){return Array.from(it.values())}function Eo(nt){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,p.Z)(function*(nt){const Ie=nt.name;it.has(Ie)&&(it.delete(Ie),yield Promise.all(nt.container.getProviders().map(tt=>tt.delete())),nt.isDeleted=!0)})).apply(this,arguments)}function Dr(nt,Ie,tt){var At;let Rt=null!==(At=Ee[nt])&&void 0!==At?At:nt;tt&&(Rt+=`-${tt}`);const Ut=Rt.match(/\s|\//),br=Ie.match(/\s|\//);if(Ut||br){const V=[`Unable to register library "${Rt}" with version "${Ie}":`];return Ut&&V.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Ut&&br&&V.push("and"),br&&V.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void B.warn(V.join(" "))}Yt(new Y.wA(`${Rt}-version`,()=>({library:Rt,version:Ie}),"VERSION"))}function Ri(nt,Ie){if(null!==nt&&"function"!=typeof nt)throw _n.create("invalid-log-argument");(0,O.Am)(nt,Ie)}function ir(nt){(0,O.Ub)(nt)}const Mn="firebase-heartbeat-store";let Jn=null;function pn(){return Jn||(Jn=(0,J.X3)("firebase-heartbeat-database",1,{upgrade:(nt,Ie)=>{0===Ie&&nt.createObjectStore(Mn)}}).catch(nt=>{throw _n.create("idb-open",{originalErrorMessage:nt.message})})),Jn}function dt(){return(dt=(0,p.Z)(function*(nt){try{return(yield pn()).transaction(Mn).objectStore(Mn).get(hr(nt))}catch(Ie){if(Ie instanceof ee.ZR)B.warn(Ie.message);else{const tt=_n.create("idb-get",{originalErrorMessage:Ie?.message});B.warn(tt.message)}}})).apply(this,arguments)}function ln(nt,Ie){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(nt,Ie){try{const At=(yield pn()).transaction(Mn,"readwrite");return yield At.objectStore(Mn).put(Ie,hr(nt)),At.done}catch(tt){if(tt instanceof ee.ZR)B.warn(tt.message);else{const At=_n.create("idb-set",{originalErrorMessage:tt?.message});B.warn(At.message)}}})).apply(this,arguments)}function hr(nt){return`${nt.name}!${nt.options.appId}`}class _s{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new tn(tt),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Ie=this;return(0,p.Z)(function*(){const At=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=en();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!Ie._heartbeatsCache.heartbeats.some(Ut=>Ut.date===Rt))return Ie._heartbeatsCache.heartbeats.push({date:Rt,agent:At}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Ut=>{const br=new Date(Ut.date).valueOf();return Date.now()-br<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,p.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const tt=en(),{heartbeatsToSend:At,unsentEntries:Rt}=function Oi(nt,Ie=1024){const tt=[];let At=nt.slice();for(const Rt of nt){const Ut=tt.find(br=>br.agent===Rt.agent);if(Ut){if(Ut.dates.push(Rt.date),sr(tt)>Ie){Ut.dates.pop();break}}else if(tt.push({agent:Rt.agent,dates:[Rt.date]}),sr(tt)>Ie){tt.pop();break}At=At.slice(1)}return{heartbeatsToSend:tt,unsentEntries:At}}(Ie._heartbeatsCache.heartbeats),Ut=(0,ee.L)(JSON.stringify({version:2,heartbeats:At}));return Ie._heartbeatsCache.lastSentHeartbeatDate=tt,Rt.length>0?(Ie._heartbeatsCache.heartbeats=Rt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Ut})()}}function en(){return(new Date).toISOString().substring(0,10)}class tn{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,p.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function vt(nt){return dt.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var tt=this;return(0,p.Z)(function*(){var At;if(yield tt._canUseIndexedDBPromise){const Ut=yield tt.read();return ln(tt.app,{lastSentHeartbeatDate:null!==(At=Ie.lastSentHeartbeatDate)&&void 0!==At?At:Ut.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var tt=this;return(0,p.Z)(function*(){var At;if(yield tt._canUseIndexedDBPromise){const Ut=yield tt.read();return ln(tt.app,{lastSentHeartbeatDate:null!==(At=Ie.lastSentHeartbeatDate)&&void 0!==At?At:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...Ie.heartbeats]})}})()}}function sr(nt){return(0,ee.L)(JSON.stringify({version:2,heartbeats:nt})).length}!function kr(nt){Yt(new Y.wA("platform-logger",Ie=>new oe(Ie),"PRIVATE")),Yt(new Y.wA("heartbeat",Ie=>new _s(Ie),"PRIVATE")),Dr(ce,"0.9.5",nt),Dr(ce,"0.9.5","esm2017"),Dr("fire-js","")}("")},4859:(ht,Ce,k)=>{k.d(Ce,{H0:()=>ce,wA:()=>O});var p=k(5861),Y=k(2090);class O{constructor(B,$,q){this.name=B,this.instanceFactory=$,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ee="[DEFAULT]";class J{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const q=new Y.BH;if(this.instancesDeferred.set($,q),this.isInitialized($)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:$});je&&q.resolve(je)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const q=this.normalizeInstanceIdentifier(B?.identifier),je=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Te){if(je)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ie(le){return"EAGER"===le.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[$,q]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier($);try{const Te=this.getOrInitializeService({instanceIdentifier:je});q.resolve(Te)}catch{}}}}clearInstance(B=ee){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,p.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...$.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ee){return this.instances.has(B)}getOptions(B=ee){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:q,options:$});for(const[Te,_e]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Te)&&_e.resolve(je);return je}onInit(B,$){var q;const je=this.normalizeInstanceIdentifier($),Te=null!==(q=this.onInitCallbacks.get(je))&&void 0!==q?q:new Set;Te.add(B),this.onInitCallbacks.set(je,Te);const _e=this.instances.get(je);return _e&&B(_e,je),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,$){const q=this.onInitCallbacks.get($);if(q)for(const je of q)try{je(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let q=this.instances.get(B);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(le=B,le===ee?void 0:le),options:$}),this.instances.set(B,q),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,q)}catch{}var le;return q||null}normalizeInstanceIdentifier(B=ee){return this.component?this.component.multipleInstances?B:ee:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new J(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Ce,k)=>{k.d(Ce,{Am:()=>le,Ub:()=>ce,Yd:()=>ie,in:()=>Y});const p=[];var Y=(()=>{return(B=Y||(Y={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Y;var B})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ee=Y.INFO,J={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},oe=(B,$,...q)=>{if($<B.logLevel)return;const je=(new Date).toISOString(),Te=J[$];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Te](`[${je}]  ${B.name}:`,...q)};class ie{constructor($){this.name=$,this._logLevel=ee,this._logHandler=oe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function ce(B){p.forEach($=>{$.setLogLevel(B)})}function le(B,$){for(const q of p){let je=null;$&&$.level&&(je=O[$.level]),q.userLogHandler=null===B?null:(Te,_e,...et)=>{const ge=et.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch{return null}}).filter(ae=>ae).join(" ");_e>=(je??Te.logLevel)&&B({level:Y[_e].toLowerCase(),message:ge,args:et,type:Te.name})}}}},259:(ht,Ce,k)=>{k.d(Ce,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=k(9681);(0,p.registerVersion)("firebase","9.18.0","app")},9260:(ht,Ce,k)=>{k.d(Ce,{Z:()=>p.Z});var p=k(3942);p.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(ht,Ce,k)=>{k.r(Ce);var p=k(5861),Y=k(3942),O=k(2090),ee=k(9681),J=k(1877),oe=k(655),ie=k(4859);const _e=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new J.Yd("@firebase/auth");function lt(y,...h){Je.logLevel<=J.in.ERROR&&Je.error(`Auth (${ee.SDK_VERSION}): ${y}`,...h)}function De(y,...h){throw Ue(y,...h)}function ye(y,...h){return Ue(y,...h)}function we(y,h,g){const _=Object.assign(Object.assign({},et()),{[h]:g});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Ve(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&De(y,"argument-error"),we(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...h){if("string"!=typeof y){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return ge.create(y,...h)}function U(y,h,...g){if(!y)throw Ue(h,...g)}function fe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw lt(h),new Error(h)}function Fe(y,h){y||fe(h)}const Ye=new Map;function ct(y){Fe(y instanceof Function,"Expected a class definition");let h=Ye.get(y);return h?(Fe(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Ye.set(y,h),h)}function he(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ve(){return"http:"===Me()||"https:"===Me()}function Me(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class it{constructor(h,g){this.shortDelay=h,this.longDelay=g,Fe(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Re(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ve()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ot(y,h){Fe(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Jt{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new it(3e4,6e4);function pt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function bt(y,h,g,_){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(y,h,g,_,A={}){return mn(y,A,(0,p.Z)(function*(){let R={},G={};_&&("GET"===h?G=_:R={body:JSON.stringify(_)});const ue=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Be=yield y._getAdditionalHeaders();return Be["Content-Type"]="application/json",y.languageCode&&(Be["X-Firebase-Locale"]=y.languageCode),Jt.fetch()(xi(y,y.config.apiHost,g,ue),Object.assign({method:h,headers:Be,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function mn(y,h,g){return _n.apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(y,h,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ke),h);try{const A=new zr(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw vi(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const ue=R.ok?G.errorMessage:G.error.message,[Be,Qe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw vi(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Be)throw vi(y,"email-already-in-use",G);if("USER_DISABLED"===Be)throw vi(y,"user-disabled",G);const Tt=_[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw we(y,Tt,Qe);De(y,Tt)}}catch(A){if(A instanceof O.ZR)throw A;De(y,"internal-error",{message:String(A)})}})).apply(this,arguments)}function Sn(y,h,g,_){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(y,h,g,_,A={}){const R=yield bt(y,h,g,_,A);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function xi(y,h,g,_){const A=`${h}${g}?${_}`;return y.config.emulator?Ot(y.config,A):`${y.config.apiScheme}://${A}`}class zr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ye(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vi(y,h,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const A=ye(y,h,_);return A.customData._tokenResponse=g,A}function Ze(){return(Ze=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Dr(y,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ir(y,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ni(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function pn(){return(pn=(0,p.Z)(function*(y,h=!1){const g=(0,O.m9)(y),_=yield g.getIdToken(h),A=dt(_);U(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,G=R?.sign_in_provider;return{claims:A,token:_,authTime:Ni(vt(A.auth_time)),issuedAtTime:Ni(vt(A.iat)),expirationTime:Ni(vt(A.exp)),signInProvider:G||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function vt(y){return 1e3*Number(y)}function dt(y){const[h,g,_]=y.split(".");if(void 0===h||void 0===g||void 0===_)return lt("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(lt("Failed to decode base64 JWT payload"),null)}catch(A){return lt("Caught error parsing JWT payload as JSON",A?.toString()),null}}function $n(y,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&fr(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function fr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class xt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class _s{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ni(this.lastLoginAt),this.creationTime=Ni(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(y){var h;const g=y.auth,_=yield y.getIdToken(),A=yield $n(y,ir(g,{idToken:_}));U(A?.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const G=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?nt(R.providerUserInfo):[],ue=kr(y.providerData,G),Tt=!!y.isAnonymous&&!(y.email&&R.passwordHash||ue?.length),gt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ue,metadata:new _s(R.createdAt,R.lastLoginAt),isAnonymous:Tt};Object.assign(y,gt)})).apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(y){const h=(0,O.m9)(y);yield en(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function kr(y,h){return[...y.filter(_=>!h.some(A=>A.providerId===_.providerId)),...h]}function nt(y){return y.map(h=>{var{providerId:g}=h,_=(0,oe._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function tt(){return(tt=(0,p.Z)(function*(y,h){const g=yield mn(y,{},(0,p.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,G=xi(y,A,"/v1/token",`key=${R}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Jt.fetch()(G,{method:"POST",headers:ue,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class At{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function ln(y){const h=dt(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,p.Z)(function*(){return U(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,p.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:G}=yield function Ie(y,h){return tt.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(A,R,Number(G))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:A,expirationTime:R}=g,G=new At;return _&&(U("string"==typeof _,"internal-error",{appName:h}),G.refreshToken=_),A&&(U("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),R&&(U("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new At,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Rt(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Ut{constructor(h){var{uid:g,auth:_,stsTokenManager:A}=h,R=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new _s(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,p.Z)(function*(){const _=yield $n(g,g.stsTokenManager.getToken(g.auth,h));return U(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function Jn(y){return pn.apply(this,arguments)}(this,h)}reload(){return function tn(y){return sr.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new Ut(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,p.Z)(function*(){let A=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield en(_)),yield _.auth._persistUserIfCurrent(_),A&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,p.Z)(function*(){const g=yield h.getIdToken();return yield $n(h,function Eo(y,h){return Ze.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,A,R,G,ue,Be,Qe,Tt;const gt=null!==(_=g.displayName)&&void 0!==_?_:void 0,lr=null!==(A=g.email)&&void 0!==A?A:void 0,_r=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,uo=null!==(G=g.photoURL)&&void 0!==G?G:void 0,bg=null!==(ue=g.tenantId)&&void 0!==ue?ue:void 0,Ky=null!==(Be=g._redirectEventId)&&void 0!==Be?Be:void 0,df=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,Zy=null!==(Tt=g.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:hf,emailVerified:Cg,isAnonymous:lo,providerData:ff,stsTokenManager:pf}=g;U(hf&&pf,h,"internal-error");const Yy=At.fromJSON(this.name,pf);U("string"==typeof hf,h,"internal-error"),Rt(gt,h.name),Rt(lr,h.name),U("boolean"==typeof Cg,h,"internal-error"),U("boolean"==typeof lo,h,"internal-error"),Rt(_r,h.name),Rt(uo,h.name),Rt(bg,h.name),Rt(Ky,h.name),Rt(df,h.name),Rt(Zy,h.name);const Ed=new Ut({uid:hf,auth:h,email:lr,emailVerified:Cg,displayName:gt,isAnonymous:lo,photoURL:uo,phoneNumber:_r,tenantId:bg,stsTokenManager:Yy,createdAt:df,lastLoginAt:Zy});return ff&&Array.isArray(ff)&&(Ed.providerData=ff.map(gf=>Object.assign({},gf))),Ky&&(Ed._redirectEventId=Ky),Ed}static _fromIdTokenResponse(h,g,_=!1){return(0,p.Z)(function*(){const A=new At;A.updateFromServerResponse(g);const R=new Ut({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:_});return yield en(R),R})()}}const V=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,_){var A=this;return(0,p.Z)(function*(){A.storage[g]=_})()}_get(g){var _=this;return(0,p.Z)(function*(){const A=_.storage[g];return void 0===A?null:A})()}_remove(g){var _=this;return(0,p.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function L(y,h,g){return`firebase:${y}:${h}:${g}`}class z{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:A,name:R}=this.auth;this.fullUserKey=L(this.userKey,A.apiKey,R),this.fullPersistenceKey=L("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Ut._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,p.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,p.Z)(function*(){if(!g.length)return new z(ct(V),h,_);const A=(yield Promise.all(g.map(function(){var Qe=(0,p.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=A[0]||ct(V);const G=L(_,h.config.apiKey,h.name);let ue=null;for(const Qe of g)try{const Tt=yield Qe._get(G);if(Tt){const gt=Ut._fromJSON(h,Tt);Qe!==R&&(ue=gt),R=Qe;break}}catch{}const Be=A.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Be.length?(R=Be[0],ue&&(yield R._set(G,ue.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,p.Z)(function*(Tt){if(Tt!==R)try{yield Tt._remove(G)}catch{}});return function(Tt){return Qe.apply(this,arguments)}}())),new z(R,h,_)):new z(R,h,_)})()}}function re(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Gt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Q(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Pe(h))return"Blackberry";if(at(h))return"Webos";if(He(h))return"Safari";if((h.includes("chrome/")||Ct(h))&&!h.includes("edge/"))return"Chrome";if(Qt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function Q(y=(0,O.z$)()){return/firefox\//i.test(y)}function He(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ct(y=(0,O.z$)()){return/crios\//i.test(y)}function Gt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Qt(y=(0,O.z$)()){return/android/i.test(y)}function Pe(y=(0,O.z$)()){return/blackberry/i.test(y)}function at(y=(0,O.z$)()){return/webos/i.test(y)}function ut(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Gs(y=(0,O.z$)()){return ut(y)||Qt(y)||at(y)||Pe(y)||/windows phone/i.test(y)||Gt(y)}function ws(y,h=[]){let g;switch(y){case"Browser":g=re((0,O.z$)());break;case"Worker":g=`${re((0,O.z$)())}-${y}`;break;default:g=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ee.SDK_VERSION}/${_}`}class Io{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=R=>new Promise((G,ue)=>{try{G(h(R))}catch(Be){ue(Be)}});_.onAbort=g,this.queue.push(_);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,p.Z)(function*(){if(g.auth.currentUser===h)return;const _=[];try{for(const A of g.queue)yield A(h),A.onAbort&&_.push(A.onAbort)}catch(A){_.reverse();for(const R of _)try{R()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Ft{constructor(h,g,_){this.app=h,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zs(this),this.idTokenSubscription=new zs(this),this.beforeStateQueue=new Io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=ct(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var A,R;if(!_._deleted&&(_.persistenceManager=yield z.create(_,h),!_._deleted)){if(null!==(A=_._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,p.Z)(function*(){var _;const A=yield g.assertedPersistence.getCurrentUser();let R=A,G=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ue=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Be=R?._redirectEventId,Qe=yield g.tryRedirectSignIn(h);(!ue||ue===Be)&&Qe?.user&&(R=Qe.user,G=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ue){R=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ue))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return U(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,p.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,p.Z)(function*(){try{yield en(h)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ee(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,p.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&U(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,p.Z)(function*(){if(!_._deleted)return h&&U(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,p.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(ct(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,p.Z)(function*(){const A=yield _.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&ct(h)||g._popupRedirectResolver;U(_,g,"argument-error"),g.redirectPersistenceManager=yield z.create(g,[ct(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,p.Z)(function*(){var _,A;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,p.Z)(function*(){if(h===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return U(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,_,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(_["X-Firebase-Client"]=A),_})()}}function wn(y){return(0,O.m9)(y)}class zs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Es(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class gr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return fe("not implemented")}_getIdTokenResponse(h){return fe("not implemented")}_linkToIdToken(h,g){return fe("not implemented")}_getReauthenticationResolver(h){return fe("not implemented")}}function Gn(y,h){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:resetPassword",pt(y,h))})).apply(this,arguments)}function cn(y,h){return el.apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function tl(y,h){return qs.apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:update",pt(y,h))})).apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signInWithPassword",pt(y,h))})).apply(this,arguments)}function Ds(y,h){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:sendOobCode",pt(y,h))})).apply(this,arguments)}function zn(y,h){return nl.apply(this,arguments)}function nl(){return(nl=(0,p.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function or(y,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,p.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function Qa(y,h){return na.apply(this,arguments)}function na(){return(na=(0,p.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function rl(y,h){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function Ac(){return(Ac=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signInWithEmailLink",pt(y,h))})).apply(this,arguments)}function il(){return(il=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signInWithEmailLink",pt(y,h))})).apply(this,arguments)}class sl extends gr{constructor(h,g,_,A=null){super("password",_),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new sl(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new sl(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return function ta(y,h){return Do.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ch(y,h){return Ac.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:De(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return cn(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Th(y,h){return il.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:De(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function er(y,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signInWithIdp",pt(y,h))})).apply(this,arguments)}class Yi extends gr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Yi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A}=g,R=(0,oe._T)(g,["providerId","signInMethod"]);if(!_||!A)return null;const G=new Yi(_,A);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return er(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,er(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,er(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function Hp(y,h){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:sendVerificationCode",pt(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signInWithPhoneNumber",pt(y,h))})).apply(this,arguments)}function xc(){return(xc=(0,p.Z)(function*(y,h){const g=yield Sn(y,"POST","/v1/accounts:signInWithPhoneNumber",pt(y,h));if(g.temporaryProof)throw vi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const zp={USER_NOT_FOUND:"user-not-found"};function Rc(){return(Rc=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signInWithPhoneNumber",pt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),zp)})).apply(this,arguments)}class Cs extends gr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Cs({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Cs({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function ol(y,h){return bs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Gp(y,h){return xc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function qp(y,h){return Rc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:A,temporaryProof:R}=h;return _||g||A||R?new Cs({verificationId:g,verificationCode:_,phoneNumber:A,temporaryProof:R}):null}}class Xa{constructor(h){var g,_,A,R,G,ue;const Be=(0,O.zd)((0,O.pd)(h)),Qe=null!==(g=Be.apiKey)&&void 0!==g?g:null,Tt=null!==(_=Be.oobCode)&&void 0!==_?_:null,gt=function Nc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Be.mode)&&void 0!==A?A:null);U(Qe&&Tt&&gt,"argument-error"),this.apiKey=Qe,this.operation=gt,this.code=Tt,this.continueUrl=null!==(R=Be.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Be.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ue=Be.tenantId)&&void 0!==ue?ue:null}static parseLink(h){const g=function Oc(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||g||h||y}(h);try{return new Xa(g)}catch{return null}}}let ki=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return sl._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const A=Xa.parseLink(_);return U(A,"argument-error"),sl._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Qi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Xi extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ws extends Xi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return U("providerId"in g&&"signInMethod"in g,"argument-error"),Yi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ws.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ws.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:A,pendingToken:R,nonce:G,providerId:ue}=h;if(!_&&!A&&!g&&!R||!ue)return null;try{return new Ws(ue)._credential({idToken:g,accessToken:_,nonce:G,pendingToken:R})}catch{return null}}}let ra=(()=>{class y extends Xi{constructor(){super("facebook.com")}static credential(g){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ja=(()=>{class y extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:A}=g;if(!_&&!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),al=(()=>{class y extends Xi{constructor(){super("github.com")}static credential(g){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ia extends gr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return er(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,er(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,er(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A,pendingToken:R}=g;return _&&A&&R&&_===A?new ia(_,R):null}static _create(h,g){return new ia(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class si extends Qi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return si.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return si.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=ia.fromJSON(h);return U(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return ia._create(_,g)}catch{return null}}}let qr=(()=>{class y extends Xi{constructor(){super("twitter.com")}static credential(g,_){return Yi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:A}=g;if(!_||!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function bo(y,h){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signUp",pt(y,h))})).apply(this,arguments)}class mr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,A=!1){return(0,p.Z)(function*(){const R=yield Ut._fromIdTokenResponse(h,_,A),G=Mh(_);return new mr({user:R,providerId:G,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const A=Mh(_);return new mr({user:h,providerId:A,_tokenResponse:_,operationType:g})})()}}function Mh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function xn(){return(xn=(0,p.Z)(function*(y){var h;const g=wn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new mr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield bo(g,{returnSecureToken:!0}),A=yield mr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class eu extends O.ZR{constructor(h,g,_,A){var R;super(g.code,g.message),this.operationType=_,this.user=A,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,A){return new eu(h,g,_,A)}}function Rh(y,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?eu._fromErrorAndOperation(y,R,h,_):R})}function oi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function tu(){return(tu=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y);yield kn(!0,g,h);const{providerUserInfo:_}=yield Dr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=oi(_||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Co(y,h){return es.apply(this,arguments)}function es(){return(es=(0,p.Z)(function*(y,h,g=!1){const _=yield $n(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return mr._forOperation(y,"link",_)})).apply(this,arguments)}function kn(y,h,g){return nu.apply(this,arguments)}function nu(){return(nu=(0,p.Z)(function*(y,h,g){yield en(h);const A=!1===y?"provider-already-linked":"no-such-provider";U(oi(h.providerData).has(g)===y,h.auth,A)})).apply(this,arguments)}function sa(y,h){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(y,h,g=!1){const{auth:_}=y,A="reauthenticate";try{const R=yield $n(y,Rh(_,A,h,y),g);U(R.idToken,_,"internal-error");const G=dt(R.idToken);U(G,_,"internal-error");const{sub:ue}=G;return U(y.uid===ue,_,"user-mismatch"),mr._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===R?.code&&De(_,"user-mismatch"),R}})).apply(this,arguments)}function wi(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,p.Z)(function*(y,h,g=!1){const _="signIn",A=yield Rh(y,_,h),R=yield mr._fromIdTokenResponse(y,_,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function An(y,h){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,p.Z)(function*(y,h){return wi(wn(y),h)})).apply(this,arguments)}function aa(y,h){return kc.apply(this,arguments)}function kc(){return(kc=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y);return yield kn(!1,g,h.providerId),Co(g,h)})).apply(this,arguments)}function ul(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,p.Z)(function*(y,h){return sa((0,O.m9)(y),h)})).apply(this,arguments)}function ll(y,h){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(y,h){return Sn(y,"POST","/v1/accounts:signInWithCustomToken",pt(y,h))})).apply(this,arguments)}function iu(){return(iu=(0,p.Z)(function*(y,h){const g=wn(y),_=yield ll(g,{token:h,returnSecureToken:!0}),A=yield mr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class be{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?zt._fromServerResponse(h,g):De(h,"internal-error")}}class zt extends be{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new zt(g)}}function su(y,h,g){var _;U((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),U(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(U(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(U(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Rn(){return(Rn=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:h};g&&su(_,A,g),yield or(_,A)})).apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(y,h,g){yield Gn((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Ao(){return(Ao=(0,p.Z)(function*(y,h){yield tl((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function ua(y,h){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y),_=yield Gn(g,{oobCode:h}),A=_.requestType;switch(U(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(_.mfaInfo,g,"internal-error");default:U(_.email,g,"internal-error")}let R=null;return _.mfaInfo&&(R=be._fromServerResponse(wn(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Nh(){return(Nh=(0,p.Z)(function*(y,h){const{data:g}=yield ua((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(y,h,g){const _=wn(y),A=yield bo(_,{returnSecureToken:!0,email:h,password:g}),R=yield mr._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ys(){return(Ys=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};U(g.handleCodeInApp,_,"argument-error"),g&&su(_,A,g),yield Qa(_,A)})).apply(this,arguments)}function la(){return(la=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A=ki.credentialWithLink(h,g||he());return U(A._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),An(_,A)})).apply(this,arguments)}function Kp(y,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:createAuthUri",pt(y,h))})).apply(this,arguments)}function ha(){return(ha=(0,p.Z)(function*(y,h){const _={identifier:h,continueUri:ve()?he():"http://localhost"},{signinMethods:A}=yield Kp((0,O.m9)(y),_);return A||[]})).apply(this,arguments)}function ts(){return(ts=(0,p.Z)(function*(y,h){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&su(g.auth,A,h);const{email:R}=yield zn(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function au(){return(au=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&su(_.auth,R,g);const{email:G}=yield rl(_.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function Mo(y,h){return fa.apply(this,arguments)}function fa(){return(fa=(0,p.Z)(function*(y,h){return bt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function fl(){return(fl=(0,p.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},G=yield $n(_,Mo(_.auth,R));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const ue=_.providerData.find(({providerId:Be})=>"password"===Be);ue&&(ue.displayName=_.displayName,ue.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function Bc(y,h,g){return pl.apply(this,arguments)}function pl(){return(pl=(0,p.Z)(function*(y,h,g){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const G=yield $n(y,cn(_,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class ui{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class In extends ui{constructor(h,g,_,A){super(h,g,_),this.username=A}}class Ph extends ui{constructor(h,g){super(h,"facebook.com",g)}}class jc extends In{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Zp extends ui{constructor(h,g){super(h,"google.com",g)}}class $c extends In{constructor(h,g,_){super(h,"twitter.com",g,_)}}function Yp(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Lr(y){var h,g;if(!y)return null;const{providerId:_}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(g=null===(h=dt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new ui(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new Ph(R,A);case"github.com":return new jc(R,A);case"google.com":return new Zp(R,A);case"twitter.com":return new $c(R,A,y.screenName||null);case"custom":case"anonymous":return new ui(R,null);default:return new ui(R,_,A)}}(g)}class Po{constructor(h,g,_){this.type=h,this.credential=g,this.auth=_}static _fromIdtoken(h,g){return new Po("enroll",h,g)}static _fromMfaPendingCredential(h){return new Po("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Po._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Po._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ml{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=wn(h),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(ue=>be._fromServerResponse(_,ue));U(A.mfaPendingCredential,_,"internal-error");const G=Po._fromMfaPendingCredential(A.mfaPendingCredential);return new ml(G,R,function(){var ue=(0,p.Z)(function*(Be){const Qe=yield Be._process(_,G);delete A.mfaInfo,delete A.mfaPendingCredential;const Tt=Object.assign(Object.assign({},A),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const gt=yield mr._fromIdTokenResponse(_,g.operationType,Tt);return yield _._updateCurrentUser(gt.user),gt;case"reauthenticate":return U(g.user,_,"internal-error"),mr._forOperation(g.user,g.operationType,Tt);default:De(_,"internal-error")}});return function(Be){return ue.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,p.Z)(function*(){return g.signInResolver(h)})()}}function yl(y,h){return bt(y,"POST","/v2/accounts/mfaEnrollment:start",pt(y,h))}class uu{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>be._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new uu(h)}getSession(){var h=this;return(0,p.Z)(function*(){return Po._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var _=this;return(0,p.Z)(function*(){const A=h,R=yield _.getSession(),G=yield $n(_.user,A._process(_.user.auth,R,g));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(h){var g=this;return(0,p.Z)(function*(){const _="string"==typeof h?h:h.uid,A=yield g.user.getIdToken();try{const R=yield $n(g.user,function kh(y,h){return bt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",pt(y,h))}(g.user.auth,{idToken:A,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:G})=>G!==_),yield g.user._updateTokensIfNecessary(R),yield g.user.reload()}catch(R){throw R}})()}}const As=new WeakMap,Li="__sak";class vl{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Li,"1"),this.storage.removeItem(Li),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const cu=(()=>{class y extends vl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pa(){const y=(0,O.z$)();return He(y)||ut(y)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Gs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const A=this.storage.getItem(_),R=this.localCache[_];A!==R&&g(_,R,A)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((ue,Be,Qe)=>{this.notifyListeners(ue,Qe)});const A=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(A);if(g.newValue!==ue)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!_)return}const R=()=>{const ue=this.storage.getItem(A);!_&&this.localCache[A]===ue||this.notifyListeners(A,ue)},G=this.storage.getItem(A);!function Pn(){return(0,O.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,_){this.localCache[g]=_;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var A=()=>super._set,R=this;return(0,p.Z)(function*(){yield A().call(R,g,_),R.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,A=this;return(0,p.Z)(function*(){const R=yield _().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var _=()=>super._remove,A=this;return(0,p.Z)(function*(){yield _().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Wr=(()=>{class y extends vl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let Fh=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(R=>R.isListeningto(g));if(_)return _;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,p.Z)(function*(){const A=g,{eventId:R,eventType:G,data:ue}=A.data,Be=_.handlersMap[G];if(!Be?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Qe=Array.from(Be).map(function(){var gt=(0,p.Z)(function*(lr){return lr(A.origin,ue)});return function(lr){return gt.apply(this,arguments)}}()),Tt=yield function ko(y){return Promise.all(y.map(function(){var h=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(Qe);A.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:Tt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Vi(y="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return y+g}class ga{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var A=this;return(0,p.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,ue;return new Promise((Be,Qe)=>{const Tt=Vi("",20);R.port1.start();const gt=setTimeout(()=>{Qe(new Error("unsupported_event"))},_);ue={messageChannel:R,onMessage(lr){const _r=lr;if(_r.data.eventId===Tt)switch(_r.data.status){case"ack":clearTimeout(gt),G=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Be(_r.data.response);break;default:clearTimeout(gt),clearTimeout(G),Qe(new Error("invalid_response"))}}},A.handlers.add(ue),R.port1.addEventListener("message",ue.onMessage),A.target.postMessage({eventType:h,eventId:Tt,data:g},[R.port2])}).finally(()=>{ue&&A.removeMessageHandler(ue)})})()}}function Nn(){return window}function ma(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function ya(){return(ya=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qs="firebaseLocalStorageDb",xs="firebaseLocalStorage",Wc="fbase_key";class Ui{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Xs(y,h){return y.transaction([xs],h?"readwrite":"readonly").objectStore(xs)}function Js(){const y=indexedDB.open(Qs,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(xs,{keyPath:Wc})}catch(A){g(A)}}),y.addEventListener("success",(0,p.Z)(function*(){const _=y.result;_.objectStoreNames.contains(xs)?h(_):(_.close(),yield function wl(){const y=indexedDB.deleteDatabase(Qs);return new Ui(y).toPromise()}(),h(yield Js()))}))})}function ns(y,h,g){return El.apply(this,arguments)}function El(){return(El=(0,p.Z)(function*(y,h,g){const _=Xs(y,!0).put({[Wc]:h,value:g});return new Ui(_).toPromise()})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(y,h){const g=Xs(y,!1).get(h),_=yield new Ui(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function rs(y,h){const g=Xs(y,!0).delete(h);return new Ui(g).toPromise()}const Rs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Js()),g.db})()}_withRetries(g){var _=this;return(0,p.Z)(function*(){let A=0;for(;;)try{const R=yield _._openDb();return yield g(R)}catch(R){if(A++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return ma()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Fh._getInstance(function du(){return ma()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,p.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,p.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var _,A;if(g.activeServiceWorker=yield function Ms(){return ya.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ga(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,p.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function _l(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Js();return yield ns(g,Li,"1"),yield rs(g,Li),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,p.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(R=>ns(R,g,_)),A.localCache[g]=_,A.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,p.Z)(function*(){const A=yield _._withRetries(R=>function fu(y,h){return Fo.apply(this,arguments)}(R,g));return _.localCache[g]=A,A})()}_remove(g){var _=this;return(0,p.Z)(function*(){return _._withPendingWrite((0,p.Z)(function*(){return yield _._withRetries(A=>rs(A,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const _=yield g._withRetries(G=>{const ue=Xs(G,!1).getAll();return new Ui(ue).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:G,value:ue}of _)R.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(ue)&&(g.notifyListeners(G,ue),A.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!R.has(G)&&(g.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(g,_){this.localCache[g]=_;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Il(y,h){return bt(y,"POST","/v2/accounts/mfaSignIn:start",pt(y,h))}function Ns(){return(Ns=(0,p.Z)(function*(y){return(yield bt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lo(y){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=A=>{const R=ye("internal-error");R.customData=A,g(R)},_.type="text/javascript",_.charset="UTF-8",function eo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function va(y){return`__${y}${Math.floor(1e6*Math.random())}`}const to=1e12;class dn{constructor(h){this.auth=h,this.counter=to,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new Lh(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||to;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||to))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,p.Z)(function*(){var _;return null===(_=g._widgets.get(h||to))||void 0===_||_.execute(),""})()}}class Lh{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;U(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jp(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const eg=va("rcb"),tg=new it(3e4,6e4);class Qc{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Nn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return U(function ng(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Nn().grecaptcha):new Promise((_,A)=>{const R=Nn().setTimeout(()=>{A(ye(h,"network-request-failed"))},tg.get());Nn()[eg]=()=>{Nn().clearTimeout(R),delete Nn()[eg];const ue=Nn().grecaptcha;if(!ue)return void A(ye(h,"internal-error"));const Be=ue.render;ue.render=(Qe,Tt)=>{const gt=Be(Qe,Tt);return this.counter++,gt},this.hostLanguage=g,_(ue)},Lo(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:eg,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Nn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gu{load(h){return(0,p.Z)(function*(){return new dn(h)})()}clearedOneInstance(){}}const rg="recaptcha",rw={theme:"light",type:"image"};class ur{constructor(h,g=Object.assign({},rw),_){this.parameters=g,this.type=rg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(_),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;U(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gu:new Qc,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(R=>{const G=ue=>{!ue||(h.tokenChangeListeners.delete(G),R(ue))};h.tokenChangeListeners.add(G),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=Nn()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){U(ve()&&!ma(),h.auth,"internal-error"),yield function mu(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Ar(y){return Ns.apply(this,arguments)}(h.auth);U(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kr{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Cs._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function yu(){return(yu=(0,p.Z)(function*(y,h,g){const _=wn(y),A=yield no(_,h,(0,O.m9)(g));return new Kr(A,R=>An(_,R))})).apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);yield kn(!1,_,"phone");const A=yield no(_.auth,h,(0,O.m9)(g));return new Kr(A,R=>aa(_,R))})).apply(this,arguments)}function _a(){return(_a=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y),A=yield no(_.auth,h,(0,O.m9)(g));return new Kr(A,R=>ul(_,R))})).apply(this,arguments)}function no(y,h,g){return vu.apply(this,arguments)}function vu(){return(vu=(0,p.Z)(function*(y,h,g){var _;const A=yield g.verify();try{let R;if(U("string"==typeof A,y,"argument-error"),U(g.type===rg,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return U("enroll"===G.type,y,"internal-error"),(yield yl(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{U("signin"===G.type,y,"internal-error");const ue=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return U(ue,y,"missing-multi-factor-info"),(yield Il(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Hp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return G}}finally{g._reset()}})).apply(this,arguments)}function Xc(){return(Xc=(0,p.Z)(function*(y,h){yield Co((0,O.m9)(y),h)})).apply(this,arguments)}let Dl=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=wn(g)}verifyPhoneNumber(g,_){return no(this.auth,g,(0,O.m9)(_))}static credential(g,_){return Cs._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:A}=g;return _&&A?Cs._fromTokenResponse(_,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function wa(y,h){return h?ct(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class bl extends gr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return er(h,this._buildIdpRequest())}_linkToIdToken(h,g){return er(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return er(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Zr(y){return wi(y.auth,new bl(y),y.bypassAuthState)}function _u(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),sa(g,new bl(y),y.bypassAuthState)}function ro(y){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,p.Z)(function*(y){const{auth:h,user:g}=y;return U(g,h,"internal-error"),Co(g,new bl(y),y.bypassAuthState)})).apply(this,arguments)}class wu{constructor(h,g,_,A,R=!1){this.auth=h,this.resolver=_,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,p.Z)(function*(_,A){h.pendingPromise={resolve:_,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,p.Z)(function*(){const{urlResponse:_,sessionId:A,postBody:R,tenantId:G,error:ue,type:Be}=h;if(ue)return void g.reject(ue);const Qe={auth:g.auth,requestUri:_,sessionId:A,tenantId:G||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Be)(Qe))}catch(Tt){g.reject(Tt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Zr;case"linkViaPopup":case"linkViaRedirect":return ro;case"reauthViaPopup":case"reauthViaRedirect":return _u;default:De(this.auth,"internal-error")}}resolve(h){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jc=new it(2e3,1e4);function Eu(){return(Eu=(0,p.Z)(function*(y,h,g){const _=wn(y);Ve(y,h,Qi);const A=wa(_,g);return new nn(_,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function td(){return(td=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Qi);const A=wa(_.auth,g);return new nn(_.auth,"reauthViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Qi);const A=wa(_.auth,g);return new nn(_.auth,"linkViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}let nn=(()=>{class y extends wu{constructor(g,_,A,R,G){super(g,_,R,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const _=yield g.execute();return U(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,p.Z)(function*(){Fe(1===g.filter.length,"Popup operations only handle one event");const _=Vi();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(ye(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,A;this.pollId=null!==(A=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Jc.get())};g()}}return y.currentPopupAction=null,y})();const Bi=new Map;class Tl extends wu{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,p.Z)(function*(){let _=Bi.get(g.auth._key());if(!_){try{const R=(yield function Iu(y,h){return is.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(R)}catch(A){_=()=>Promise.reject(A)}Bi.set(g.auth._key(),_)}return g.bypassAuthState||Bi.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const A=yield _.auth._redirectUserForId(h.eventId);if(A)return _.user=A,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function is(){return(is=(0,p.Z)(function*(y,h){const g=St(h),_=Dn(y);if(!(yield _._isAvailable()))return!1;const A="true"===(yield _._get(g));return yield _._remove(g),A})).apply(this,arguments)}function Du(y,h){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(y,h){return Dn(y)._set(St(h),"true")})).apply(this,arguments)}function Ei(y,h){Bi.set(y._key(),h)}function Dn(y){return ct(y._redirectPersistence)}function St(y){return L("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,p.Z)(function*(y,h,g){const _=wn(y);Ve(y,h,Qi),yield _._initializationPromise;const A=wa(_,g);return yield Du(A,_),A._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Qi),yield _.auth._initializationPromise;const A=wa(_.auth,g);yield Du(A,_.auth);const R=yield wt(_);return A._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ae(){return(Ae=(0,p.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Qi),yield _.auth._initializationPromise;const A=wa(_.auth,g);yield kn(!1,_,h.providerId),yield Du(A,_.auth);const R=yield wt(_);return A._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(y,h){return yield wn(y)._initializationPromise,ot(y,h,!1)})).apply(this,arguments)}function ot(y,h){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(y,h,g=!1){const _=wn(y),A=wa(_,h),G=yield new Tl(_,A,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,h)),G})).apply(this,arguments)}function wt(y){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(y){const h=Vi(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class io{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function vr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qr(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!Qr(h)){const A=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ye(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qn(h))}saveEventToCache(h){this.cachedEventUids.add(qn(h)),this.lastProcessedEventTime=Date.now()}}function qn(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Qr({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ci(y){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(y,h={}){return bt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Ny=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jh=/^https?/;function $h(){return($h=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ci(y);for(const g of h)try{if(sg(g))return}catch{}De(y,"unauthorized-domain")})).apply(this,arguments)}function sg(y){const h=he(),{protocol:g,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===_}if(!jh.test(g))return!1;if(Ny.test(y))return _===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(_)}const og=new it(3e4,6e4);function Hh(){const y=Nn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Cu=null;function ag(y){return Cu=Cu||function Ia(y){return new Promise((h,g)=>{var _,A,R;function G(){Hh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Hh(),g(ye(y,"network-request-failed"))},timeout:og.get()})}if(null!==(A=null===(_=Nn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Nn().gapi)||void 0===R||!R.load){const ue=va("iframefcb");return Nn()[ue]=()=>{gapi.load?G():g(ye(y,"network-request-failed"))},Lo(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Be=>g(Be))}G()}}).catch(h=>{throw Cu=null,h})}(y),Cu}const Gh=new it(5e3,15e3),Py={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zh(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?Ot(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:ee.SDK_VERSION},A=lg.get(y.config.apiHost);A&&(_.eid=A);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${g}?${(0,O.xO)(_).slice(1)}`}function rd(){return rd=(0,p.Z)(function*(y){const h=yield ag(y),g=Nn().gapi;return U(g,y,"internal-error"),h.open({where:document.body,url:zh(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Py,dontclear:!0},_=>new Promise(function(){var A=(0,p.Z)(function*(R,G){yield _.restyle({setHideOnLeave:!1});const ue=ye(y,"network-request-failed"),Be=Nn().setTimeout(()=>{G(ue)},Gh.get());function Qe(){Nn().clearTimeout(Be),R(_)}_.ping(Qe).then(Qe,()=>{G(ue)})});return function(R,G){return A.apply(this,arguments)}}()))}),rd.apply(this,arguments)}const ky={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dg{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Al(y,h,g,_,A,R){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:ee.SDK_VERSION,eventId:A};if(h instanceof Qi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Be,Qe]of Object.entries(R||{}))G[Be]=Qe}if(h instanceof Xi){const Be=h.getScopes().filter(Qe=>""!==Qe);Be.length>0&&(G.scopes=Be.join(","))}y.tenantId&&(G.tid=y.tenantId);const ue=G;for(const Be of Object.keys(ue))void 0===ue[Be]&&delete ue[Be];return`${function Vy({config:y}){return y.emulator?Ot(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ue).slice(1)}`}const Wh="webStorageSupport";class Tu extends class Kh{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Tu(h)}_finalizeEnroll(h,g,_){return function Xp(y,h){return bt(y,"POST","/v2/accounts/mfaEnrollment:finalize",pt(y,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Yc(y,h){return bt(y,"POST","/v2/accounts/mfaSignIn:finalize",pt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fg=(()=>{class y{constructor(){}static assertion(g){return Tu._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Au="@firebase/auth";class iw{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fs(){return window}function od(){return(od=(0,p.Z)(function*(y,h,g){var _;const{BuildInfo:A}=Fs();Fe(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Qh(h.sessionId),G={};return ut()?G.ibi=A.packageName:Qt()?G.apn=A.packageName:De(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=R,Al(y,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function Da(){return(Da=(0,p.Z)(function*(y){const{BuildInfo:h}=Fs(),g={};ut()?g.iosBundleId=h.packageName:Qt()?g.androidPackageName=h.packageName:De(y,"operation-not-supported-in-this-environment"),yield ci(y,g)})).apply(this,arguments)}function Vo(){return(Vo=(0,p.Z)(function*(y,h,g){const{cordova:_}=Fs();let A=()=>{};try{yield new Promise((R,G)=>{let ue=null;function Be(){var gt;R();const lr=null===(gt=_.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof lr&&lr(),"function"==typeof g?.close&&g.close()}function Qe(){ue||(ue=window.setTimeout(()=>{G(ye(y,"redirect-cancelled-by-user"))},2e3))}function Tt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Be),document.addEventListener("resume",Qe,!1),Qt()&&document.addEventListener("visibilitychange",Tt,!1),A=()=>{h.removePassiveListener(Be),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",Tt,!1),ue&&window.clearTimeout(ue)}})}finally{A()}})).apply(this,arguments)}function Qh(y){return xl.apply(this,arguments)}function xl(){return(xl=(0,p.Z)(function*(y){const h=mg(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mg(y){if(Fe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}(0,O.Pz)("authIdTokenMaxAge"),function Uy(y){(0,ee._registerComponent)(new ie.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=_.options;return((ue,Be)=>{U(R&&!R.includes(":"),"invalid-api-key",{appName:ue.name}),U(!G?.includes(":"),"argument-error",{appName:ue.name});const Qe={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(y)},Tt=new Ft(ue,Be,Qe);return function ne(y,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ct);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(Tt,g),Tt})(_,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new ie.wA("auth-internal",h=>{const g=wn(h.getProvider("auth").getImmediate());return new iw(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Au,"0.21.5",function sw(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ee.registerVersion)(Au,"0.21.5","esm2017")}("Browser");class ad extends io{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function ud(y){return xu.apply(this,arguments)}function xu(){return(xu=(0,p.Z)(function*(y){const h=yield ld()._get(Uo(y));return h&&(yield ld()._remove(Uo(y))),h})).apply(this,arguments)}function jy(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function ld(){return ct(cu)}function Uo(y){return L("authEvent",y.config.apiKey,y.name)}function $i(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function hd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Rl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function tf(y=(0,O.z$)()){return!("file:"!==Rl()&&"ionic:"!==Rl()&&"capacitor:"!==Rl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function nf(){try{const y=self.localStorage,h=Vi();if(y)return y.setItem(h,"1"),y.removeItem(h),!function zy(y=(0,O.z$)()){return function Gy(){return(0,O.w1)()&&11===document?.documentMode}()||function Nl(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Nu()&&(0,O.hl)()}return!1}function Nu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function pd(){return(function lw(){return"http:"===Rl()||"https:"===Rl()}()||(0,O.ru)()||tf())&&!function fd(){return(0,O.b$)()||(0,O.UG)()}()&&nf()&&!Nu()}function ba(){return tf()&&typeof document<"u"}function Bo(){return(Bo=(0,p.Z)(function*(){return!!ba()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ii={LOCAL:"local",NONE:"none",SESSION:"session"},so=U,rf="persistence";function gd(y){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,p.Z)(function*(y){yield y._initializationPromise;const h=Ig(),g=L(rf,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Ig(){var y;try{return(null===(y=function Ol(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const sf=U;class Ls{constructor(){this.browserResolver=ct(class ji{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wr,this._completeRedirectFn=ot,this._overrideRedirectResult=Ei}_openPopup(h,g,_,A){var R=this;return(0,p.Z)(function*(){var G;Fe(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ue=Al(h,g,_,he(),A);return function Ly(y,h,g,_=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let ue="";const Be=Object.assign(Object.assign({},ky),{width:_.toString(),height:A.toString(),top:R,left:G}),Qe=(0,O.z$)().toLowerCase();g&&(ue=Ct(Qe)?"_blank":g),Q(Qe)&&(h=h||"http://localhost",Be.scrollbars="yes");const Tt=Object.entries(Be).reduce((lr,[_r,uo])=>`${lr}${_r}=${uo},`,"");if(function pr(y=(0,O.z$)()){var h;return ut(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ue)return function hg(y,h){const g=document.createElement("a");g.href=y,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",ue),new dg(null);const gt=window.open(h||"",ue,Tt);U(gt,y,"popup-blocked");try{gt.focus()}catch{}return new dg(gt)}(h,ue,Vi())})()}_openRedirect(h,g,_,A){var R=this;return(0,p.Z)(function*(){return yield R._originValidation(h),function Vr(y){Nn().location.href=y}(Al(h,g,_,he(),A)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(Fe(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,p.Z)(function*(){const _=yield function nd(y){return rd.apply(this,arguments)}(h),A=new io(h);return _.register("authEvent",R=>(U(R?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=_,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Wh,{type:Wh},A=>{var R;const G=null===(R=A?.[0])||void 0===R?void 0:R[Wh];void 0!==G&&g(!!G),De(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ig(y){return $h.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Gs()||He()||ut()}}),this.cordovaResolver=ct(class cd{constructor(){this._redirectPersistence=Wr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ot,this._overrideRedirectResult=Ei}_initialize(h){var g=this;return(0,p.Z)(function*(){const _=h._key();let A=g.eventManagers.get(_);return A||(A=new ad(h),g.eventManagers.set(_,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){De(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,A){var R=this;return(0,p.Z)(function*(){!function Yh(y){var h,g,_,A,R,G,ue,Be,Qe,Tt;const gt=Fs();U("function"==typeof(null===(h=gt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(g=gt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(R=null===(A=null===(_=gt?.cordova)||void 0===_?void 0:_.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Be=null===(ue=null===(G=gt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Be?void 0:Be.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Tt=null===(Qe=gt?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===Tt?void 0:Tt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function bu(){Bi.clear()}(),yield R._originValidation(h);const ue=function yg(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:jy(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,_,A);yield function Xh(y,h){return ld()._set(Uo(y),h)}(h,ue);const Be=yield function Sl(y,h,g){return od.apply(this,arguments)}(h,ue,g),Qe=yield function Ml(y){const{cordova:h}=Fs();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let A=null;_?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function Tn(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Be);return function Su(y,h,g){return Vo.apply(this,arguments)}(h,G,Qe)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Zh(y){return Da.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:A,BuildInfo:R}=Fs(),G=setTimeout((0,p.Z)(function*(){yield ud(h),g.onEvent(hd())}),500),ue=function(){var Tt=(0,p.Z)(function*(gt){clearTimeout(G);const lr=yield ud(h);let _r=null;lr&&gt?.url&&(_r=function uw(y,h){var g,_;const A=function Jh(y){const h=$i(y),g=h.link?decodeURIComponent(h.link):void 0,_=$i(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return $i(A).link||A||_||g||y}(h);if(A.includes("/__/auth/callback")){const R=$i(A),G=R.firebaseError?function Ru(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ue=null===(_=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Be=ue?ye(ue):null;return Be?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(lr,gt.url)),g.onEvent(_r||hd())});return function(lr){return Tt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ue);const Be=A,Qe=`${R.packageName.toLowerCase()}://`;Fs().handleOpenURL=function(){var Tt=(0,p.Z)(function*(gt){if(gt.toLowerCase().startsWith(Qe)&&ue({url:gt}),"function"==typeof Be)try{Be(gt)}catch(lr){console.error(lr)}});return function(gt){return Tt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Wr,this._completeRedirectFn=ot,this._overrideRedirectResult=Ei}_initialize(h){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,A){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,_,A)})()}_openRedirect(h,g,_,A){var R=this;return(0,p.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,_,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return ba()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const g=yield function wg(){return Bo.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function af(y){return y.unwrap()}function uf(y){return oo(y)}function oo(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Dl.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=Ja;break;case"facebook.com":_=ra;break;case"github.com":_=al;break;case"twitter.com":_=qr;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:ue,nonce:Be}=h;return R||G||A||ue?ue?g.startsWith("saml.")?ia._create(g,ue):Yi._fromParams({providerId:g,signInMethod:g,pendingToken:ue,idToken:A,accessToken:R}):new Ws(g).credential({idToken:A,accessToken:R,rawNonce:Be}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function jr(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function yd(y,h){var g;const _=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Wy(y,function Fn(y,h){var g;const _=(0,O.m9)(y),A=h;return U(h.customData.operationType,_,"argument-error"),U(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),ml._fromError(_,A)}(y,h));else if(_){const A=oo(h),R=h;A&&(R.credential=A,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:uf(g),additionalUserInfo:Yp(g),user:ao.getOrCreate(A)}})}function vd(y,h){return _d.apply(this,arguments)}function _d(){return(_d=(0,p.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>jr(y,g.confirm(_))}})).apply(this,arguments)}class Wy{constructor(h,g){this.resolver=g,this.auth=function md(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return jr(af(this.auth),this.resolver.resolveSignIn(h))}}class ao{constructor(h){this._delegate=h,this.multiFactor=function lu(y){const h=(0,O.m9)(y);return As.has(h)||As.set(h,uu._fromUser(h)),As.get(h)}(h)}static getOrCreate(h){return ao.USER_MAP.has(h)||ao.USER_MAP.set(h,new ao(h)),ao.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,p.Z)(function*(){return jr(g.auth,aa(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,p.Z)(function*(){return vd(_.auth,function Sr(y,h,g){return li.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,p.Z)(function*(){return jr(g.auth,function Ry(y,h,g){return Mr.apply(this,arguments)}(g._delegate,h,Ls))})()}linkWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield gd(wn(g.auth)),function W(y,h,g){return function X(y,h,g){return Ae.apply(this,arguments)}(y,h,g)}(g._delegate,h,Ls)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,p.Z)(function*(){return jr(g.auth,ul(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return vd(this.auth,function Uh(y,h,g){return _a.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return jr(this.auth,function xy(y,h,g){return td.apply(this,arguments)}(this._delegate,h,Ls))}reauthenticateWithRedirect(h){var g=this;return(0,p.Z)(function*(){return yield gd(wn(g.auth)),function C(y,h,g){return function M(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,Ls)})()}sendEmailVerification(h){return function So(y,h){return ts.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,p.Z)(function*(){return yield function Tr(y,h){return tu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Uc(y,h){return Bc((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function xo(y,h){return Bc((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function My(y,h){return Xc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function hl(y,h){return fl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Vc(y,h,g){return au.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ao.USER_MAP=new WeakMap;const jo=U;let kl=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;jo(A,"invalid-api-key",{appName:g.name}),jo(A,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?Ls:void 0;this._delegate=_.initialize({options:{persistence:Ca(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(_e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ao.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Za(y,h,g){const _=wn(y);U(_._canInitEmulator,_,"emulator-config-failed"),U(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const A=!!g?.disableWarnings,R=Pi(h),{host:G,port:ue}=function Hn(y){const h=Pi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(_);if(A){const R=A[1];return{host:R,port:Es(_.substr(R.length+1))}}{const[R,G]=_.split(":");return{host:R,port:Es(G)}}}(h);_.config.emulator={url:`${R}//${G}${null===ue?"":`:${ue}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:ue,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Is(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function ai(y,h){return Ao.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ua(this._delegate,g)}confirmPasswordReset(g,_){return function ou(y,h,g){return Zs.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var A=this;return(0,p.Z)(function*(){return jr(A._delegate,function Lc(y,h,g){return yr.apply(this,arguments)}(A._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function da(y,h){return ha.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Fi(y,h){return"EMAIL_SIGNIN"===Xa.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){jo(pd(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function We(y,h){return st.apply(this,arguments)}(g._delegate,Ls);return _?jr(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function $y(y,h){wn(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,A){const{next:R,error:G,complete:ue}=Fl(g,_,A);return this._delegate.onAuthStateChanged(R,G,ue)}onIdTokenChanged(g,_,A){const{next:R,error:G,complete:ue}=Fl(g,_,A);return this._delegate.onIdTokenChanged(R,G,ue)}sendSignInLinkToEmail(g,_){return function Oh(y,h,g){return Ys.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function dl(y,h,g){return Rn.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,p.Z)(function*(){let A;switch(function qy(y,h){so(Object.values(Ii).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?so(h!==Ii.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?so(h===Ii.NONE,y,"unsupported-persistence-type"):Nu()?so(h===Ii.NONE||h===Ii.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):so(h===Ii.NONE||nf(),y,"unsupported-persistence-type")}(_._delegate,g),g){case Ii.SESSION:A=Wr;break;case Ii.LOCAL:A=(yield ct(Rs)._isAvailable())?Rs:cu;break;case Ii.NONE:A=V;break;default:return De("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return jr(this._delegate,function xh(y){return xn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return jr(this._delegate,An(this._delegate,g))}signInWithCustomToken(g){return jr(this._delegate,function cl(y,h){return iu.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return jr(this._delegate,function Ts(y,h,g){return An((0,O.m9)(y),ki.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return jr(this._delegate,function Wp(y,h,g){return la.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return vd(this._delegate,function Vh(y,h,g){return yu.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,p.Z)(function*(){return jo(pd(),_._delegate,"operation-not-supported-in-this-environment"),jr(_._delegate,function ed(y,h,g){return Eu.apply(this,arguments)}(_._delegate,g,Ls))})()}signInWithRedirect(g){var _=this;return(0,p.Z)(function*(){return jo(pd(),_._delegate,"operation-not-supported-in-this-environment"),yield gd(_._delegate),function Ln(y,h,g){return function Bh(y,h,g){return D.apply(this,arguments)}(y,h,g)}(_._delegate,g,Ls)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function En(y,h){return Nh.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ii,y})();function Fl(y,h,g){let _=y;"function"!=typeof y&&({next:_,error:h,complete:g}=y);const A=_;return{next:G=>A(G&&ao.getOrCreate(G)),error:h,complete:g}}function Ca(y,h){const g=function Eg(y,h){const g=Ig();if(!g)return[];const _=L(rf,y,h);switch(g.getItem(_)){case Ii.NONE:return[V];case Ii.LOCAL:return[Rs,Wr];case Ii.SESSION:return[Wr];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(Rs)&&g.push(Rs),typeof window<"u")for(const _ of[cu,Wr])g.includes(_)||g.push(_);return g.includes(V)||g.push(V),g}class wd{constructor(){this.providerId="phone",this._delegate=new Dl(af(Y.Z.auth()))}static credential(h,g){return Dl.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}wd.PHONE_SIGN_IN_METHOD=Dl.PHONE_SIGN_IN_METHOD,wd.PROVIDER_ID=Dl.PROVIDER_ID;const lf=U;class cw{constructor(h,g,_=Y.Z.app()){var A;lf(null===(A=_.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ur(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cf(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new kl(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ki,FacebookAuthProvider:ra,GithubAuthProvider:al,GoogleAuthProvider:Ja,OAuthProvider:Ws,SAMLAuthProvider:si,PhoneAuthProvider:wd,PhoneMultiFactorGenerator:fg,RecaptchaVerifier:cw,TwitterAuthProvider:qr,Auth:kl,AuthCredential:gr,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.5")}(Y.Z)},8766:(ht,Ce,k)=>{k.d(Ce,{Lj:()=>De,X3:()=>lt});var p=k(5861);let O,ee;const ie=new WeakMap,ce=new WeakMap,le=new WeakMap,B=new WeakMap,$=new WeakMap;let Te={get(U,fe,Fe){if(U instanceof IDBTransaction){if("done"===fe)return ce.get(U);if("objectStoreNames"===fe)return U.objectStoreNames||le.get(U);if("store"===fe)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return ae(U[fe])},set:(U,fe,Fe)=>(U[fe]=Fe,!0),has:(U,fe)=>U instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in U};function ge(U){return"function"==typeof U?function et(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...fe){return U.apply(Je(this),fe),ae(ie.get(this))}:function(...fe){return ae(U.apply(Je(this),fe))}:function(fe,...Fe){const Ye=U.call(Je(this),fe,...Fe);return le.set(Ye,fe.sort?fe.sort():[fe]),ae(Ye)}}(U):(U instanceof IDBTransaction&&function je(U){if(ce.has(U))return;const fe=new Promise((Fe,Ye)=>{const ct=()=>{U.removeEventListener("complete",qe),U.removeEventListener("error",ne),U.removeEventListener("abort",ne)},qe=()=>{Fe(),ct()},ne=()=>{Ye(U.error||new DOMException("AbortError","AbortError")),ct()};U.addEventListener("complete",qe),U.addEventListener("error",ne),U.addEventListener("abort",ne)});ce.set(U,fe)}(U),((U,fe)=>fe.some(Fe=>U instanceof Fe))(U,function J(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Te):U)}function ae(U){if(U instanceof IDBRequest)return function q(U){const fe=new Promise((Fe,Ye)=>{const ct=()=>{U.removeEventListener("success",qe),U.removeEventListener("error",ne)},qe=()=>{Fe(ae(U.result)),ct()},ne=()=>{Ye(U.error),ct()};U.addEventListener("success",qe),U.addEventListener("error",ne)});return fe.then(Fe=>{Fe instanceof IDBCursor&&ie.set(Fe,U)}).catch(()=>{}),$.set(fe,U),fe}(U);if(B.has(U))return B.get(U);const fe=ge(U);return fe!==U&&(B.set(U,fe),$.set(fe,U)),fe}const Je=U=>$.get(U);function lt(U,fe,{blocked:Fe,upgrade:Ye,blocking:ct,terminated:qe}={}){const ne=indexedDB.open(U,fe),he=ae(ne);return Ye&&ne.addEventListener("upgradeneeded",ve=>{Ye(ae(ne.result),ve.oldVersion,ve.newVersion,ae(ne.transaction))}),Fe&&ne.addEventListener("blocked",()=>Fe()),he.then(ve=>{qe&&ve.addEventListener("close",()=>qe()),ct&&ve.addEventListener("versionchange",()=>ct())}).catch(()=>{}),he}function De(U,{blocked:fe}={}){const Fe=indexedDB.deleteDatabase(U);return fe&&Fe.addEventListener("blocked",()=>fe()),ae(Fe).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],Ve=new Map;function Ue(U,fe){if(!(U instanceof IDBDatabase)||fe in U||"string"!=typeof fe)return;if(Ve.get(fe))return Ve.get(fe);const Fe=fe.replace(/FromIndex$/,""),Ye=fe!==Fe,ct=we.includes(Fe);if(!(Fe in(Ye?IDBIndex:IDBObjectStore).prototype)||!ct&&!ye.includes(Fe))return;const qe=function(){var ne=(0,p.Z)(function*(he,...ve){const Me=this.transaction(he,ct?"readwrite":"readonly");let Re=Me.store;return Ye&&(Re=Re.index(ve.shift())),(yield Promise.all([Re[Fe](...ve),ct&&Me.done]))[0]});return function(ve){return ne.apply(this,arguments)}}();return Ve.set(fe,qe),qe}!function _e(U){Te=U(Te)}(U=>({...U,get:(fe,Fe,Ye)=>Ue(fe,Fe)||U.get(fe,Fe,Ye),has:(fe,Fe)=>!!Ue(fe,Fe)||U.has(fe,Fe)}))},5861:(ht,Ce,k)=>{function p(O,ee,J,oe,ie,ce,le){try{var B=O[ce](le),$=B.value}catch(q){return void J(q)}B.done?ee($):Promise.resolve($).then(oe,ie)}function Y(O){return function(){var ee=this,J=arguments;return new Promise(function(oe,ie){var ce=O.apply(ee,J);function le($){p(ce,oe,ie,le,B,"next",$)}function B($){p(ce,oe,ie,le,B,"throw",$)}le(void 0)})}}k.d(Ce,{Z:()=>Y})}},ht=>{ht(ht.s=5103)}]);